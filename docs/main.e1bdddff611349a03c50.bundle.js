(self.webpackChunksmooth_dragon=self.webpackChunksmooth_dragon||[]).push([[179],{160:(t,e,n)=>{"use strict";var i={};n.r(i),n.d(i,{ACESFilmicToneMapping:()=>It,AddEquation:()=>V,AddOperation:()=>mt,AdditiveAnimationBlendMode:()=>Xe,AdditiveBlending:()=>U,AlphaFormat:()=>$t,AlwaysDepth:()=>at,AlwaysStencilFunc:()=>xn,AmbientLight:()=>rd,AmbientLightProbe:()=>Id,AnimationClip:()=>Tu,AnimationLoader:()=>Hu,AnimationMixer:()=>Kd,AnimationObjectGroup:()=>qd,AnimationUtils:()=>mu,ArcCurve:()=>Nc,ArrayCamera:()=>Al,ArrowHelper:()=>Up,Audio:()=>Dd,AudioAnalyser:()=>Fd,AudioContext:()=>Cd,AudioListener:()=>Rd,AudioLoader:()=>vd,AxesHelper:()=>Gp,AxisHelper:()=>xg,BackSide:()=>O,BasicDepthPacking:()=>$e,BasicShadowMap:()=>T,BinaryTextureLoader:()=>Sg,Bone:()=>ic,BooleanKeyframeTrack:()=>xu,BoundingBoxHelper:()=>bg,Box2:()=>lp,Box3:()=>Ei,Box3Helper:()=>zp,BoxBufferGeometry:()=>Es,BoxGeometry:()=>Es,BoxHelper:()=>Op,BufferAttribute:()=>Vr,BufferGeometry:()=>ls,BufferGeometryLoader:()=>ud,ByteType:()=>Wt,Cache:()=>Pu,Camera:()=>Ds,CameraHelper:()=>Pp,CanvasRenderer:()=>Tg,CanvasTexture:()=>zc,CapsuleBufferGeometry:()=>sh,CapsuleGeometry:()=>sh,CatmullRomCurve3:()=>Vc,CineonToneMapping:()=>yt,CircleBufferGeometry:()=>oh,CircleGeometry:()=>oh,ClampToEdgeWrapping:()=>Lt,Clock:()=>Md,Color:()=>hi,ColorKeyframeTrack:()=>bu,ColorManagement:()=>ii,CompressedTexture:()=>Oc,CompressedTextureLoader:()=>Nu,ConeBufferGeometry:()=>lh,ConeGeometry:()=>lh,CubeCamera:()=>zs,CubeReflectionMapping:()=>_t,CubeRefractionMapping:()=>wt,CubeTexture:()=>Bs,CubeTextureLoader:()=>Uu,CubeUVReflectionMapping:()=>Et,CubicBezierCurve:()=>Qc,CubicBezierCurve3:()=>Zc,CubicInterpolant:()=>Cu,CullFaceBack:()=>M,CullFaceFront:()=>S,CullFaceFrontBack:()=>E,CullFaceNone:()=>w,Curve:()=>Bc,CurvePath:()=>nh,CustomBlending:()=>W,CustomToneMapping:()=>xt,CylinderBufferGeometry:()=>ah,CylinderGeometry:()=>ah,Cylindrical:()=>op,Data3DTexture:()=>Ii,DataArrayTexture:()=>vi,DataTexture:()=>rc,DataTexture2DArray:()=>Fg,DataTexture3D:()=>Ug,DataTextureLoader:()=>Gu,DataUtils:()=>Wp,DecrementStencilOp:()=>un,DecrementWrapStencilOp:()=>pn,DefaultLoadingManager:()=>Du,DepthFormat:()=>re,DepthStencilFormat:()=>se,DepthTexture:()=>Il,DirectionalLight:()=>id,DirectionalLightHelper:()=>Ep,DiscreteInterpolant:()=>yu,DodecahedronBufferGeometry:()=>hh,DodecahedronGeometry:()=>hh,DoubleSide:()=>z,DstAlphaFactor:()=>et,DstColorFactor:()=>it,DynamicBufferAttribute:()=>dg,DynamicCopyUsage:()=>Ln,DynamicDrawUsage:()=>_n,DynamicReadUsage:()=>Sn,EdgesGeometry:()=>fh,EdgesHelper:()=>_g,EllipseCurve:()=>Hc,EqualDepth:()=>ht,EqualStencilFunc:()=>An,EquirectangularReflectionMapping:()=>Mt,EquirectangularRefractionMapping:()=>St,Euler:()=>dr,EventDispatcher:()=>zn,ExtrudeBufferGeometry:()=>jh,ExtrudeGeometry:()=>jh,FaceColors:()=>eg,FileLoader:()=>Bu,FlatShading:()=>B,Float16BufferAttribute:()=>Kr,Float32Attribute:()=>yg,Float32BufferAttribute:()=>$r,Float64Attribute:()=>Ig,Float64BufferAttribute:()=>ts,FloatType:()=>Qt,Fog:()=>Sl,FogExp2:()=>Ml,Font:()=>Bg,FontLoader:()=>zg,FramebufferTexture:()=>Dc,FrontSide:()=>D,Frustum:()=>Vs,GLBufferAttribute:()=>ep,GLSL1:()=>Rn,GLSL3:()=>Dn,GreaterDepth:()=>dt,GreaterEqualDepth:()=>ut,GreaterEqualStencilFunc:()=>In,GreaterStencilFunc:()=>vn,GridHelper:()=>bp,Group:()=>Cl,HalfFloatType:()=>Zt,HemisphereLight:()=>Vu,HemisphereLightHelper:()=>xp,HemisphereLightProbe:()=>yd,IcosahedronBufferGeometry:()=>Xh,IcosahedronGeometry:()=>Xh,ImageBitmapLoader:()=>md,ImageLoader:()=>Fu,ImageUtils:()=>di,ImmediateRenderObject:()=>Hg,IncrementStencilOp:()=>hn,IncrementWrapStencilOp:()=>dn,InstancedBufferAttribute:()=>lc,InstancedBufferGeometry:()=>hd,InstancedInterleavedBuffer:()=>tp,InstancedMesh:()=>pc,Int16Attribute:()=>mg,Int16BufferAttribute:()=>Qr,Int32Attribute:()=>Cg,Int32BufferAttribute:()=>qr,Int8Attribute:()=>pg,Int8BufferAttribute:()=>jr,IntType:()=>Yt,InterleavedBuffer:()=>Tl,InterleavedBufferAttribute:()=>Pl,Interpolant:()=>Au,InterpolateDiscrete:()=>Ue,InterpolateLinear:()=>Ge,InterpolateSmooth:()=>ke,InvertStencilOp:()=>gn,JSONLoader:()=>Lg,KeepStencilOp:()=>ln,KeyframeTrack:()=>Iu,LOD:()=>ql,LatheBufferGeometry:()=>rh,LatheGeometry:()=>rh,Layers:()=>pr,LensFlare:()=>Rg,LessDepth:()=>lt,LessEqualDepth:()=>ct,LessEqualStencilFunc:()=>Cn,LessStencilFunc:()=>mn,Light:()=>Wu,LightProbe:()=>ad,Line:()=>yc,Line3:()=>up,LineBasicMaterial:()=>gc,LineCurve:()=>qc,LineCurve3:()=>Jc,LineDashedMaterial:()=>gu,LineLoop:()=>_c,LinePieces:()=>$p,LineSegments:()=>bc,LineStrip:()=>Kp,LinearEncoding:()=>Je,LinearFilter:()=>Ht,LinearInterpolant:()=>vu,LinearMipMapLinearFilter:()=>Gt,LinearMipMapNearestFilter:()=>Ft,LinearMipmapLinearFilter:()=>Ut,LinearMipmapNearestFilter:()=>Nt,LinearSRGBColorSpace:()=>on,LinearToneMapping:()=>Ct,Loader:()=>Ou,LoaderUtils:()=>cd,LoadingManager:()=>Ru,LoopOnce:()=>He,LoopPingPong:()=>Fe,LoopRepeat:()=>Ne,LuminanceAlphaFormat:()=>ie,LuminanceFormat:()=>ne,MOUSE:()=>b,Material:()=>Ur,MaterialLoader:()=>ld,Math:()=>Xn,MathUtils:()=>Xn,Matrix3:()=>Zn,Matrix4:()=>nr,MaxEquation:()=>Q,Mesh:()=>Ms,MeshBasicMaterial:()=>Gr,MeshDepthMaterial:()=>ul,MeshDistanceMaterial:()=>dl,MeshFaceMaterial:()=>ig,MeshLambertMaterial:()=>du,MeshMatcapMaterial:()=>pu,MeshNormalMaterial:()=>uu,MeshPhongMaterial:()=>cu,MeshPhysicalMaterial:()=>lu,MeshStandardMaterial:()=>au,MeshToonMaterial:()=>hu,MinEquation:()=>X,MirroredRepeatWrapping:()=>Pt,MixOperation:()=>ft,MultiMaterial:()=>rg,MultiplyBlending:()=>k,MultiplyOperation:()=>gt,NearestFilter:()=>Rt,NearestMipMapLinearFilter:()=>Bt,NearestMipMapNearestFilter:()=>Ot,NearestMipmapLinearFilter:()=>zt,NearestMipmapNearestFilter:()=>Dt,NeverDepth:()=>ot,NeverStencilFunc:()=>fn,NoBlending:()=>N,NoColorSpace:()=>rn,NoColors:()=>tg,NoToneMapping:()=>At,NormalAnimationBlendMode:()=>Ye,NormalBlending:()=>F,NotEqualDepth:()=>pt,NotEqualStencilFunc:()=>yn,NumberKeyframeTrack:()=>_u,Object3D:()=>Sr,ObjectLoader:()=>dd,ObjectSpaceNormalMap:()=>nn,OctahedronBufferGeometry:()=>Qh,OctahedronGeometry:()=>Qh,OneFactor:()=>q,OneMinusDstAlphaFactor:()=>nt,OneMinusDstColorFactor:()=>rt,OneMinusSrcAlphaFactor:()=>tt,OneMinusSrcColorFactor:()=>K,OrthographicCamera:()=>io,PCFShadowMap:()=>L,PCFSoftShadowMap:()=>P,PMREMGenerator:()=>uo,ParametricGeometry:()=>Dg,Particle:()=>og,ParticleBasicMaterial:()=>cg,ParticleSystem:()=>ag,ParticleSystemMaterial:()=>hg,Path:()=>ih,PerspectiveCamera:()=>Os,Plane:()=>Gs,PlaneBufferGeometry:()=>Xs,PlaneGeometry:()=>Xs,PlaneHelper:()=>Bp,PointCloud:()=>sg,PointCloudMaterial:()=>lg,PointLight:()=>ed,PointLightHelper:()=>Cp,Points:()=>Lc,PointsMaterial:()=>wc,PolarGridHelper:()=>_p,PolyhedronBufferGeometry:()=>ch,PolyhedronGeometry:()=>ch,PositionalAudio:()=>Nd,PropertyBinding:()=>Zd,PropertyMixer:()=>Ud,QuadraticBezierCurve:()=>Kc,QuadraticBezierCurve3:()=>$c,Quaternion:()=>_i,QuaternionKeyframeTrack:()=>Mu,QuaternionLinearInterpolant:()=>wu,REVISION:()=>x,RGBADepthPacking:()=>tn,RGBAFormat:()=>ee,RGBAIntegerFormat:()=>he,RGBA_ASTC_10x10_Format:()=>De,RGBA_ASTC_10x5_Format:()=>Le,RGBA_ASTC_10x6_Format:()=>Pe,RGBA_ASTC_10x8_Format:()=>Re,RGBA_ASTC_12x10_Format:()=>Oe,RGBA_ASTC_12x12_Format:()=>ze,RGBA_ASTC_4x4_Format:()=>xe,RGBA_ASTC_5x4_Format:()=>be,RGBA_ASTC_5x5_Format:()=>_e,RGBA_ASTC_6x5_Format:()=>we,RGBA_ASTC_6x6_Format:()=>Me,RGBA_ASTC_8x5_Format:()=>Se,RGBA_ASTC_8x6_Format:()=>Ee,RGBA_ASTC_8x8_Format:()=>Te,RGBA_BPTC_Format:()=>Be,RGBA_ETC2_EAC_Format:()=>Ie,RGBA_PVRTC_2BPPV1_Format:()=>Ce,RGBA_PVRTC_4BPPV1_Format:()=>Ae,RGBA_S3TC_DXT1_Format:()=>de,RGBA_S3TC_DXT3_Format:()=>pe,RGBA_S3TC_DXT5_Format:()=>ge,RGBFormat:()=>te,RGB_ETC1_Format:()=>ve,RGB_ETC2_Format:()=>ye,RGB_PVRTC_2BPPV1_Format:()=>me,RGB_PVRTC_4BPPV1_Format:()=>fe,RGB_S3TC_DXT1_Format:()=>ue,RGFormat:()=>le,RGIntegerFormat:()=>ce,RawShaderMaterial:()=>ou,Ray:()=>er,Raycaster:()=>np,RectAreaLight:()=>sd,RedFormat:()=>oe,RedIntegerFormat:()=>ae,ReinhardToneMapping:()=>vt,RepeatWrapping:()=>Tt,ReplaceStencilOp:()=>cn,ReverseSubtractEquation:()=>Y,RingBufferGeometry:()=>Zh,RingGeometry:()=>Zh,SRGBColorSpace:()=>sn,Scene:()=>El,SceneUtils:()=>Pg,ShaderChunk:()=>Qs,ShaderLib:()=>qs,ShaderMaterial:()=>Rs,ShadowMaterial:()=>su,Shape:()=>mh,ShapeBufferGeometry:()=>qh,ShapeGeometry:()=>qh,ShapePath:()=>kp,ShapeUtils:()=>kh,ShortType:()=>Vt,Skeleton:()=>ac,SkeletonHelper:()=>Ap,SkinnedMesh:()=>nc,SmoothShading:()=>H,Source:()=>pi,Sphere:()=>Xi,SphereBufferGeometry:()=>Jh,SphereGeometry:()=>Jh,Spherical:()=>sp,SphericalHarmonics3:()=>od,SplineCurve:()=>th,SpotLight:()=>qu,SpotLightHelper:()=>pp,Sprite:()=>Yl,SpriteMaterial:()=>Rl,SrcAlphaFactor:()=>$,SrcAlphaSaturateFactor:()=>st,SrcColorFactor:()=>J,StaticCopyUsage:()=>Tn,StaticDrawUsage:()=>bn,StaticReadUsage:()=>Mn,StereoCamera:()=>wd,StreamCopyUsage:()=>Pn,StreamDrawUsage:()=>wn,StreamReadUsage:()=>En,StringKeyframeTrack:()=>Su,SubtractEquation:()=>j,SubtractiveBlending:()=>G,TOUCH:()=>_,TangentSpaceNormalMap:()=>en,TetrahedronBufferGeometry:()=>Kh,TetrahedronGeometry:()=>Kh,TextGeometry:()=>Og,Texture:()=>mi,TextureLoader:()=>ku,TorusBufferGeometry:()=>$h,TorusGeometry:()=>$h,TorusKnotBufferGeometry:()=>tu,TorusKnotGeometry:()=>tu,Triangle:()=>Nr,TriangleFanDrawMode:()=>qe,TriangleStripDrawMode:()=>Ze,TrianglesDrawMode:()=>Qe,TubeBufferGeometry:()=>eu,TubeGeometry:()=>eu,UVMapping:()=>bt,Uint16Attribute:()=>Ag,Uint16BufferAttribute:()=>Zr,Uint32Attribute:()=>vg,Uint32BufferAttribute:()=>Jr,Uint8Attribute:()=>gg,Uint8BufferAttribute:()=>Yr,Uint8ClampedAttribute:()=>fg,Uint8ClampedBufferAttribute:()=>Xr,Uniform:()=>$d,UniformsLib:()=>Zs,UniformsUtils:()=>Ps,UnsignedByteType:()=>kt,UnsignedInt248Type:()=>Kt,UnsignedIntType:()=>Xt,UnsignedShort4444Type:()=>qt,UnsignedShort5551Type:()=>Jt,UnsignedShortType:()=>jt,VSMShadowMap:()=>R,Vector2:()=>Qn,Vector3:()=>wi,Vector4:()=>Ai,VectorKeyframeTrack:()=>Eu,Vertex:()=>ug,VertexColors:()=>ng,VideoTexture:()=>Rc,WebGL1Renderer:()=>wl,WebGL3DRenderTarget:()=>xi,WebGLArrayRenderTarget:()=>yi,WebGLCubeRenderTarget:()=>Hs,WebGLMultipleRenderTargets:()=>bi,WebGLMultisampleRenderTarget:()=>Ng,WebGLRenderTarget:()=>Ci,WebGLRenderTargetCube:()=>Eg,WebGLRenderer:()=>_l,WebGLUtils:()=>ml,WireframeGeometry:()=>nu,WireframeHelper:()=>wg,WrapAroundEnding:()=>je,XHRLoader:()=>Mg,ZeroCurvatureEnding:()=>We,ZeroFactor:()=>Z,ZeroSlopeEnding:()=>Ve,ZeroStencilOp:()=>an,_SRGBAFormat:()=>On,sRGBEncoding:()=>Ke});var r={};n.r(r),n.d(r,{BoxZone:()=>km,LineZone:()=>Wm,MeshZone:()=>Vm,PointZone:()=>jm,ScreenZone:()=>Ym,SphereZone:()=>eA});var s={};n.r(s),n.d(s,{Body:()=>Sm,BodySprite:()=>zm,InitializerUtil:()=>Hm,Life:()=>Nm,Mass:()=>Fm,PolarVelocity:()=>hA,Position:()=>iA,RadialVelocity:()=>uA,Radius:()=>rA,Rate:()=>sA,Texture:()=>lA,VectorVelocity:()=>dA});var o={};n.r(o),n.d(o,{Alpha:()=>vA,Attraction:()=>yA,Behaviour:()=>CA,Collision:()=>IA,Color:()=>xA,CrossZone:()=>bA,Force:()=>_A,Gravity:()=>wA,RandomDrift:()=>MA,Repulsion:()=>SA,Rotate:()=>EA,Scale:()=>TA,Spring:()=>LA});var a=n(379),l=n.n(a),c=n(795),h=n.n(c),u=n(569),d=n.n(u),p=n(565),g=n.n(p),f=n(216),m=n.n(f),A=n(589),C=n.n(A),v=n(922),y={};y.styleTagTransform=C(),y.setAttributes=g(),y.insert=d().bind(null,"head"),y.domAPI=h(),y.insertStyleElement=m();l()(v.Z,y);v.Z&&v.Z.locals&&v.Z.locals;const I=class{static isWebGLAvailable(){try{const t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}static isWebGL2Available(){try{const t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(t){const e={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const i=document.createElement("div");return i.id="webglmessage",i.style.fontFamily="monospace",i.style.fontSize="13px",i.style.fontWeight="normal",i.style.textAlign="center",i.style.background="#fff",i.style.color="#000",i.style.padding="1.5em",i.style.width="400px",i.style.margin="5em auto 0",n=e[t]?n.replace("$0","graphics card"):n.replace("$0","browser"),n=n.replace("$1",{1:"WebGL",2:"WebGL 2"}[t]),i.innerHTML=n,i}},x="140",b={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},w=0,M=1,S=2,E=3,T=0,L=1,P=2,R=3,D=0,O=1,z=2,B=1,H=2,N=0,F=1,U=2,G=3,k=4,W=5,V=100,j=101,Y=102,X=103,Q=104,Z=200,q=201,J=202,K=203,$=204,tt=205,et=206,nt=207,it=208,rt=209,st=210,ot=0,at=1,lt=2,ct=3,ht=4,ut=5,dt=6,pt=7,gt=0,ft=1,mt=2,At=0,Ct=1,vt=2,yt=3,It=4,xt=5,bt=300,_t=301,wt=302,Mt=303,St=304,Et=306,Tt=1e3,Lt=1001,Pt=1002,Rt=1003,Dt=1004,Ot=1004,zt=1005,Bt=1005,Ht=1006,Nt=1007,Ft=1007,Ut=1008,Gt=1008,kt=1009,Wt=1010,Vt=1011,jt=1012,Yt=1013,Xt=1014,Qt=1015,Zt=1016,qt=1017,Jt=1018,Kt=1020,$t=1021,te=1022,ee=1023,ne=1024,ie=1025,re=1026,se=1027,oe=1028,ae=1029,le=1030,ce=1031,he=1033,ue=33776,de=33777,pe=33778,ge=33779,fe=35840,me=35841,Ae=35842,Ce=35843,ve=36196,ye=37492,Ie=37496,xe=37808,be=37809,_e=37810,we=37811,Me=37812,Se=37813,Ee=37814,Te=37815,Le=37816,Pe=37817,Re=37818,De=37819,Oe=37820,ze=37821,Be=36492,He=2200,Ne=2201,Fe=2202,Ue=2300,Ge=2301,ke=2302,We=2400,Ve=2401,je=2402,Ye=2500,Xe=2501,Qe=0,Ze=1,qe=2,Je=3e3,Ke=3001,$e=3200,tn=3201,en=0,nn=1,rn="",sn="srgb",on="srgb-linear",an=0,ln=7680,cn=7681,hn=7682,un=7683,dn=34055,pn=34056,gn=5386,fn=512,mn=513,An=514,Cn=515,vn=516,yn=517,In=518,xn=519,bn=35044,_n=35048,wn=35040,Mn=35045,Sn=35049,En=35041,Tn=35046,Ln=35050,Pn=35042,Rn="100",Dn="300 es",On=1035;class zn{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const Bn=[];for(let t=0;t<256;t++)Bn[t]=(t<16?"0":"")+t.toString(16);let Hn=1234567;const Nn=Math.PI/180,Fn=180/Math.PI;function Un(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Bn[255&t]+Bn[t>>8&255]+Bn[t>>16&255]+Bn[t>>24&255]+"-"+Bn[255&e]+Bn[e>>8&255]+"-"+Bn[e>>16&15|64]+Bn[e>>24&255]+"-"+Bn[63&n|128]+Bn[n>>8&255]+"-"+Bn[n>>16&255]+Bn[n>>24&255]+Bn[255&i]+Bn[i>>8&255]+Bn[i>>16&255]+Bn[i>>24&255]).toLowerCase()}function Gn(t,e,n){return Math.max(e,Math.min(n,t))}function kn(t,e){return(t%e+e)%e}function Wn(t,e,n){return(1-n)*t+n*e}function Vn(t){return 0==(t&t-1)&&0!==t}function jn(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Yn(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Xn=Object.freeze({__proto__:null,DEG2RAD:Nn,RAD2DEG:Fn,generateUUID:Un,clamp:Gn,euclideanModulo:kn,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Wn,damp:function(t,e,n,i){return Wn(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(kn(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Hn=t);let e=Hn+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Nn},radToDeg:function(t){return t*Fn},isPowerOfTwo:Vn,ceilPowerOfTwo:jn,floorPowerOfTwo:Yn,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),h=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),p=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*u,l*d,a*c);break;case"YZY":t.set(l*d,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*d,a*h,a*c);break;case"XZX":t.set(a*h,l*g,l*p,a*c);break;case"YXY":t.set(l*p,a*h,l*g,a*c);break;case"ZYZ":t.set(l*g,l*p,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class Qn{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Qn.prototype.isVector2=!0;class Zn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],g=i[0],f=i[3],m=i[6],A=i[1],C=i[4],v=i[7],y=i[2],I=i[5],x=i[8];return r[0]=s*g+o*A+a*y,r[3]=s*f+o*C+a*I,r[6]=s*m+o*v+a*x,r[1]=l*g+c*A+h*y,r[4]=l*f+c*C+h*I,r[7]=l*m+c*v+h*x,r[2]=u*g+d*A+p*y,r[5]=u*f+d*C+p*I,r[8]=u*m+d*v+p*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=c*s-o*l,u=o*a-c*r,d=l*r-s*a,p=e*h+n*u+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return t[0]=h*g,t[1]=(i*l-c*n)*g,t[2]=(o*n-i*s)*g,t[3]=u*g,t[4]=(c*e-i*a)*g,t[5]=(i*r-o*e)*g,t[6]=d*g,t[7]=(n*a-l*e)*g,t[8]=(s*e-n*r)*g,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],c=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*c,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function qn(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}Zn.prototype.isMatrix3=!0;const Jn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Kn(t,e){return new Jn[t](e)}function $n(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ti(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ei(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const ni={[sn]:{[on]:ti},[on]:{[sn]:ei}},ii={legacyMode:!0,get workingColorSpace(){return on},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(ni[e]&&void 0!==ni[e][n]){const i=ni[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},ri={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},si={r:0,g:0,b:0},oi={h:0,s:0,l:0},ai={h:0,s:0,l:0};function li(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function ci(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class hi{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=sn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ii.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=on){return this.r=t,this.g=e,this.b=n,ii.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=on){if(t=kn(t,1),e=Gn(e,0,1),n=Gn(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=li(r,i,t+1/3),this.g=li(r,i,t),this.b=li(r,i,t-1/3)}return ii.toWorkingColorSpace(this,i),this}setStyle(t,e=sn){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,ii.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,ii.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const i=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100;return n(t[4]),this.setHSL(i,r,s,e)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,ii.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,ii.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=sn){const n=ri[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ti(t.r),this.g=ti(t.g),this.b=ti(t.b),this}copyLinearToSRGB(t){return this.r=ei(t.r),this.g=ei(t.g),this.b=ei(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=sn){return ii.fromWorkingColorSpace(ci(this,si),t),Gn(255*si.r,0,255)<<16^Gn(255*si.g,0,255)<<8^Gn(255*si.b,0,255)<<0}getHexString(t=sn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=on){ii.fromWorkingColorSpace(ci(this,si),e);const n=si.r,i=si.g,r=si.b,s=Math.max(n,i,r),o=Math.min(n,i,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const t=s-o;switch(l=c<=.5?t/(s+o):t/(2-s-o),s){case n:a=(i-r)/t+(i<r?6:0);break;case i:a=(r-n)/t+2;break;case r:a=(n-i)/t+4}a/=6}return t.h=a,t.s=l,t.l=c,t}getRGB(t,e=on){return ii.fromWorkingColorSpace(ci(this,si),e),t.r=si.r,t.g=si.g,t.b=si.b,t}getStyle(t=sn){return ii.fromWorkingColorSpace(ci(this,si),t),t!==sn?`color(${t} ${si.r} ${si.g} ${si.b})`:`rgb(${255*si.r|0},${255*si.g|0},${255*si.b|0})`}offsetHSL(t,e,n){return this.getHSL(oi),oi.h+=t,oi.s+=e,oi.l+=n,this.setHSL(oi.h,oi.s,oi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(oi),t.getHSL(ai);const n=Wn(oi.h,ai.h,e),i=Wn(oi.s,ai.s,e),r=Wn(oi.l,ai.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let ui;hi.NAMES=ri,hi.prototype.isColor=!0,hi.prototype.r=1,hi.prototype.g=1,hi.prototype.b=1;class di{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ui&&(ui=$n("canvas")),ui.width=t.width,ui.height=t.height;const n=ui.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=ui}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=$n("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*ti(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ti(e[t]/255)):e[t]=ti(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class pi{constructor(t=null){this.uuid=Un(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(gi(i[e].image)):t.push(gi(i[e]))}else t=gi(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function gi(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?di.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}pi.prototype.isSource=!0;let fi=0;class mi extends zn{constructor(t=mi.DEFAULT_IMAGE,e=mi.DEFAULT_MAPPING,n=Lt,i=Lt,r=Ht,s=Ut,o=ee,a=kt,l=1,c=Je){super(),Object.defineProperty(this,"id",{value:fi++}),this.uuid=Un(),this.name="",this.source=new pi(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Qn(0,0),this.repeat=new Qn(1,1),this.center=new Qn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==bt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Tt:t.x=t.x-Math.floor(t.x);break;case Lt:t.x=t.x<0?0:1;break;case Pt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Tt:t.y=t.y-Math.floor(t.y);break;case Lt:t.y=t.y<0?0:1;break;case Pt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}mi.DEFAULT_IMAGE=null,mi.DEFAULT_MAPPING=bt,mi.prototype.isTexture=!0;class Ai{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],p=s[6],g=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(o+h+g-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(o+1)/2,s=(h+1)/2,f=(g+1)/2,m=(a+c)/4,A=(l+d)/4,C=(u+p)/4;return t>s&&t>f?t<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=m/n,r=A/n):s>f?s<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=m/i,r=C/i):f<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(f),n=A/r,i=C/r),this.set(n,i,r,e),this}let f=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(f)<.001&&(f=1),this.x=(p-u)/f,this.y=(l-d)/f,this.z=(c-a)/f,this.w=Math.acos((o+h+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ai.prototype.isVector4=!0;class Ci extends zn{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Ai(0,0,t,e),this.scissorTest=!1,this.viewport=new Ai(0,0,t,e);const i={width:t,height:e,depth:1};this.texture=new mi(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ht,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new pi(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ci.prototype.isWebGLRenderTarget=!0;class vi extends mi{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Rt,this.minFilter=Rt,this.wrapR=Lt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}vi.prototype.isDataArrayTexture=!0;class yi extends Ci{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new vi(null,t,e,n),this.texture.isRenderTargetTexture=!0}}yi.prototype.isWebGLArrayRenderTarget=!0;class Ii extends mi{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Rt,this.minFilter=Rt,this.wrapR=Lt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ii.prototype.isData3DTexture=!0;class xi extends Ci{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new Ii(null,t,e,n),this.texture.isRenderTargetTexture=!0}}xi.prototype.isWebGL3DRenderTarget=!0;class bi extends Ci{constructor(t,e,n,i={}){super(t,e,i);const r=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}bi.prototype.isWebGLMultipleRenderTargets=!0;class _i{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3];const u=r[s+0],d=r[s+1],p=r[s+2],g=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=c,void(t[e+3]=h);if(1===o)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=g);if(h!==g||a!==u||l!==d||c!==p){let t=1-o;const e=a*u+l*d+c*p+h*g,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+d*r,c=c*t+p*r,h=h*t+g*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=t,l*=t,c*=t,h*=t}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],h=r[s],u=r[s+1],d=r[s+2],p=r[s+3];return t[e]=o*p+c*h+a*d-l*u,t[e+1]=a*p+c*u+l*h-o*d,t[e+2]=l*p+c*d+o*u-a*h,t[e+3]=c*p-o*h-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),p=a(r/2);switch(s){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],h=e[10],u=n+o+h;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>h){const t=2*Math.sqrt(1+n-o-h);this._w=(c-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>h){const t=2*Math.sqrt(1+o-n-h);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+h-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Gn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=i*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}_i.prototype.isQuaternion=!0;class wi{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Si.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Si.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Mi.copy(this).projectOnVector(t),this.sub(Mi)}reflect(t){return this.sub(Mi.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Gn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}wi.prototype.isVector3=!0;const Mi=new wi,Si=new _i;class Ei{constructor(t=new wi(1/0,1/0,1/0),e=new wi(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],c=t[a+1],h=t[a+2];l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>s&&(s=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),c=t.getY(a),h=t.getZ(a);l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>s&&(s=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Li.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)Li.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Li)}else null===n.boundingBox&&n.computeBoundingBox(),Pi.copy(n.boundingBox),Pi.applyMatrix4(t.matrixWorld),this.union(Pi);const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Li),Li.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ni),Fi.subVectors(this.max,Ni),Ri.subVectors(t.a,Ni),Di.subVectors(t.b,Ni),Oi.subVectors(t.c,Ni),zi.subVectors(Di,Ri),Bi.subVectors(Oi,Di),Hi.subVectors(Ri,Oi);let e=[0,-zi.z,zi.y,0,-Bi.z,Bi.y,0,-Hi.z,Hi.y,zi.z,0,-zi.x,Bi.z,0,-Bi.x,Hi.z,0,-Hi.x,-zi.y,zi.x,0,-Bi.y,Bi.x,0,-Hi.y,Hi.x,0];return!!ki(e,Ri,Di,Oi,Fi)&&(e=[1,0,0,0,1,0,0,0,1],!!ki(e,Ri,Di,Oi,Fi)&&(Ui.crossVectors(zi,Bi),e=[Ui.x,Ui.y,Ui.z],ki(e,Ri,Di,Oi,Fi)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Li.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Li).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ti[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ti[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ti[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ti[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ti[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ti[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ti[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ti[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ti)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Ei.prototype.isBox3=!0;const Ti=[new wi,new wi,new wi,new wi,new wi,new wi,new wi,new wi],Li=new wi,Pi=new Ei,Ri=new wi,Di=new wi,Oi=new wi,zi=new wi,Bi=new wi,Hi=new wi,Ni=new wi,Fi=new wi,Ui=new wi,Gi=new wi;function ki(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Gi.fromArray(t,s);const o=r.x*Math.abs(Gi.x)+r.y*Math.abs(Gi.y)+r.z*Math.abs(Gi.z),a=e.dot(Gi),l=n.dot(Gi),c=i.dot(Gi);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const Wi=new Ei,Vi=new wi,ji=new wi,Yi=new wi;class Xi{constructor(t=new wi,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Wi.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Yi.subVectors(t,this.center);const e=Yi.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(Yi.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?ji.set(0,0,1).multiplyScalar(t.radius):ji.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Vi.copy(t.center).add(ji)),this.expandByPoint(Vi.copy(t.center).sub(ji)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Qi=new wi,Zi=new wi,qi=new wi,Ji=new wi,Ki=new wi,$i=new wi,tr=new wi;class er{constructor(t=new wi,e=new wi(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Qi)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Qi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Qi.copy(this.direction).multiplyScalar(e).add(this.origin),Qi.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Zi.copy(t).add(e).multiplyScalar(.5),qi.copy(e).sub(t).normalize(),Ji.copy(this.origin).sub(Zi);const r=.5*t.distanceTo(e),s=-this.direction.dot(qi),o=Ji.dot(this.direction),a=-Ji.dot(qi),l=Ji.lengthSq(),c=Math.abs(1-s*s);let h,u,d,p;if(c>0)if(h=s*a-o,u=s*o-a,p=r*c,h>=0)if(u>=-p)if(u<=p){const t=1/c;h*=t,u*=t,d=h*(h+s*u+2*o)+u*(s*h+u+2*a)+l}else u=r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u=-r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u<=-p?(h=Math.max(0,-(-s*r+o)),u=h>0?-r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l):u<=p?(h=0,u=Math.min(Math.max(-r,-a),r),d=u*(u+2*a)+l):(h=Math.max(0,-(s*r+o)),u=h>0?r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l);else u=s>0?-r:r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(qi).multiplyScalar(u).add(Zi),d}intersectSphere(t,e){Qi.subVectors(t.center,this.origin);const n=Qi.dot(this.direction),i=Qi.dot(Qi)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Qi)}intersectTriangle(t,e,n,i,r){Ki.subVectors(e,t),$i.subVectors(n,t),tr.crossVectors(Ki,$i);let s,o=this.direction.dot(tr);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Ji.subVectors(this.origin,t);const a=s*this.direction.dot($i.crossVectors(Ji,$i));if(a<0)return null;const l=s*this.direction.dot(Ki.cross(Ji));if(l<0)return null;if(a+l>o)return null;const c=-s*Ji.dot(tr);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class nr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l,c,h,u,d,p,g,f){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=s,m[9]=o,m[13]=a,m[2]=l,m[6]=c,m[10]=h,m[14]=u,m[3]=d,m[7]=p,m[11]=g,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new nr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/ir.setFromMatrixColumn(t,0).length(),r=1/ir.setFromMatrixColumn(t,1).length(),s=1/ir.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){const t=s*c,n=s*h,i=o*c,r=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*a,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*c,n=a*h,i=l*c,r=l*h;e[0]=t+r*o,e[4]=i*o-n,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*c,n=a*h,i=l*c,r=l*h;e[0]=t-r*o,e[4]=-s*h,e[8]=i+n*o,e[1]=n+i*o,e[5]=s*c,e[9]=r-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*c,n=s*h,i=o*c,r=o*h;e[0]=a*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=a*h,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*c,e[4]=r-t*h,e[8]=i*h+n,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=n*h+i,e[10]=t-r*h}else if("XZY"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=t*h+r,e[5]=s*c,e[9]=n*h-i,e[2]=i*h-n,e[6]=o*c,e[10]=r*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(sr,t,or)}lookAt(t,e,n){const i=this.elements;return cr.subVectors(t,e),0===cr.lengthSq()&&(cr.z=1),cr.normalize(),ar.crossVectors(n,cr),0===ar.lengthSq()&&(1===Math.abs(n.z)?cr.x+=1e-4:cr.z+=1e-4,cr.normalize(),ar.crossVectors(n,cr)),ar.normalize(),lr.crossVectors(cr,ar),i[0]=ar.x,i[4]=lr.x,i[8]=cr.x,i[1]=ar.y,i[5]=lr.y,i[9]=cr.y,i[2]=ar.z,i[6]=lr.z,i[10]=cr.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],g=n[6],f=n[10],m=n[14],A=n[3],C=n[7],v=n[11],y=n[15],I=i[0],x=i[4],b=i[8],_=i[12],w=i[1],M=i[5],S=i[9],E=i[13],T=i[2],L=i[6],P=i[10],R=i[14],D=i[3],O=i[7],z=i[11],B=i[15];return r[0]=s*I+o*w+a*T+l*D,r[4]=s*x+o*M+a*L+l*O,r[8]=s*b+o*S+a*P+l*z,r[12]=s*_+o*E+a*R+l*B,r[1]=c*I+h*w+u*T+d*D,r[5]=c*x+h*M+u*L+d*O,r[9]=c*b+h*S+u*P+d*z,r[13]=c*_+h*E+u*R+d*B,r[2]=p*I+g*w+f*T+m*D,r[6]=p*x+g*M+f*L+m*O,r[10]=p*b+g*S+f*P+m*z,r[14]=p*_+g*E+f*R+m*B,r[3]=A*I+C*w+v*T+y*D,r[7]=A*x+C*M+v*L+y*O,r[11]=A*b+C*S+v*P+y*z,r[15]=A*_+C*E+v*R+y*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+t[11]*(+e*l*h-e*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*a*h+e*o*u+i*s*h-n*s*u+n*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],u=t[10],d=t[11],p=t[12],g=t[13],f=t[14],m=t[15],A=h*f*l-g*u*l+g*a*d-o*f*d-h*a*m+o*u*m,C=p*u*l-c*f*l-p*a*d+s*f*d+c*a*m-s*u*m,v=c*g*l-p*h*l+p*o*d-s*g*d-c*o*m+s*h*m,y=p*h*a-c*g*a-p*o*u+s*g*u+c*o*f-s*h*f,I=e*A+n*C+i*v+r*y;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/I;return t[0]=A*x,t[1]=(g*u*r-h*f*r-g*i*d+n*f*d+h*i*m-n*u*m)*x,t[2]=(o*f*r-g*a*r+g*i*l-n*f*l-o*i*m+n*a*m)*x,t[3]=(h*a*r-o*u*r-h*i*l+n*u*l+o*i*d-n*a*d)*x,t[4]=C*x,t[5]=(c*f*r-p*u*r+p*i*d-e*f*d-c*i*m+e*u*m)*x,t[6]=(p*a*r-s*f*r-p*i*l+e*f*l+s*i*m-e*a*m)*x,t[7]=(s*u*r-c*a*r+c*i*l-e*u*l-s*i*d+e*a*d)*x,t[8]=v*x,t[9]=(p*h*r-c*g*r-p*n*d+e*g*d+c*n*m-e*h*m)*x,t[10]=(s*g*r-p*o*r+p*n*l-e*g*l-s*n*m+e*o*m)*x,t[11]=(c*o*r-s*h*r-c*n*l+e*h*l+s*n*d-e*o*d)*x,t[12]=y*x,t[13]=(c*g*i-p*h*i+p*n*u-e*g*u-c*n*f+e*h*f)*x,t[14]=(p*o*i-s*g*i-p*n*a+e*g*a+s*n*f-e*o*f)*x,t[15]=(s*h*i-c*o*i+c*n*a-e*h*a-s*n*u+e*o*u)*x,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,p=r*h,g=s*c,f=s*h,m=o*h,A=a*l,C=a*c,v=a*h,y=n.x,I=n.y,x=n.z;return i[0]=(1-(g+m))*y,i[1]=(d+v)*y,i[2]=(p-C)*y,i[3]=0,i[4]=(d-v)*I,i[5]=(1-(u+m))*I,i[6]=(f+A)*I,i[7]=0,i[8]=(p+C)*x,i[9]=(f-A)*x,i[10]=(1-(u+g))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=ir.set(i[0],i[1],i[2]).length();const s=ir.set(i[4],i[5],i[6]).length(),o=ir.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],rr.copy(this);const a=1/r,l=1/s,c=1/o;return rr.elements[0]*=a,rr.elements[1]*=a,rr.elements[2]*=a,rr.elements[4]*=l,rr.elements[5]*=l,rr.elements[6]*=l,rr.elements[8]*=c,rr.elements[9]*=c,rr.elements[10]*=c,e.setFromRotationMatrix(rr),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){const o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),h=(e+t)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}nr.prototype.isMatrix4=!0;const ir=new wi,rr=new nr,sr=new wi(0,0,0),or=new wi(1,1,1),ar=new wi,lr=new wi,cr=new wi,hr=new nr,ur=new _i;class dr{constructor(t=0,e=0,n=0,i=dr.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Gn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Gn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return hr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(hr,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return ur.setFromEuler(this),this.setFromQuaternion(ur,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}dr.prototype.isEuler=!0,dr.DefaultOrder="XYZ",dr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class pr{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let gr=0;const fr=new wi,mr=new _i,Ar=new nr,Cr=new wi,vr=new wi,yr=new wi,Ir=new _i,xr=new wi(1,0,0),br=new wi(0,1,0),_r=new wi(0,0,1),wr={type:"added"},Mr={type:"removed"};class Sr extends zn{constructor(){super(),Object.defineProperty(this,"id",{value:gr++}),this.uuid=Un(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sr.DefaultUp.clone();const t=new wi,e=new dr,n=new _i,i=new wi(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nr},normalMatrix:{value:new Zn}}),this.matrix=new nr,this.matrixWorld=new nr,this.matrixAutoUpdate=Sr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new pr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return mr.setFromAxisAngle(t,e),this.quaternion.multiply(mr),this}rotateOnWorldAxis(t,e){return mr.setFromAxisAngle(t,e),this.quaternion.premultiply(mr),this}rotateX(t){return this.rotateOnAxis(xr,t)}rotateY(t){return this.rotateOnAxis(br,t)}rotateZ(t){return this.rotateOnAxis(_r,t)}translateOnAxis(t,e){return fr.copy(t).applyQuaternion(this.quaternion),this.position.add(fr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(xr,t)}translateY(t){return this.translateOnAxis(br,t)}translateZ(t){return this.translateOnAxis(_r,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ar.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Cr.copy(t):Cr.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),vr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ar.lookAt(vr,Cr,this.up):Ar.lookAt(Cr,vr,this.up),this.quaternion.setFromRotationMatrix(Ar),i&&(Ar.extractRotation(i.matrixWorld),mr.setFromRotationMatrix(Ar),this.quaternion.premultiply(mr.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(wr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Mr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Mr)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ar.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ar.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ar),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vr,t,yr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vr,Ir,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),c=s(t.animations),h=s(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),h.length>0&&(n.nodes=h)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Sr.DefaultUp=new wi(0,1,0),Sr.DefaultMatrixAutoUpdate=!0,Sr.prototype.isObject3D=!0;const Er=new wi,Tr=new wi,Lr=new wi,Pr=new wi,Rr=new wi,Dr=new wi,Or=new wi,zr=new wi,Br=new wi,Hr=new wi;class Nr{constructor(t=new wi,e=new wi,n=new wi){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Er.subVectors(t,e),i.cross(Er);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Er.subVectors(i,e),Tr.subVectors(n,e),Lr.subVectors(t,e);const s=Er.dot(Er),o=Er.dot(Tr),a=Er.dot(Lr),l=Tr.dot(Tr),c=Tr.dot(Lr),h=s*l-o*o;if(0===h)return r.set(-2,-1,-1);const u=1/h,d=(l*a-o*c)*u,p=(s*c-o*a)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Pr),Pr.x>=0&&Pr.y>=0&&Pr.x+Pr.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Pr),a.set(0,0),a.addScaledVector(r,Pr.x),a.addScaledVector(s,Pr.y),a.addScaledVector(o,Pr.z),a}static isFrontFacing(t,e,n,i){return Er.subVectors(n,e),Tr.subVectors(t,e),Er.cross(Tr).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Er.subVectors(this.c,this.b),Tr.subVectors(this.a,this.b),.5*Er.cross(Tr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Nr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Nr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Nr.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Nr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Nr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,o;Rr.subVectors(i,n),Dr.subVectors(r,n),zr.subVectors(t,n);const a=Rr.dot(zr),l=Dr.dot(zr);if(a<=0&&l<=0)return e.copy(n);Br.subVectors(t,i);const c=Rr.dot(Br),h=Dr.dot(Br);if(c>=0&&h<=c)return e.copy(i);const u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(Rr,s);Hr.subVectors(t,r);const d=Rr.dot(Hr),p=Dr.dot(Hr);if(p>=0&&d<=p)return e.copy(r);const g=d*l-a*p;if(g<=0&&l>=0&&p<=0)return o=l/(l-p),e.copy(n).addScaledVector(Dr,o);const f=c*p-d*h;if(f<=0&&h-c>=0&&d-p>=0)return Or.subVectors(r,i),o=(h-c)/(h-c+(d-p)),e.copy(i).addScaledVector(Or,o);const m=1/(f+g+u);return s=g*m,o=u*m,e.copy(n).addScaledVector(Rr,s).addScaledVector(Dr,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Fr=0;class Ur extends zn{constructor(){super(),Object.defineProperty(this,"id",{value:Fr++}),this.uuid=Un(),this.name="",this.type="Material",this.blending=F,this.side=D,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=$,this.blendDst=tt,this.blendEquation=V,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ct,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ln,this.stencilZFail=ln,this.stencilZPass=ln,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===B;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==F&&(n.blending=this.blending),this.side!==D&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Ur.prototype.isMaterial=!0,Ur.fromType=function(){return null};class Gr extends Ur{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}Gr.prototype.isMeshBasicMaterial=!0;const kr=new wi,Wr=new Qn;class Vr{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=bn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new hi),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Qn),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new wi),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Ai),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Wr.fromBufferAttribute(this,e),Wr.applyMatrix3(t),this.setXY(e,Wr.x,Wr.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)kr.fromBufferAttribute(this,e),kr.applyMatrix3(t),this.setXYZ(e,kr.x,kr.y,kr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)kr.fromBufferAttribute(this,e),kr.applyMatrix4(t),this.setXYZ(e,kr.x,kr.y,kr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)kr.fromBufferAttribute(this,e),kr.applyNormalMatrix(t),this.setXYZ(e,kr.x,kr.y,kr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)kr.fromBufferAttribute(this,e),kr.transformDirection(t),this.setXYZ(e,kr.x,kr.y,kr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==bn&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}Vr.prototype.isBufferAttribute=!0;class jr extends Vr{constructor(t,e,n){super(new Int8Array(t),e,n)}}class Yr extends Vr{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Xr extends Vr{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Qr extends Vr{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Zr extends Vr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class qr extends Vr{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Jr extends Vr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Kr extends Vr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}Kr.prototype.isFloat16BufferAttribute=!0;class $r extends Vr{constructor(t,e,n){super(new Float32Array(t),e,n)}}class ts extends Vr{constructor(t,e,n){super(new Float64Array(t),e,n)}}let es=0;const ns=new nr,is=new Sr,rs=new wi,ss=new Ei,os=new Ei,as=new wi;class ls extends zn{constructor(){super(),Object.defineProperty(this,"id",{value:es++}),this.uuid=Un(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(qn(t)?Jr:Zr)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Zn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ns.makeRotationFromQuaternion(t),this.applyMatrix4(ns),this}rotateX(t){return ns.makeRotationX(t),this.applyMatrix4(ns),this}rotateY(t){return ns.makeRotationY(t),this.applyMatrix4(ns),this}rotateZ(t){return ns.makeRotationZ(t),this.applyMatrix4(ns),this}translate(t,e,n){return ns.makeTranslation(t,e,n),this.applyMatrix4(ns),this}scale(t,e,n){return ns.makeScale(t,e,n),this.applyMatrix4(ns),this}lookAt(t){return is.lookAt(t),is.updateMatrix(),this.applyMatrix4(is.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rs).negate(),this.translate(rs.x,rs.y,rs.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new $r(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ei);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new wi(-1/0,-1/0,-1/0),new wi(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];ss.setFromBufferAttribute(n),this.morphTargetsRelative?(as.addVectors(this.boundingBox.min,ss.min),this.boundingBox.expandByPoint(as),as.addVectors(this.boundingBox.max,ss.max),this.boundingBox.expandByPoint(as)):(this.boundingBox.expandByPoint(ss.min),this.boundingBox.expandByPoint(ss.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Xi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new wi,1/0);if(t){const n=this.boundingSphere.center;if(ss.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];os.setFromBufferAttribute(n),this.morphTargetsRelative?(as.addVectors(ss.min,os.min),ss.expandByPoint(as),as.addVectors(ss.max,os.max),ss.expandByPoint(as)):(ss.expandByPoint(os.min),ss.expandByPoint(os.max))}ss.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)as.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(as));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)as.fromBufferAttribute(s,e),o&&(rs.fromBufferAttribute(t,e),as.add(rs)),i=Math.max(i,n.distanceToSquared(as))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Vr(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let t=0;t<o;t++)l[t]=new wi,c[t]=new wi;const h=new wi,u=new wi,d=new wi,p=new Qn,g=new Qn,f=new Qn,m=new wi,A=new wi;function C(t,e,n){h.fromArray(i,3*t),u.fromArray(i,3*e),d.fromArray(i,3*n),p.fromArray(s,2*t),g.fromArray(s,2*e),f.fromArray(s,2*n),u.sub(h),d.sub(h),g.sub(p),f.sub(p);const r=1/(g.x*f.y-f.x*g.y);isFinite(r)&&(m.copy(u).multiplyScalar(f.y).addScaledVector(d,-g.y).multiplyScalar(r),A.copy(d).multiplyScalar(g.x).addScaledVector(u,-f.x).multiplyScalar(r),l[t].add(m),l[e].add(m),l[n].add(m),c[t].add(A),c[e].add(A),c[n].add(A))}let v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(let t=0,e=v.length;t<e;++t){const e=v[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)C(n[t+0],n[t+1],n[t+2])}const y=new wi,I=new wi,x=new wi,b=new wi;function _(t){x.fromArray(r,3*t),b.copy(x);const e=l[t];y.copy(e),y.sub(x.multiplyScalar(x.dot(e))).normalize(),I.crossVectors(b,e);const n=I.dot(c[t])<0?-1:1;a[4*t]=y.x,a[4*t+1]=y.y,a[4*t+2]=y.z,a[4*t+3]=n}for(let t=0,e=v.length;t<e;++t){const e=v[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)_(n[t+0]),_(n[t+1]),_(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Vr(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new wi,r=new wi,s=new wi,o=new wi,a=new wi,l=new wi,c=new wi,h=new wi;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),g=t.getX(u+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,g),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,g),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z)}else for(let t=0,o=e.count;t<o;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,s=t.attributes[i],o=s.array,a=s.itemSize*e,l=Math.min(o.length,r.length-a);for(let t=0,e=a;t<l;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)as.fromBufferAttribute(t,e),as.normalize(),t.setXYZ(e,as.x,as.y,as.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let o=0,a=0;for(let r=0,l=e.length;r<l;r++){o=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)s[a++]=n[o++]}return new Vr(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ls,n=this.index.array,i=this.attributes;for(const r in i){const s=t(i[r],n);e.setAttribute(r,s)}const r=this.morphAttributes;for(const i in r){const s=[],o=r[i];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);s.push(i)}e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,n=s.length;t<n;t++){const n=s[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],s=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];s.push(i.toJSON(t.data))}s.length>0&&(i[e]=s,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ls.prototype.isBufferGeometry=!0;const cs=new nr,hs=new er,us=new Xi,ds=new wi,ps=new wi,gs=new wi,fs=new wi,ms=new wi,As=new wi,Cs=new wi,vs=new wi,ys=new wi,Is=new Qn,xs=new Qn,bs=new Qn,_s=new wi,ws=new wi;class Ms extends Sr{constructor(t=new ls,e=new Gr){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),us.copy(n.boundingSphere),us.applyMatrix4(r),!1===t.ray.intersectsSphere(us))return;if(cs.copy(r).invert(),hs.copy(t.ray).applyMatrix4(cs),null!==n.boundingBox&&!1===hs.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=u.length;n<p;n++){const p=u[n],g=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(r.count,Math.min(p.start+p.count,d.start+d.count));n<i;n+=3){const i=r.getX(n),u=r.getX(n+1),d=r.getX(n+2);s=Ss(this,g,t,hs,o,a,l,c,h,i,u,d),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{for(let n=Math.max(0,d.start),u=Math.min(r.count,d.start+d.count);n<u;n+=3){const u=r.getX(n),d=r.getX(n+1),p=r.getX(n+2);s=Ss(this,i,t,hs,o,a,l,c,h,u,d,p),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=u.length;n<r;n++){const r=u[n],p=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));n<i;n+=3){s=Ss(this,p,t,hs,o,a,l,c,h,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3){s=Ss(this,i,t,hs,o,a,l,c,h,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Ss(t,e,n,i,r,s,o,a,l,c,h,u){ds.fromBufferAttribute(r,c),ps.fromBufferAttribute(r,h),gs.fromBufferAttribute(r,u);const d=t.morphTargetInfluences;if(s&&d){Cs.set(0,0,0),vs.set(0,0,0),ys.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=d[t],n=s[t];0!==e&&(fs.fromBufferAttribute(n,c),ms.fromBufferAttribute(n,h),As.fromBufferAttribute(n,u),o?(Cs.addScaledVector(fs,e),vs.addScaledVector(ms,e),ys.addScaledVector(As,e)):(Cs.addScaledVector(fs.sub(ds),e),vs.addScaledVector(ms.sub(ps),e),ys.addScaledVector(As.sub(gs),e)))}ds.add(Cs),ps.add(vs),gs.add(ys)}t.isSkinnedMesh&&(t.boneTransform(c,ds),t.boneTransform(h,ps),t.boneTransform(u,gs));const p=function(t,e,n,i,r,s,o,a){let l;if(l=e.side===O?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==z,a),null===l)return null;ws.copy(a),ws.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(ws);return c<n.near||c>n.far?null:{distance:c,point:ws.clone(),object:t}}(t,e,n,i,ds,ps,gs,_s);if(p){a&&(Is.fromBufferAttribute(a,c),xs.fromBufferAttribute(a,h),bs.fromBufferAttribute(a,u),p.uv=Nr.getUV(_s,ds,ps,gs,Is,xs,bs,new Qn)),l&&(Is.fromBufferAttribute(l,c),xs.fromBufferAttribute(l,h),bs.fromBufferAttribute(l,u),p.uv2=Nr.getUV(_s,ds,ps,gs,Is,xs,bs,new Qn));const t={a:c,b:h,c:u,normal:new wi,materialIndex:0};Nr.getNormal(ds,ps,gs,t.normal),p.face=t}return p}Ms.prototype.isMesh=!0;class Es extends ls{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const a=[],l=[],c=[],h=[];let u=0,d=0;function p(t,e,n,i,r,s,p,g,f,m,A){const C=s/f,v=p/m,y=s/2,I=p/2,x=g/2,b=f+1,_=m+1;let w=0,M=0;const S=new wi;for(let s=0;s<_;s++){const o=s*v-I;for(let a=0;a<b;a++){const u=a*C-y;S[t]=u*i,S[e]=o*r,S[n]=x,l.push(S.x,S.y,S.z),S[t]=0,S[e]=0,S[n]=g>0?1:-1,c.push(S.x,S.y,S.z),h.push(a/f),h.push(1-s/m),w+=1}}for(let t=0;t<m;t++)for(let e=0;e<f;e++){const n=u+e+b*t,i=u+e+b*(t+1),r=u+(e+1)+b*(t+1),s=u+(e+1)+b*t;a.push(n,i,s),a.push(i,r,s),M+=6}o.addGroup(d,M,A),d+=M,u+=w}p("z","y","x",-1,-1,n,e,t,s,r,0),p("z","y","x",1,-1,n,e,-t,s,r,1),p("x","z","y",1,1,t,n,e,i,s,2),p("x","z","y",1,-1,t,n,-e,i,s,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new $r(l,3)),this.setAttribute("normal",new $r(c,3)),this.setAttribute("uv",new $r(h,2))}static fromJSON(t){return new Es(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ts(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Ls(t){const e={};for(let n=0;n<t.length;n++){const i=Ts(t[n]);for(const t in i)e[t]=i[t]}return e}const Ps={clone:Ts,merge:Ls};class Rs extends Ur{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ts(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Rs.prototype.isShaderMaterial=!0;class Ds extends Sr{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new nr,this.projectionMatrix=new nr,this.projectionMatrixInverse=new nr}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Ds.prototype.isCamera=!0;class Os extends Ds{constructor(t=50,e=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Fn*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Nn*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Fn*Math.atan(Math.tan(.5*Nn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Nn*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/o,i*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Os.prototype.isPerspectiveCamera=!0;class zs extends Sr{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Os(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new wi(1,0,0)),this.add(i);const r=new Os(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new wi(-1,0,0)),this.add(r);const s=new Os(90,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new wi(0,1,0)),this.add(s);const o=new Os(90,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new wi(0,-1,0)),this.add(o);const a=new Os(90,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new wi(0,0,1)),this.add(a);const l=new Os(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new wi(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,o,a,l]=this.children,c=t.getRenderTarget(),h=t.toneMapping,u=t.xr.enabled;t.toneMapping=At,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=h,t.xr.enabled=u,n.texture.needsPMREMUpdate=!0}}class Bs extends mi{constructor(t,e,n,i,r,s,o,a,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:_t,n,i,r,s,o,a,l,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Bs.prototype.isCubeTexture=!0;class Hs extends Ci{constructor(t,e={}){super(t,t,e);const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new Bs(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Ht}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Es(5,5,5),r=new Rs({name:"CubemapFromEquirect",uniforms:Ts(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:O,blending:N});r.uniforms.tEquirect.value=e;const s=new Ms(i,r),o=e.minFilter;e.minFilter===Ut&&(e.minFilter=Ht);return new zs(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}Hs.prototype.isWebGLCubeRenderTarget=!0;const Ns=new wi,Fs=new wi,Us=new Zn;class Gs{constructor(t=new wi(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Ns.subVectors(n,e).cross(Fs.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Ns),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Us.getNormalMatrix(t),i=this.coplanarPoint(Ns).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Gs.prototype.isPlane=!0;const ks=new Xi,Ws=new wi;class Vs{constructor(t=new Gs,e=new Gs,n=new Gs,i=new Gs,r=new Gs,s=new Gs){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],g=n[11],f=n[12],m=n[13],A=n[14],C=n[15];return e[0].setComponents(o-i,h-a,g-u,C-f).normalize(),e[1].setComponents(o+i,h+a,g+u,C+f).normalize(),e[2].setComponents(o+r,h+l,g+d,C+m).normalize(),e[3].setComponents(o-r,h-l,g-d,C-m).normalize(),e[4].setComponents(o-s,h-c,g-p,C-A).normalize(),e[5].setComponents(o+s,h+c,g+p,C+A).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ks.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ks)}intersectsSprite(t){return ks.center.set(0,0,0),ks.radius=.7071067811865476,ks.applyMatrix4(t.matrixWorld),this.intersectsSphere(ks)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Ws.x=i.normal.x>0?t.max.x:t.min.x,Ws.y=i.normal.y>0?t.max.y:t.min.y,Ws.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Ws)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function js(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ys(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const r=e.array,s=e.usage,o=t.createBuffer();let a;if(t.bindBuffer(i,o),t.bufferData(i,r,s),e.onUploadCallback(),r instanceof Float32Array)a=5126;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(r instanceof Int16Array)a=5122;else if(r instanceof Uint32Array)a=5125;else if(r instanceof Int32Array)a=5124;else if(r instanceof Int8Array)a=5120;else if(r instanceof Uint8Array)a=5121;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);a=5121}return{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(!function(e,i,r){const s=i.array,o=i.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,s):(n?t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class Xs extends ls{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,h=t/o,u=e/a,d=[],p=[],g=[],f=[];for(let t=0;t<c;t++){const e=t*u-s;for(let n=0;n<l;n++){const i=n*h-r;p.push(i,-e,0),g.push(0,0,1),f.push(n/o),f.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),s=e+1+l*t;d.push(n,i,s),d.push(i,r,s)}this.setIndex(d),this.setAttribute("position",new $r(p,3)),this.setAttribute("normal",new $r(g,3)),this.setAttribute("uv",new $r(f,2))}static fromJSON(t){return new Xs(t.width,t.height,t.widthSegments,t.heightSegments)}}const Qs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Zs={common:{diffuse:{value:new hi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zn},uv2Transform:{value:new Zn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zn}},sprite:{diffuse:{value:new hi(16777215)},opacity:{value:1},center:{value:new Qn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zn}}},qs={basic:{uniforms:Ls([Zs.common,Zs.specularmap,Zs.envmap,Zs.aomap,Zs.lightmap,Zs.fog]),vertexShader:Qs.meshbasic_vert,fragmentShader:Qs.meshbasic_frag},lambert:{uniforms:Ls([Zs.common,Zs.specularmap,Zs.envmap,Zs.aomap,Zs.lightmap,Zs.emissivemap,Zs.fog,Zs.lights,{emissive:{value:new hi(0)}}]),vertexShader:Qs.meshlambert_vert,fragmentShader:Qs.meshlambert_frag},phong:{uniforms:Ls([Zs.common,Zs.specularmap,Zs.envmap,Zs.aomap,Zs.lightmap,Zs.emissivemap,Zs.bumpmap,Zs.normalmap,Zs.displacementmap,Zs.fog,Zs.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Qs.meshphong_vert,fragmentShader:Qs.meshphong_frag},standard:{uniforms:Ls([Zs.common,Zs.envmap,Zs.aomap,Zs.lightmap,Zs.emissivemap,Zs.bumpmap,Zs.normalmap,Zs.displacementmap,Zs.roughnessmap,Zs.metalnessmap,Zs.fog,Zs.lights,{emissive:{value:new hi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qs.meshphysical_vert,fragmentShader:Qs.meshphysical_frag},toon:{uniforms:Ls([Zs.common,Zs.aomap,Zs.lightmap,Zs.emissivemap,Zs.bumpmap,Zs.normalmap,Zs.displacementmap,Zs.gradientmap,Zs.fog,Zs.lights,{emissive:{value:new hi(0)}}]),vertexShader:Qs.meshtoon_vert,fragmentShader:Qs.meshtoon_frag},matcap:{uniforms:Ls([Zs.common,Zs.bumpmap,Zs.normalmap,Zs.displacementmap,Zs.fog,{matcap:{value:null}}]),vertexShader:Qs.meshmatcap_vert,fragmentShader:Qs.meshmatcap_frag},points:{uniforms:Ls([Zs.points,Zs.fog]),vertexShader:Qs.points_vert,fragmentShader:Qs.points_frag},dashed:{uniforms:Ls([Zs.common,Zs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qs.linedashed_vert,fragmentShader:Qs.linedashed_frag},depth:{uniforms:Ls([Zs.common,Zs.displacementmap]),vertexShader:Qs.depth_vert,fragmentShader:Qs.depth_frag},normal:{uniforms:Ls([Zs.common,Zs.bumpmap,Zs.normalmap,Zs.displacementmap,{opacity:{value:1}}]),vertexShader:Qs.meshnormal_vert,fragmentShader:Qs.meshnormal_frag},sprite:{uniforms:Ls([Zs.sprite,Zs.fog]),vertexShader:Qs.sprite_vert,fragmentShader:Qs.sprite_frag},background:{uniforms:{uvTransform:{value:new Zn},t2D:{value:null}},vertexShader:Qs.background_vert,fragmentShader:Qs.background_frag},cube:{uniforms:Ls([Zs.envmap,{opacity:{value:1}}]),vertexShader:Qs.cube_vert,fragmentShader:Qs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qs.equirect_vert,fragmentShader:Qs.equirect_frag},distanceRGBA:{uniforms:Ls([Zs.common,Zs.displacementmap,{referencePosition:{value:new wi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qs.distanceRGBA_vert,fragmentShader:Qs.distanceRGBA_frag},shadow:{uniforms:Ls([Zs.lights,Zs.fog,{color:{value:new hi(0)},opacity:{value:1}}]),vertexShader:Qs.shadow_vert,fragmentShader:Qs.shadow_frag}};function Js(t,e,n,i,r,s){const o=new hi(0);let a,l,c=!0===r?0:1,h=null,u=0,d=null;function p(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,s)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,p(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,p(o,c)},render:function(n,r){let s=!1,g=!0===r.isScene?r.background:null;g&&g.isTexture&&(g=e.get(g));const f=t.xr,m=f.getSession&&f.getSession();m&&"additive"===m.environmentBlendMode&&(g=null),null===g?p(o,c):g&&g.isColor&&(p(g,1),s=!0),(t.autoClear||s)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===Et)?(void 0===l&&(l=new Ms(new Es(1,1,1),new Rs({name:"BackgroundCubeMaterial",uniforms:Ts(qs.cube.uniforms),vertexShader:qs.cube.vertexShader,fragmentShader:qs.cube.fragmentShader,side:O,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,h===g&&u===g.version&&d===t.toneMapping||(l.material.needsUpdate=!0,h=g,u=g.version,d=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new Ms(new Xs(2,2),new Rs({name:"BackgroundMaterial",uniforms:Ts(qs.background.uniforms),vertexShader:qs.background.vertexShader,fragmentShader:qs.background.fragmentShader,side:D,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),h===g&&u===g.version&&d===t.toneMapping||(a.material.needsUpdate=!0,h=g,u=g.version,d=t.toneMapping),a.layers.enableAll(),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Ks(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=p(null);let c=l,h=!1;function u(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function d(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function g(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){const s=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(s[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),a[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r}}function A(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function C(e,n,r,s,o,a){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,s,o,a):t.vertexAttribIPointer(e,n,r,o,a)}function v(){y(),h=!0,c!==l&&(c=l,u(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,v,y){let I=!1;if(o){const e=function(e,n,r){const o=!0===r.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let h=c[o];void 0===h&&(h=p(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),c[o]=h);return h}(v,d,l);c!==e&&(c=e,u(c.object)),I=function(t,e,n,i){const r=c.attributes,s=e.attributes;let o=0;const a=n.getAttributes();for(const e in a){if(a[e].location>=0){const n=r[e];let i=s[e];if(void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;o++}}return c.attributesNum!==o||c.index!==i}(r,v,d,y),I&&function(t,e,n,i){const r={},s=e.attributes;let o=0;const a=n.getAttributes();for(const e in a){if(a[e].location>=0){let n=s[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[e]=i,o++}}c.attributes=r,c.attributesNum=o,c.index=i}(r,v,d,y)}else{const t=!0===l.wireframe;c.geometry===v.id&&c.program===d.id&&c.wireframe===t||(c.geometry=v.id,c.program=d.id,c.wireframe=t,I=!0)}null!==y&&n.update(y,34963),(I||h)&&(h=!1,function(r,s,o,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;g();const l=a.attributes,c=o.getAttributes(),h=s.defaultAttributeValues;for(const e in c){const i=c[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,o=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,h=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)m(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)C(i.location+t,o/i.locationSize,h,e,l*u,(d+o/i.locationSize*t)*u)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)m(i.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)C(i.location+t,o/i.locationSize,h,e,o*u,o/i.locationSize*t*u)}}else if(void 0!==h){const n=h[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}A()}(r,l,d,v),null!==y&&t.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)d(i[t].object),delete i[t];delete n[t.id]}},initAttributes:g,enableAttribute:f,disableUnusedAttributes:A}}function $s(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,o,a){if(0===a)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,o,a),n.update(o,s,a)}}function to(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),u=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),g=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),A=t.getParameter(36349),C=u>0,v=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:A,vertexTextures:C,floatFragmentTextures:v,floatVertexTextures:C&&v,maxSamples:s?t.getParameter(36183):0}}function eo(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Gs,a=new Zn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(t,n,i,r){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const e=i+4*s,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=i;e!==s;++e,n+=4)o.copy(t[e]).applyMatrix4(r,a),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==i||r;return r=e,n=h(t,s,0),i=t.length,o},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(e,o,a){const u=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,g=t.get(e);if(!r||null===u||0===u.length||s&&!p)s?h(null):c();else{const t=s?0:i,e=4*t;let r=g.clippingState||null;l.value=r,r=h(u,o,e,a);for(let t=0;t!==e;++t)r[t]=n[t];g.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function no(t){let e=new WeakMap;function n(t,e){return e===Mt?t.mapping=_t:e===St&&(t.mapping=wt),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===Mt||s===St){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=new Hs(s.height/2);return o.fromEquirectangularTexture(t,r),e.set(r,o),r.addEventListener("dispose",i),n(o.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}qs.physical={uniforms:Ls([qs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new hi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Qn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new hi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new hi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Qs.meshphysical_vert,fragmentShader:Qs.meshphysical_frag};class io extends Ds{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}io.prototype.isOrthographicCamera=!0;const ro=[.125,.215,.35,.446,.526,.582],so=new io,oo=new hi;let ao=null;const lo=(1+Math.sqrt(5))/2,co=1/lo,ho=[new wi(1,1,1),new wi(-1,1,1),new wi(1,1,-1),new wi(-1,1,-1),new wi(0,lo,co),new wi(0,lo,-co),new wi(co,0,lo),new wi(-co,0,lo),new wi(lo,co,0),new wi(-lo,co,0)];class uo{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){ao=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=mo(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=fo(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(ao),t.scissorTest=!1,go(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===_t||t.mapping===wt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),ao=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ht,minFilter:Ht,generateMipmaps:!1,type:Zt,format:ee,encoding:Je,depthBuffer:!1},i=po(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=po(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const s=t-4+1+ro.length;for(let o=0;o<s;o++){const s=Math.pow(2,r);n.push(s);let a=1/s;o>t-4?a=ro[o-t+4-1]:0===o&&(a=0),i.push(a);const l=1/(s-2),c=-l,h=1+l,u=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,g=3,f=2,m=1,A=new Float32Array(g*p*d),C=new Float32Array(f*p*d),v=new Float32Array(m*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];A.set(i,g*p*t),C.set(u,f*p*t);const r=[t,t,t,t,t,t];v.set(r,m*p*t)}const y=new ls;y.setAttribute("position",new Vr(A,g)),y.setAttribute("uv",new Vr(C,f)),y.setAttribute("faceIndex",new Vr(v,m)),e.push(y),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(20),r=new wi(0,1,0);return new Rs({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:t+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Ao(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:N,depthTest:!1,depthWrite:!1})}(i,t,e)}return i}_compileMaterial(t){const e=new Ms(this._lodPlanes[0],t);this._renderer.compile(e,so)}_sceneToCubeUV(t,e,n,i){const r=new Os(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(oo),a.toneMapping=At,a.autoClear=!1;const h=new Gr({name:"PMREM.Background",side:O,depthWrite:!1,depthTest:!1}),u=new Ms(new Es,h);let d=!1;const p=t.background;p?p.isColor&&(h.color.copy(p),t.background=null,d=!0):(h.color.copy(oo),d=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(r.up.set(0,s[e],0),r.lookAt(o[e],0,0)):1===n?(r.up.set(0,0,s[e]),r.lookAt(0,o[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,o[e]));const l=this._cubeSize;go(i,n*l,e>2?l:0,l,l),a.setRenderTarget(i),d&&a.render(u,r),a.render(t,r)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===_t||t.mapping===wt;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=mo()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=fo());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new Ms(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const o=this._cubeSize;go(e,0,0,3*o,2*o),n.setRenderTarget(e),n.render(s,so)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=ho[(e-1)%ho.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Ms(this._lodPlanes[i],l),h=l.uniforms,u=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,g=isFinite(r)?1+Math.floor(3*p):20;g>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const f=[];let m=0;for(let t=0;t<20;++t){const e=t/p,n=Math.exp(-e*e/2);f.push(n),0===t?m+=n:t<g&&(m+=2*n)}for(let t=0;t<f.length;t++)f[t]=f[t]/m;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=f,h.latitudinal.value="latitudinal"===s,o&&(h.poleAxis.value=o);const{_lodMax:A}=this;h.dTheta.value=d,h.mipInt.value=A-n;const C=this._sizeLods[i];go(e,3*C*(i>A-4?i-A+4:0),4*(this._cubeSize-C),3*C,2*C),a.setRenderTarget(e),a.render(c,so)}}function po(t,e,n){const i=new Ci(t,e,n);return i.texture.mapping=Et,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function go(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function fo(){return new Rs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ao(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:N,depthTest:!1,depthWrite:!1})}function mo(){return new Rs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ao(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:N,depthTest:!1,depthWrite:!1})}function Ao(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Co(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,o=s===Mt||s===St,a=s===_t||s===wt;if(o||a){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new uo(t)),i=o?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(o&&s&&s.height>0||a&&s&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(s)){null===n&&(n=new uo(t));const s=o?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function vo(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function yo(t,e,n,i){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",o),delete r[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const a=new(qn(n)?Jr:Zr)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function Io(t,e,n,i){const r=i.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,o,e*a),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let h,u;if(r)h=t,u="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](s,l,o,i*a,c),n.update(l,s,c)}}function xo(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function bo(t,e){return t[0]-e[0]}function _o(t,e){return Math.abs(e[1])-Math.abs(t[1])}function wo(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function Mo(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Ai,a=[];for(let t=0;t<8;t++)a[t]=[t,0];return{update:function(l,c,h,u){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,r=void 0!==i?i.length:0;let a=s.get(c);if(void 0===a||a.count!==r){void 0!==a&&a.texture.dispose();const t=void 0!==c.morphAttributes.position,n=void 0!==c.morphAttributes.normal,i=void 0!==c.morphAttributes.color,l=c.morphAttributes.position||[],h=c.morphAttributes.normal||[],u=c.morphAttributes.color||[];let d=0;!0===t&&(d=1),!0===n&&(d=2),!0===i&&(d=3);let p=c.attributes.position.count*d,g=1;p>e.maxTextureSize&&(g=Math.ceil(p/e.maxTextureSize),p=e.maxTextureSize);const f=new Float32Array(p*g*4*r),m=new vi(f,p,g,r);m.type=Qt,m.needsUpdate=!0;const A=4*d;for(let e=0;e<r;e++){const r=l[e],s=h[e],a=u[e],c=p*g*4*e;for(let e=0;e<r.count;e++){const l=e*A;!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&wo(o,r),f[c+l+0]=o.x,f[c+l+1]=o.y,f[c+l+2]=o.z,f[c+l+3]=0),!0===n&&(o.fromBufferAttribute(s,e),!0===s.normalized&&wo(o,s),f[c+l+4]=o.x,f[c+l+5]=o.y,f[c+l+6]=o.z,f[c+l+7]=0),!0===i&&(o.fromBufferAttribute(a,e),!0===a.normalized&&wo(o,a),f[c+l+8]=o.x,f[c+l+9]=o.y,f[c+l+10]=o.z,f[c+l+11]=4===a.itemSize?o.w:1)}}a={count:r,texture:m,size:new Qn(p,g)},s.set(c,a),c.addEventListener("dispose",(function t(){m.dispose(),s.delete(c),c.removeEventListener("dispose",t)}))}let l=0;for(let t=0;t<d.length;t++)l+=d[t];const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",h),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",a.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",a.size)}else{const e=void 0===d?0:d.length;let n=i[c.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[c.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=d[t]}n.sort(_o);for(let t=0;t<8;t++)t<e&&n[t][1]?(a[t][0]=n[t][0],a[t][1]=n[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(bo);const s=c.morphAttributes.position,o=c.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=a[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&c.getAttribute("morphTarget"+t)!==s[n]&&c.setAttribute("morphTarget"+t,s[n]),o&&c.getAttribute("morphNormal"+t)!==o[n]&&c.setAttribute("morphNormal"+t,o[n]),r[t]=i,l+=i):(s&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),o&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),r[t]=0)}const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",h),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function So(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=i.render.frame,a=t.geometry,l=e.get(t,a);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}const Eo=new mi,To=new vi,Lo=new Ii,Po=new Bs,Ro=[],Do=[],Oo=new Float32Array(16),zo=new Float32Array(9),Bo=new Float32Array(4);function Ho(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=Ro[r];if(void 0===s&&(s=new Float32Array(r),Ro[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function No(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Fo(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Uo(t,e){let n=Do[e];void 0===n&&(n=new Int32Array(e),Do[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Go(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ko(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(No(n,e))return;t.uniform2fv(this.addr,e),Fo(n,e)}}function Wo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(No(n,e))return;t.uniform3fv(this.addr,e),Fo(n,e)}}function Vo(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(No(n,e))return;t.uniform4fv(this.addr,e),Fo(n,e)}}function jo(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(No(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fo(n,e)}else{if(No(n,i))return;Bo.set(i),t.uniformMatrix2fv(this.addr,!1,Bo),Fo(n,i)}}function Yo(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(No(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fo(n,e)}else{if(No(n,i))return;zo.set(i),t.uniformMatrix3fv(this.addr,!1,zo),Fo(n,i)}}function Xo(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(No(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fo(n,e)}else{if(No(n,i))return;Oo.set(i),t.uniformMatrix4fv(this.addr,!1,Oo),Fo(n,i)}}function Qo(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Zo(t,e){const n=this.cache;No(n,e)||(t.uniform2iv(this.addr,e),Fo(n,e))}function qo(t,e){const n=this.cache;No(n,e)||(t.uniform3iv(this.addr,e),Fo(n,e))}function Jo(t,e){const n=this.cache;No(n,e)||(t.uniform4iv(this.addr,e),Fo(n,e))}function Ko(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function $o(t,e){const n=this.cache;No(n,e)||(t.uniform2uiv(this.addr,e),Fo(n,e))}function ta(t,e){const n=this.cache;No(n,e)||(t.uniform3uiv(this.addr,e),Fo(n,e))}function ea(t,e){const n=this.cache;No(n,e)||(t.uniform4uiv(this.addr,e),Fo(n,e))}function na(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Eo,r)}function ia(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Lo,r)}function ra(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Po,r)}function sa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||To,r)}function oa(t,e){t.uniform1fv(this.addr,e)}function aa(t,e){const n=Ho(e,this.size,2);t.uniform2fv(this.addr,n)}function la(t,e){const n=Ho(e,this.size,3);t.uniform3fv(this.addr,n)}function ca(t,e){const n=Ho(e,this.size,4);t.uniform4fv(this.addr,n)}function ha(t,e){const n=Ho(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ua(t,e){const n=Ho(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function da(t,e){const n=Ho(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function pa(t,e){t.uniform1iv(this.addr,e)}function ga(t,e){t.uniform2iv(this.addr,e)}function fa(t,e){t.uniform3iv(this.addr,e)}function ma(t,e){t.uniform4iv(this.addr,e)}function Aa(t,e){t.uniform1uiv(this.addr,e)}function Ca(t,e){t.uniform2uiv(this.addr,e)}function va(t,e){t.uniform3uiv(this.addr,e)}function ya(t,e){t.uniform4uiv(this.addr,e)}function Ia(t,e,n){const i=e.length,r=Uo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture2D(e[t]||Eo,r[t])}function xa(t,e,n){const i=e.length,r=Uo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture3D(e[t]||Lo,r[t])}function ba(t,e,n){const i=e.length,r=Uo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTextureCube(e[t]||Po,r[t])}function _a(t,e,n){const i=e.length,r=Uo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||To,r[t])}function wa(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Go;case 35664:return ko;case 35665:return Wo;case 35666:return Vo;case 35674:return jo;case 35675:return Yo;case 35676:return Xo;case 5124:case 35670:return Qo;case 35667:case 35671:return Zo;case 35668:case 35672:return qo;case 35669:case 35673:return Jo;case 5125:return Ko;case 36294:return $o;case 36295:return ta;case 36296:return ea;case 35678:case 36198:case 36298:case 36306:case 35682:return na;case 35679:case 36299:case 36307:return ia;case 35680:case 36300:case 36308:case 36293:return ra;case 36289:case 36303:case 36311:case 36292:return sa}}(e.type)}function Ma(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return oa;case 35664:return aa;case 35665:return la;case 35666:return ca;case 35674:return ha;case 35675:return ua;case 35676:return da;case 5124:case 35670:return pa;case 35667:case 35671:return ga;case 35668:case 35672:return fa;case 35669:case 35673:return ma;case 5125:return Aa;case 36294:return Ca;case 36295:return va;case 36296:return ya;case 35678:case 36198:case 36298:case 36306:case 35682:return Ia;case 35679:case 36299:case 36307:return xa;case 35680:case 36300:case 36308:case 36293:return ba;case 36289:case 36303:case 36311:case 36292:return _a}}(e.type)}function Sa(t){this.id=t,this.seq=[],this.map={}}Sa.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}};const Ea=/(\w+)(\])?(\[|\.)?/g;function Ta(t,e){t.seq.push(e),t.map[e.id]=e}function La(t,e,n){const i=t.name,r=i.length;for(Ea.lastIndex=0;;){const s=Ea.exec(i),o=Ea.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===r){Ta(n,void 0===c?new wa(a,t,e):new Ma(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new Sa(a),Ta(n,t)),n=t}}}function Pa(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);La(n,t.getUniformLocation(e,n.name),this)}}function Ra(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}Pa.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Pa.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},Pa.upload=function(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},Pa.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let Da=0;function Oa(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[0]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let t=r;t<s;t++)i.push(t+1+": "+n[t]);return i.join("\n")}(t.getShaderSource(e),i)}return r}function za(t,e){const n=function(t){switch(t){case Je:return["Linear","( value )"];case Ke:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ba(t,e){let n;switch(e){case Ct:n="Linear";break;case vt:n="Reinhard";break;case yt:n="OptimizedCineon";break;case It:n="ACESFilmic";break;case xt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ha(t){return""!==t}function Na(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Fa(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ua=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ga(t){return t.replace(Ua,ka)}function ka(t,e){const n=Qs[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ga(n)}const Wa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Va=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ja(t){return t.replace(Va,Xa).replace(Wa,Ya)}function Ya(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Xa(t,e,n,i)}function Xa(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Qa(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Za(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===L?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===P?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===R&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case _t:case wt:e="ENVMAP_TYPE_CUBE";break;case Et:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),h=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case wt:e="ENVMAP_MODE_REFRACTION"}return e}(n),u=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case gt:e="ENVMAP_BLENDING_MULTIPLY";break;case ft:e="ENVMAP_BLENDING_MIX";break;case mt:e="ENVMAP_BLENDING_ADD"}return e}(n),d=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ha).join("\n")}(n),g=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),f=r.createProgram();let m,A,C=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(m=[g].filter(Ha).join("\n"),m.length>0&&(m+="\n"),A=[p,g].filter(Ha).join("\n"),A.length>0&&(A+="\n")):(m=[Qa(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ha).join("\n"),A=[p,Qa(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==At?"#define TONE_MAPPING":"",n.toneMapping!==At?Qs.tonemapping_pars_fragment:"",n.toneMapping!==At?Ba("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Qs.encodings_pars_fragment,za("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ha).join("\n")),o=Ga(o),o=Na(o,n),o=Fa(o,n),a=Ga(a),a=Na(a,n),a=Fa(a,n),o=ja(o),a=ja(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(C="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,A=["#define varying in",n.glslVersion===Dn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);const v=C+A+a,y=Ra(r,35633,C+m+o),I=Ra(r,35632,v);if(r.attachShader(f,y),r.attachShader(f,I),void 0!==n.index0AttributeName?r.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(f,0,"position"),r.linkProgram(f),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(f).trim(),e=r.getShaderInfoLog(y).trim(),n=r.getShaderInfoLog(I).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(f,35714)){i=!1;const e=Oa(r,y,"vertex"),n=Oa(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(f,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:m},fragmentShader:{log:n,prefix:A}})}let x,b;return r.deleteShader(y),r.deleteShader(I),this.getUniforms=function(){return void 0===x&&(x=new Pa(r,f)),x},this.getAttributes=function(){return void 0===b&&(b=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(r,f)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(f),this.program=void 0},this.name=n.shaderName,this.id=Da++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=y,this.fragmentShader=I,this}let qa=0;class Ja{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Ka(t);e.set(t,n)}return e.get(t)}}class Ka{constructor(t){this.id=qa++,this.code=t,this.usedTimes=0}}function $a(t,e,n,i,r,s,o){const a=new pr,l=new Ja,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,a,c,f,m){const A=f.fog,C=m.geometry,v=s.isMeshStandardMaterial?f.environment:null,y=(s.isMeshStandardMaterial?n:e).get(s.envMap||v),I=y&&y.mapping===Et?y.image.height:null,x=g[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const b=C.morphAttributes.position||C.morphAttributes.normal||C.morphAttributes.color,_=void 0!==b?b.length:0;let w,M,S,E,T=0;if(void 0!==C.morphAttributes.position&&(T=1),void 0!==C.morphAttributes.normal&&(T=2),void 0!==C.morphAttributes.color&&(T=3),x){const t=qs[x];w=t.vertexShader,M=t.fragmentShader}else w=s.vertexShader,M=s.fragmentShader,l.update(s),S=l.getVertexShaderID(s),E=l.getFragmentShaderID(s);const L=t.getRenderTarget(),P=s.alphaTest>0,R=s.clearcoat>0;return{isWebGL2:h,shaderID:x,shaderName:s.type,vertexShader:w,fragmentShader:M,defines:s.defines,customVertexShaderID:S,customFragmentShaderID:E,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:d,outputEncoding:null===L?t.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:Je,map:!!s.map,matcap:!!s.matcap,envMap:!!y,envMapMode:y&&y.mapping,envMapCubeUVHeight:I,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===nn,tangentSpaceNormalMap:s.normalMapType===en,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===Ke,clearcoat:R,clearcoatMap:R&&!!s.clearcoatMap,clearcoatRoughnessMap:R&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===F,alphaMap:!!s.alphaMap,alphaTest:P,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!C.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!C.attributes.color&&4===C.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!A,useFog:!0===s.fog,fogExp2:A&&A.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==C.morphAttributes.position,morphNormals:void 0!==C.morphAttributes.normal,morphColors:void 0!==C.morphAttributes.color,morphTargetsCount:_,morphTextureStride:T,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:At,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===z,flipSided:s.side===O,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){a.disableAll(),e.isWebGL2&&a.enable(0);e.supportsVertexTextures&&a.enable(1);e.instancing&&a.enable(2);e.instancingColor&&a.enable(3);e.map&&a.enable(4);e.matcap&&a.enable(5);e.envMap&&a.enable(6);e.lightMap&&a.enable(7);e.aoMap&&a.enable(8);e.emissiveMap&&a.enable(9);e.bumpMap&&a.enable(10);e.normalMap&&a.enable(11);e.objectSpaceNormalMap&&a.enable(12);e.tangentSpaceNormalMap&&a.enable(13);e.clearcoat&&a.enable(14);e.clearcoatMap&&a.enable(15);e.clearcoatRoughnessMap&&a.enable(16);e.clearcoatNormalMap&&a.enable(17);e.displacementMap&&a.enable(18);e.specularMap&&a.enable(19);e.roughnessMap&&a.enable(20);e.metalnessMap&&a.enable(21);e.gradientMap&&a.enable(22);e.alphaMap&&a.enable(23);e.alphaTest&&a.enable(24);e.vertexColors&&a.enable(25);e.vertexAlphas&&a.enable(26);e.vertexUvs&&a.enable(27);e.vertexTangents&&a.enable(28);e.uvsVertexOnly&&a.enable(29);e.fog&&a.enable(30);t.push(a.mask),a.disableAll(),e.useFog&&a.enable(0);e.flatShading&&a.enable(1);e.logarithmicDepthBuffer&&a.enable(2);e.skinning&&a.enable(3);e.morphTargets&&a.enable(4);e.morphNormals&&a.enable(5);e.morphColors&&a.enable(6);e.premultipliedAlpha&&a.enable(7);e.shadowMapEnabled&&a.enable(8);e.physicallyCorrectLights&&a.enable(9);e.doubleSided&&a.enable(10);e.flipSided&&a.enable(11);e.useDepthPacking&&a.enable(12);e.dithering&&a.enable(13);e.specularIntensityMap&&a.enable(14);e.specularColorMap&&a.enable(15);e.transmission&&a.enable(16);e.transmissionMap&&a.enable(17);e.thicknessMap&&a.enable(18);e.sheen&&a.enable(19);e.sheenColorMap&&a.enable(20);e.sheenRoughnessMap&&a.enable(21);e.decodeVideoTexture&&a.enable(22);e.opaque&&a.enable(23);t.push(a.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=g[t.type];let n;if(e){const t=qs[e];n=Ps.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=c.length;t<e;t++){const e=c[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Za(t,n,e,s),c.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function tl(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function el(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function nl(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function il(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,o,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,o,a,l,c){const h=s(t,e,o,a,l,c);o.transmission>0?i.push(h):!0===o.transparent?r.push(h):n.push(h)},unshift:function(t,e,o,a,l,c){const h=s(t,e,o,a,l,c);o.transmission>0?i.unshift(h):!0===o.transparent?r.unshift(h):n.unshift(h)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||el),i.length>1&&i.sort(e||nl),r.length>1&&r.sort(e||nl)}}}function rl(){let t=new WeakMap;return{get:function(e,n){let i;return!1===t.has(e)?(i=new il,t.set(e,[i])):n>=t.get(e).length?(i=new il,t.get(e).push(i)):i=t.get(e)[n],i},dispose:function(){t=new WeakMap}}}function sl(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new wi,color:new hi};break;case"SpotLight":n={position:new wi,direction:new wi,color:new hi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new wi,color:new hi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new wi,skyColor:new hi,groundColor:new hi};break;case"RectAreaLight":n={color:new hi,position:new wi,halfWidth:new wi,halfHeight:new wi}}return t[e.id]=n,n}}}let ol=0;function al(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ll(t,e){const n=new sl,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new wi);const s=new wi,o=new nr,a=new nr;return{setup:function(s,o){let a=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let h=0,u=0,d=0,p=0,g=0,f=0,m=0,A=0;s.sort(al);const C=!0!==o?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],o=e.color,v=e.intensity,y=e.distance,I=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*v*C,l+=o.g*v*C,c+=o.b*v*C;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*C),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[h]=n,r.directionalShadowMap[h]=I,r.directionalShadowMatrix[h]=e.shadow.matrix,f++}r.directional[h]=t,h++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(v*C),t.distance=y,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[d]=n,r.spotShadowMap[d]=I,r.spotShadowMatrix[d]=e.shadow.matrix,A++}r.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(o).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*C),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=I,r.pointShadowMatrix[u]=e.shadow.matrix,m++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(v*C),t.groundColor.copy(e.groundColor).multiplyScalar(v*C),r.hemi[g]=t,g++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=Zs.LTC_FLOAT_1,r.rectAreaLTC2=Zs.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Zs.LTC_HALF_1,r.rectAreaLTC2=Zs.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=c;const v=r.hash;v.directionalLength===h&&v.pointLength===u&&v.spotLength===d&&v.rectAreaLength===p&&v.hemiLength===g&&v.numDirectionalShadows===f&&v.numPointShadows===m&&v.numSpotShadows===A||(r.directional.length=h,r.spot.length=d,r.rectArea.length=p,r.point.length=u,r.hemi.length=g,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=m,r.spotShadowMatrix.length=A,v.directionalLength=h,v.pointLength=u,v.spotLength=d,v.rectAreaLength=p,v.hemiLength=g,v.numDirectionalShadows=f,v.numPointShadows=m,v.numSpotShadows=A,r.version=ol++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,h=0;const u=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),n++}else if(d.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(d.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(d.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(d.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),i++}else if(d.isHemisphereLight){const t=r.hemi[h];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(u),h++}}},state:r}}function cl(t,e){const n=new ll(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function hl(t,e){let n=new WeakMap;return{get:function(i,r=0){let s;return!1===n.has(i)?(s=new cl(t,e),n.set(i,[s])):r>=n.get(i).length?(s=new cl(t,e),n.get(i).push(s)):s=n.get(i)[r],s},dispose:function(){n=new WeakMap}}}class ul extends Ur{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=$e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}ul.prototype.isMeshDepthMaterial=!0;class dl extends Ur{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new wi,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}dl.prototype.isMeshDistanceMaterial=!0;function pl(t,e,n){let i=new Vs;const r=new Qn,s=new Qn,o=new Ai,a=new ul({depthPacking:tn}),l=new dl,c={},h=n.maxTextureSize,u={0:O,1:D,2:z},d=new Rs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const g=new ls;g.setAttribute("position",new Vr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Ms(g,d),m=this;function A(n,i){const r=e.update(f);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,d,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,p,f,null)}function C(e,n,i,r,s,o){let h=null;const d=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(h=void 0!==d?d:!0===i.isPointLight?l:a,t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const t=h.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=h.clone(),i[e]=r),h=r}return h.visible=n.visible,h.wireframe=n.wireframe,h.side=o===R?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],h.alphaMap=n.alphaMap,h.alphaTest=n.alphaTest,h.clipShadows=n.clipShadows,h.clippingPlanes=n.clippingPlanes,h.clipIntersection=n.clipIntersection,h.displacementMap=n.displacementMap,h.displacementScale=n.displacementScale,h.displacementBias=n.displacementBias,h.wireframeLinewidth=n.wireframeLinewidth,h.linewidth=n.linewidth,!0===i.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(i.matrixWorld),h.nearDistance=r,h.farDistance=s),h}function v(n,r,s,o,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===R)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],h=r[c.materialIndex];if(h&&h.visible){const e=C(n,h,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,c)}}}else if(r.visible){const e=C(n,r,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)v(l[t],r,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.render=function(e,n,a){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(N),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=e.length;l<c;l++){const c=e[l],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const p=u.getFrameExtents();if(r.multiply(p),s.copy(u.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/p.x),r.x=s.x*p.x,u.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/p.y),r.y=s.y*p.y,u.mapSize.y=s.y)),null!==u.map||u.isPointLightShadow||this.type!==R||(u.map=new Ci(r.x,r.y),u.map.texture.name=c.name+".shadowMap",u.mapPass=new Ci(r.x,r.y),u.camera.updateProjectionMatrix()),null===u.map){const t={minFilter:Rt,magFilter:Rt,format:ee};u.map=new Ci(r.x,r.y,t),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const g=u.getViewportCount();for(let t=0;t<g;t++){const e=u.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(o),u.updateMatrices(c,t),i=u.getFrustum(),v(n,a,u.camera,c,this.type)}u.isPointLightShadow||this.type!==R||A(u,a),u.needsUpdate=!1}m.needsUpdate=!1,t.setRenderTarget(l,c,u)}}function gl(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new Ai;let i=null;const r=new Ai(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?vt(2929):yt(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case ot:t.depthFunc(512);break;case at:t.depthFunc(519);break;case lt:t.depthFunc(513);break;case ct:t.depthFunc(515);break;case ht:t.depthFunc(514);break;case ut:t.depthFunc(518);break;case dt:t.depthFunc(516);break;case pt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){let e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(t){e||(t?vt(2960):yt(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null}}};let a={},l={},c=new WeakMap,h=[],u=null,d=!1,p=null,g=null,f=null,m=null,A=null,C=null,v=null,y=!1,I=null,x=null,b=null,_=null,E=null;const T=t.getParameter(35661);let L=!1,P=0;const R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(R)[1]),L=P>=1):-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),L=P>=2);let D=null,B={};const H=t.getParameter(3088),gt=t.getParameter(2978),ft=(new Ai).fromArray(H),mt=(new Ai).fromArray(gt);function At(e,n,i){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return s}const Ct={};function vt(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function yt(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}Ct[3553]=At(3553,3553,1),Ct[34067]=At(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),vt(2929),s.setFunc(ct),_t(!1),wt(M),vt(2884),bt(N);const It={[V]:32774,[j]:32778,[Y]:32779};if(i)It[X]=32775,It[Q]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(It[X]=t.MIN_EXT,It[Q]=t.MAX_EXT)}const xt={[Z]:0,[q]:1,[J]:768,[$]:770,[st]:776,[it]:774,[et]:772,[K]:769,[tt]:771,[rt]:775,[nt]:773};function bt(e,n,i,r,s,o,a,l){if(e!==N){if(!1===d&&(vt(3042),d=!0),e===W)s=s||n,o=o||i,a=a||r,n===g&&s===A||(t.blendEquationSeparate(It[n],It[s]),g=n,A=s),i===f&&r===m&&o===C&&a===v||(t.blendFuncSeparate(xt[i],xt[r],xt[o],xt[a]),f=i,m=r,C=o,v=a),p=e,y=null;else if(e!==p||l!==y){if(g===V&&A===V||(t.blendEquation(32774),g=V,A=V),l)switch(e){case F:t.blendFuncSeparate(1,771,1,771);break;case U:t.blendFunc(1,1);break;case G:t.blendFuncSeparate(0,769,0,1);break;case k:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case F:t.blendFuncSeparate(770,771,1,771);break;case U:t.blendFunc(770,1);break;case G:t.blendFuncSeparate(0,769,0,1);break;case k:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,C=null,v=null,p=e,y=l}}else!0===d&&(yt(3042),d=!1)}function _t(e){I!==e&&(e?t.frontFace(2304):t.frontFace(2305),I=e)}function wt(e){e!==w?(vt(2884),e!==x&&(e===M?t.cullFace(1029):e===S?t.cullFace(1028):t.cullFace(1032))):yt(2884),x=e}function Mt(e,n,i){e?(vt(32823),_===n&&E===i||(t.polygonOffset(n,i),_=n,E=i)):yt(32823)}function St(e){void 0===e&&(e=33984+T-1),D!==e&&(t.activeTexture(e),D=e)}return{buffers:{color:r,depth:s,stencil:o},enable:vt,disable:yt,bindFramebuffer:function(e,n){return l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,i&&(36009===e&&(l[36160]=n),36160===e&&(l[36009]=n)),!0)},drawBuffers:function(i,r){let s=h,o=!1;if(i)if(s=c.get(r),void 0===s&&(s=[],c.set(r,s)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(s.length!==t.length||36064!==s[0]){for(let e=0,n=t.length;e<n;e++)s[e]=36064+e;s.length=t.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0);else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(n.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:bt,setMaterial:function(t,e){t.side===z?yt(2884):vt(2884);let n=t.side===O;e&&(n=!n),_t(n),t.blending===F&&!1===t.transparent?bt(N):bt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;o.setTest(i),i&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Mt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?vt(32926):yt(32926)},setFlipSided:_t,setCullFace:wt,setLineWidth:function(e){e!==b&&(L&&t.lineWidth(e),b=e)},setPolygonOffset:Mt,setScissorTest:function(t){t?vt(3089):yt(3089)},activeTexture:St,bindTexture:function(e,n){null===D&&St();let i=B[D];void 0===i&&(i={type:void 0,texture:void 0},B[D]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||Ct[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=B[D];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===ft.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))},viewport:function(e){!1===mt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),mt.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},D=null,B={},l={},c=new WeakMap,h=[],u=null,d=!1,p=null,g=null,f=null,m=null,A=null,C=null,v=null,y=!1,I=null,x=null,b=null,_=null,E=null,ft.set(0,0,t.canvas.width,t.canvas.height),mt.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}}}function fl(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let f;const m=new WeakMap;let A=!1;try{A="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function C(t,e){return A?new OffscreenCanvas(t,e):$n("canvas")}function v(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Yn:Math.floor,s=i(r*t.width),o=i(r*t.height);void 0===f&&(f=C(s,o));const a=n?C(s,o):f;a.width=s,a.height=o;return a.getContext("2d").drawImage(t,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function y(t){return Vn(t.width)&&Vn(t.height)}function I(t,e){return t.generateMipmaps&&e&&t.minFilter!==Rt&&t.minFilter!==Ht}function x(e){t.generateMipmap(e)}function b(n,i,r,s,o=!1){if(!1===a)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return 6403===i&&(5126===r&&(l=33326),5131===r&&(l=33325),5121===r&&(l=33321)),33319===i&&(5126===r&&(l=33328),5131===r&&(l=33327),5121===r&&(l=33323)),6408===i&&(5126===r&&(l=34836),5131===r&&(l=34842),5121===r&&(l=s===Ke&&!1===o?35907:32856),32819===r&&(l=32854),32820===r&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function _(t,e,n){return!0===I(t,n)||t.isFramebufferTexture&&t.minFilter!==Rt&&t.minFilter!==Ht?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function w(t){return t===Rt||t===Dt||t===zt?9728:9729}function M(t){const e=t.target;e.removeEventListener("dispose",M),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=m.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&E(t),0===Object.keys(r).length&&m.delete(n)}i.remove(t)}(e),e.isVideoTexture&&g.delete(e)}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=e.texture,r=i.get(e),s=i.get(n);void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),o.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}function E(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete m.get(r)[n.__cacheKey],o.memory.textures--}let T=0;function L(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;g.get(t)!==e&&(g.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void z(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}const P={[Tt]:10497,[Lt]:33071,[Pt]:33648},R={[Rt]:9728,[Dt]:9984,[zt]:9986,[Ht]:9729,[Nt]:9985,[Ut]:9987};function D(n,s,o){if(o?(t.texParameteri(n,10242,P[s.wrapS]),t.texParameteri(n,10243,P[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,P[s.wrapR]),t.texParameteri(n,10240,R[s.magFilter]),t.texParameteri(n,10241,R[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS===Lt&&s.wrapT===Lt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(s.magFilter)),t.texParameteri(n,10241,w(s.minFilter)),s.minFilter!==Rt&&s.minFilter!==Ht&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===Qt&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Zt&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function O(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M));const r=n.source;let s=m.get(r);void 0===s&&(s={},m.set(r,s));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(a!==e.__cacheKey){void 0===s[a]&&(s[a]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,i=!0),s[a].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&E(n)),e.__cacheKey=a,e.__webglTexture=s[a].texture}return i}function z(e,i,r){let o=3553;i.isDataArrayTexture&&(o=35866),i.isData3DTexture&&(o=32879);const l=O(e,i),c=i.source;if(n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),c.version!==c.__currentVersion||!0===l){t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const r=function(t){return!a&&(t.wrapS!==Lt||t.wrapT!==Lt||t.minFilter!==Rt&&t.minFilter!==Ht)}(i)&&!1===y(i.image);let u=v(i.image,r,!1,h);u=G(i,u);const d=y(u)||a,p=s.convert(i.format,i.encoding);let g,f=s.convert(i.type),m=b(i.internalFormat,p,f,i.encoding,i.isVideoTexture);D(o,i,d);const A=i.mipmaps,C=a&&!0!==i.isVideoTexture,w=void 0===e.__version||!0===l,M=_(i,u,d);if(i.isDepthTexture)m=6402,a?m=i.type===Qt?36012:i.type===Xt?33190:i.type===Kt?35056:33189:i.type===Qt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===re&&6402===m&&i.type!==jt&&i.type!==Xt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=jt,f=s.convert(i.type)),i.format===se&&6402===m&&(m=34041,i.type!==Kt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Kt,f=s.convert(i.type))),w&&(C?n.texStorage2D(3553,1,m,u.width,u.height):n.texImage2D(3553,0,m,u.width,u.height,0,p,f,null));else if(i.isDataTexture)if(A.length>0&&d){C&&w&&n.texStorage2D(3553,M,m,A[0].width,A[0].height);for(let t=0,e=A.length;t<e;t++)g=A[t],C?n.texSubImage2D(3553,t,0,0,g.width,g.height,p,f,g.data):n.texImage2D(3553,t,m,g.width,g.height,0,p,f,g.data);i.generateMipmaps=!1}else C?(w&&n.texStorage2D(3553,M,m,u.width,u.height),n.texSubImage2D(3553,0,0,0,u.width,u.height,p,f,u.data)):n.texImage2D(3553,0,m,u.width,u.height,0,p,f,u.data);else if(i.isCompressedTexture){C&&w&&n.texStorage2D(3553,M,m,A[0].width,A[0].height);for(let t=0,e=A.length;t<e;t++)g=A[t],i.format!==ee?null!==p?C?n.compressedTexSubImage2D(3553,t,0,0,g.width,g.height,p,g.data):n.compressedTexImage2D(3553,t,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(3553,t,0,0,g.width,g.height,p,f,g.data):n.texImage2D(3553,t,m,g.width,g.height,0,p,f,g.data)}else if(i.isDataArrayTexture)C?(w&&n.texStorage3D(35866,M,m,u.width,u.height,u.depth),n.texSubImage3D(35866,0,0,0,0,u.width,u.height,u.depth,p,f,u.data)):n.texImage3D(35866,0,m,u.width,u.height,u.depth,0,p,f,u.data);else if(i.isData3DTexture)C?(w&&n.texStorage3D(32879,M,m,u.width,u.height,u.depth),n.texSubImage3D(32879,0,0,0,0,u.width,u.height,u.depth,p,f,u.data)):n.texImage3D(32879,0,m,u.width,u.height,u.depth,0,p,f,u.data);else if(i.isFramebufferTexture){if(w)if(C)n.texStorage2D(3553,M,m,u.width,u.height);else{let t=u.width,e=u.height;for(let i=0;i<M;i++)n.texImage2D(3553,i,m,t,e,0,p,f,null),t>>=1,e>>=1}}else if(A.length>0&&d){C&&w&&n.texStorage2D(3553,M,m,A[0].width,A[0].height);for(let t=0,e=A.length;t<e;t++)g=A[t],C?n.texSubImage2D(3553,t,0,0,p,f,g):n.texImage2D(3553,t,m,p,f,g);i.generateMipmaps=!1}else C?(w&&n.texStorage2D(3553,M,m,u.width,u.height),n.texSubImage2D(3553,0,0,0,p,f,u)):n.texImage2D(3553,0,m,p,f,u);I(i,d)&&x(o),c.__currentVersion=c.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function B(e,r,o,a,l){const c=s.convert(o.format,o.encoding),h=s.convert(o.type),u=b(o.internalFormat,c,h,o.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,u,r.width,r.height,r.depth,0,c,h,null):n.texImage2D(l,0,u,r.width,r.height,0,c,h,null)),n.bindFramebuffer(36160,e),U(r)?d.framebufferTexture2DMultisampleEXT(36160,a,l,i.get(o).__webglTexture,0,F(r)):t.framebufferTexture2D(36160,a,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function H(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||U(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Qt?r=36012:e.type===Xt&&(r=33190));const i=F(n);U(n)?d.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=F(n);i&&!1===U(n)?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=s.convert(e.format,e.encoding),o=s.convert(e.type),a=b(e.internalFormat,r,o,e.encoding),l=F(n);i&&!1===U(n)?t.renderbufferStorageMultisample(36161,l,a,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(36161,l,a,n.width,n.height):t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),L(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=F(r);if(r.depthTexture.format===re)U(r)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==se)throw new Error("Unknown depthTexture format");U(r)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),H(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),H(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function F(t){return Math.min(u,t.samples)}function U(t){const n=i.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function G(t,n){const i=t.encoding,r=t.format,s=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===On||i!==Je&&(i===Ke?!1===a?!0===e.has("EXT_sRGB")&&r===ee?(t.format=On,t.minFilter=Ht,t.generateMipmaps=!1):n=di.sRGBToLinear(n):r===ee&&s===kt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){const t=T;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=L,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?z(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?z(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=function(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;const o=O(e,i),l=i.source;if(n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===o){t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const r=i.isCompressedTexture||i.image[0].isCompressedTexture,o=i.image[0]&&i.image[0].isDataTexture,h=[];for(let t=0;t<6;t++)h[t]=r||o?o?i.image[t].image:i.image[t]:v(i.image[t],!1,!0,c),h[t]=G(i,h[t]);const u=h[0],d=y(u)||a,p=s.convert(i.format,i.encoding),g=s.convert(i.type),f=b(i.internalFormat,p,g,i.encoding),m=a&&!0!==i.isVideoTexture,A=void 0===e.__version;let C,w=_(i,u,d);if(D(34067,i,d),r){m&&A&&n.texStorage2D(34067,w,f,u.width,u.height);for(let t=0;t<6;t++){C=h[t].mipmaps;for(let e=0;e<C.length;e++){const r=C[e];i.format!==ee?null!==p?m?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,p,r.data):n.compressedTexImage2D(34069+t,e,f,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):m?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,p,g,r.data):n.texImage2D(34069+t,e,f,r.width,r.height,0,p,g,r.data)}}}else{C=i.mipmaps,m&&A&&(C.length>0&&w++,n.texStorage2D(34067,w,f,h[0].width,h[0].height));for(let t=0;t<6;t++)if(o){m?n.texSubImage2D(34069+t,0,0,0,h[t].width,h[t].height,p,g,h[t].data):n.texImage2D(34069+t,0,f,h[t].width,h[t].height,0,p,g,h[t].data);for(let e=0;e<C.length;e++){const i=C[e].image[t].image;m?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,p,g,i.data):n.texImage2D(34069+t,e+1,f,i.width,i.height,0,p,g,i.data)}}else{m?n.texSubImage2D(34069+t,0,0,0,p,g,h[t]):n.texImage2D(34069+t,0,f,p,g,h[t]);for(let e=0;e<C.length;e++){const i=C[e];m?n.texSubImage2D(34069+t,e+1,0,0,p,g,i.image[t]):n.texImage2D(34069+t,e+1,f,p,g,i.image[t])}}}I(i,d)&&x(34067),l.__currentVersion=l.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}(o,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&B(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&N(t)},this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),h=i.get(l);e.addEventListener("dispose",S),!0!==e.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=t.createTexture()),h.__version=l.version,o.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=y(e)||a;if(u){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else if(c.__webglFramebuffer=t.createFramebuffer(),d)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&e.samples>0&&!1===U(e)){c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const i=s.convert(l.format,l.encoding),r=s.convert(l.type),o=b(l.internalFormat,i,r,l.encoding),a=F(e);t.renderbufferStorageMultisample(36161,a,o,e.width,e.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),H(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}if(u){n.bindTexture(34067,h.__webglTexture),D(34067,l,p);for(let t=0;t<6;t++)B(c.__webglFramebuffer[t],e,l,36064,34069+t);I(l,p)&&x(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=i.get(s);n.bindTexture(3553,o.__webglTexture),D(3553,s,p),B(c.__webglFramebuffer,e,s,36064+r,3553),I(s,p)&&x(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,h.__webglTexture),D(t,l,p),B(c.__webglFramebuffer,e,l,36064,t),I(l,p)&&x(t),n.unbindTexture()}e.depthBuffer&&N(e)},this.updateRenderTargetMipmap=function(t){const e=y(t)||a,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=r.length;s<o;s++){const o=r[s];if(I(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(o).__webglTexture;n.bindTexture(e,r),x(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(a&&e.samples>0&&!1===U(e)){const r=e.width,s=e.height;let o=16384;const a=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(l);const c=i.get(e),h=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;!1===h&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),!0===h&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728),p&&t.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=B,this.useMultisampledRTT=U}function ml(t,e,n){const i=n.isWebGL2;return{convert:function(n,r=null){let s;if(n===kt)return 5121;if(n===qt)return 32819;if(n===Jt)return 32820;if(n===Wt)return 5120;if(n===Vt)return 5122;if(n===jt)return 5123;if(n===Yt)return 5124;if(n===Xt)return 5125;if(n===Qt)return 5126;if(n===Zt)return i?5131:(s=e.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(n===$t)return 6406;if(n===ee)return 6408;if(n===ne)return 6409;if(n===ie)return 6410;if(n===re)return 6402;if(n===se)return 34041;if(n===oe)return 6403;if(n===te)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===On)return s=e.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===ae)return 36244;if(n===le)return 33319;if(n===ce)return 33320;if(n===he)return 36249;if(n===ue||n===de||n===pe||n===ge)if(r===Ke){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===ue)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===de)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===pe)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ge)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===ue)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===de)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===pe)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ge)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===fe||n===me||n===Ae||n===Ce){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===fe)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===me)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ae)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ce)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ve)return s=e.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===ye||n===Ie){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===ye)return r===Ke?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Ie)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===xe||n===be||n===_e||n===we||n===Me||n===Se||n===Ee||n===Te||n===Le||n===Pe||n===Re||n===De||n===Oe||n===ze){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===xe)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===be)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===_e)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===we)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Me)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Se)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ee)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Te)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Le)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Pe)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Re)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===De)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Oe)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ze)return r===Ke?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Be){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Be)return r===Ke?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Kt?i?34042:(s=e.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Al extends Os{constructor(t=[]){super(),this.cameras=t}}Al.prototype.isArrayCamera=!0;class Cl extends Sr{constructor(){super(),this.type="Group"}}Cl.prototype.isGroup=!0;const vl={type:"move"};class yl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Cl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Cl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new wi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new wi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Cl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new wi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new wi),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(vl))),l&&t.hand){s=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const t=new Cl;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[i.jointName]=t,l.add(t)}const r=l.joints[i.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class Il extends mi{constructor(t,e,n,i,r,s,o,a,l,c){if((c=void 0!==c?c:re)!==re&&c!==se)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===re&&(n=jt),void 0===n&&c===se&&(n=Kt),super(null,i,r,s,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:Rt,this.minFilter=void 0!==a?a:Rt,this.flipY=!1,this.generateMipmaps=!1}}Il.prototype.isDepthTexture=!0;class xl extends zn{constructor(t,e){super();const n=this;let i=null,r=1,s=null,o="local-floor",a=null,l=null,c=null,h=null,u=null,d=null;const p=e.getContextAttributes();let g=null,f=null;const m=[],A=new Map,C=new Os;C.layers.enable(1),C.viewport=new Ai;const v=new Os;v.layers.enable(2),v.viewport=new Ai;const y=[C,v],I=new Al;I.layers.enable(1),I.layers.enable(2);let x=null,b=null;function _(t){const e=A.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function w(){A.forEach((function(t,e){t.disconnect(e)})),A.clear(),x=null,b=null,t.setRenderTarget(g),u=null,h=null,c=null,i=null,f=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(t){const e=i.inputSources;for(let t=0;t<e.length;t++){const n="right"===e[t].handedness?1:0;A.set(e[t],m[n])}for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=A.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),A.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],i=A.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=m[t];return void 0===e&&(e=new yl,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=m[t];return void 0===e&&(e=new yl,m[t]=e),e.getGripSpace()},this.getHand=function(t){let e=m[t];return void 0===e&&(e=new yl,m[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(t){a=t},this.getBaseLayer=function(){return null!==h?h:u},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(a){if(i=a,null!==i){if(g=t.getRenderTarget(),i.addEventListener("select",_),i.addEventListener("selectstart",_),i.addEventListener("selectend",_),i.addEventListener("squeeze",_),i.addEventListener("squeezestart",_),i.addEventListener("squeezeend",_),i.addEventListener("end",w),i.addEventListener("inputsourceschange",M),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:u}),f=new Ci(u.framebufferWidth,u.framebufferHeight,{format:ee,type:kt,encoding:t.outputEncoding})}else{let n=null,s=null,o=null;p.depth&&(o=p.stencil?35056:33190,n=p.stencil?se:re,s=p.stencil?Kt:jt);const a={colorFormat:t.outputEncoding===Ke?35907:32856,depthFormat:o,scaleFactor:r};c=new XRWebGLBinding(i,e),h=c.createProjectionLayer(a),i.updateRenderState({layers:[h]}),f=new Ci(h.textureWidth,h.textureHeight,{format:ee,type:kt,depthTexture:new Il(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});t.properties.get(f).__ignoreDepthValues=h.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),s=await i.requestReferenceSpace(o),P.setContext(i),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const S=new wi,E=new wi;function T(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;I.near=v.near=C.near=t.near,I.far=v.far=C.far=t.far,x===I.near&&b===I.far||(i.updateRenderState({depthNear:I.near,depthFar:I.far}),x=I.near,b=I.far);const e=t.parent,n=I.cameras;T(I,e);for(let t=0;t<n.length;t++)T(n[t],e);I.matrixWorld.decompose(I.position,I.quaternion,I.scale),t.position.copy(I.position),t.quaternion.copy(I.quaternion),t.scale.copy(I.scale),t.matrix.copy(I.matrix),t.matrixWorld.copy(I.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){S.setFromMatrixPosition(e.matrixWorld),E.setFromMatrixPosition(n.matrixWorld);const i=S.distanceTo(E),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=o*h,p=o*u,g=i/(-h+u),f=g*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(g),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const m=o+g,A=a+g,C=d-f,v=p+(i-f),y=l*a/A*m,I=c*a/A*m;t.projectionMatrix.makePerspective(C,v,y,I,m,A)}(I,C,v):I.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return I},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==h&&(h.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let L=null;const P=new js;P.setAnimationLoop((function(e,n){if(l=n.getViewerPose(a||s),d=n,null!==l){const e=l.views;null!==u&&(t.setRenderTargetFramebuffer(f,u.framebuffer),t.setRenderTarget(f));let n=!1;e.length!==I.cameras.length&&(I.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==u)s=u.getViewport(r);else{const e=c.getViewSubImage(h,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(f,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(f))}const o=y[i];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===i&&I.matrix.copy(o.matrix),!0===n&&I.cameras.push(o)}}const r=i.inputSources;for(let t=0;t<m.length;t++){const e=r[t],i=A.get(e);void 0!==i&&i.update(e,n,a||s)}L&&L(e,n),d=null})),this.setAnimationLoop=function(t){L=t},this.dispose=function(){}}}function bl(t,e){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===O&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===O&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);const r=e.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*e}let s,o;i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.roughnessMap?s=i.roughnessMap:i.metalnessMap?s=i.metalnessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap?s=i.emissiveMap:i.clearcoatMap?s=i.clearcoatMap:i.clearcoatNormalMap?s=i.clearcoatNormalMap:i.clearcoatRoughnessMap?s=i.clearcoatRoughnessMap:i.specularIntensityMap?s=i.specularIntensityMap:i.specularColorMap?s=i.specularColorMap:i.transmissionMap?s=i.transmissionMap:i.thicknessMap?s=i.thicknessMap:i.sheenColorMap?s=i.sheenColorMap:i.sheenRoughnessMap&&(s=i.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),i.aoMap?o=i.aoMap:i.lightMap&&(o=i.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,s,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(t,i):i.isMeshToonMaterial?(n(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(n(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(n(t,i),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===O&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,o)):i.isMeshMatcapMaterial?(n(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?n(t,i):i.isMeshDistanceMaterial?(n(t,i),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?n(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,s):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function _l(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=$n("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0===t.depth||t.depth,r=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,a=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let u=null,d=null;const p=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Je,this.physicallyCorrectLights=!1,this.toneMapping=At,this.toneMappingExposure=1;const f=this;let m=!1,A=0,C=0,v=null,y=-1,I=null;const b=new Ai,_=new Ai;let w=null,M=e.width,S=e.height,E=1,T=null,L=null;const P=new Ai(0,0,M,S),R=new Ai(0,0,M,S);let B=!1;const H=new Vs;let N=!1,F=!1,U=null;const G=new nr,k=new Qn,W=new wi,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===v?E:1}let Y,X,Q,Z,q,J,K,$,tt,et,nt,it,rt,st,ot,at,lt,ct,ht,ut,dt,pt,gt,ft=n;function mt(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r"+x),e.addEventListener("webglcontextlost",yt,!1),e.addEventListener("webglcontextrestored",It,!1),null===ft){const e=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&e.shift(),ft=mt(e,t),null===ft)throw mt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Ct(){Y=new vo(ft),X=new to(ft,Y,t),Y.init(X),pt=new ml(ft,Y,X),Q=new gl(ft,Y,X),Z=new xo(ft),q=new tl,J=new fl(ft,Y,Q,q,X,pt,Z),K=new no(f),$=new Co(f),tt=new Ys(ft,X),gt=new Ks(ft,Y,tt,X),et=new yo(ft,tt,Z,gt),nt=new So(ft,et,tt,Z),ht=new Mo(ft,X,J),at=new eo(q),it=new $a(f,K,$,Y,X,gt,at),rt=new bl(f,q),st=new rl,ot=new hl(Y,X),ct=new Js(f,K,Q,nt,h,o),lt=new pl(f,nt,X),ut=new $s(ft,Y,Z,X),dt=new Io(ft,Y,Z,X),Z.programs=it.programs,f.capabilities=X,f.extensions=Y,f.properties=q,f.renderLists=st,f.shadowMap=lt,f.state=Q,f.info=Z}Ct();const vt=new xl(f,ft);function yt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function It(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const t=Z.autoReset,e=lt.enabled,n=lt.autoUpdate,i=lt.needsUpdate,r=lt.type;Ct(),Z.autoReset=t,lt.enabled=e,lt.autoUpdate=n,lt.needsUpdate=i,lt.type=r}function xt(t){const e=t.target;e.removeEventListener("dispose",xt),function(t){(function(t){const e=q.get(t).programs;void 0!==e&&(e.forEach((function(t){it.releaseProgram(t)})),t.isShaderMaterial&&it.releaseShaderCache(t))})(t),q.remove(t)}(e)}this.xr=vt,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){const t=Y.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Y.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(t){void 0!==t&&(E=t,this.setSize(M,S,!1))},this.getSize=function(t){return t.set(M,S)},this.setSize=function(t,n,i){vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=t,S=n,e.width=Math.floor(t*E),e.height=Math.floor(n*E),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(M*E,S*E).floor()},this.setDrawingBufferSize=function(t,n,i){M=t,S=n,E=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(b)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,n,i){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,i),Q.viewport(b.copy(P).multiplyScalar(E).floor())},this.getScissor=function(t){return t.copy(R)},this.setScissor=function(t,e,n,i){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,i),Q.scissor(_.copy(R).multiplyScalar(E).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){Q.setScissorTest(B=t)},this.setOpaqueSort=function(t){T=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(t){return t.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;t&&(i|=16384),e&&(i|=256),n&&(i|=1024),ft.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",yt,!1),e.removeEventListener("webglcontextrestored",It,!1),st.dispose(),ot.dispose(),q.dispose(),K.dispose(),$.dispose(),nt.dispose(),gt.dispose(),it.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",_t),vt.removeEventListener("sessionend",wt),U&&(U.dispose(),U=null),Mt.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=V);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,n,i,r){!0!==e.isScene&&(e=V);J.resetTextureUnits();const s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===v?f.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:Je,l=(i.isMeshStandardMaterial?$:K).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,g=!!n.morphAttributes.color,m=i.toneMapped?f.toneMapping:At,A=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,C=void 0!==A?A.length:0,x=q.get(i),b=d.state.lights;if(!0===N&&(!0===F||t!==I)){const e=t===I&&i.id===y;at.setState(i,t,e)}let _=!1;i.version===x.__version?x.needsLights&&x.lightsStateVersion!==b.state.version||x.outputEncoding!==a||r.isInstancedMesh&&!1===x.instancing?_=!0:r.isInstancedMesh||!0!==x.instancing?r.isSkinnedMesh&&!1===x.skinning?_=!0:r.isSkinnedMesh||!0!==x.skinning?x.envMap!==l||!0===i.fog&&x.fog!==s?_=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===at.numPlanes&&x.numIntersection===at.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==h||x.morphTargets!==u||x.morphNormals!==p||x.morphColors!==g||x.toneMapping!==m||!0===X.isWebGL2&&x.morphTargetsCount!==C)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,x.__version=i.version);let w=x.currentProgram;!0===_&&(w=Lt(i,e,r));let M=!1,T=!1,L=!1;const P=w.getUniforms(),R=x.uniforms;Q.useProgram(w.program)&&(M=!0,T=!0,L=!0);i.id!==y&&(y=i.id,T=!0);if(M||I!==t){if(P.setValue(ft,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&P.setValue(ft,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),I!==t&&(I=t,T=!0,L=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=P.map.cameraPosition;void 0!==e&&e.setValue(ft,W.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&P.setValue(ft,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&P.setValue(ft,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){P.setOptional(ft,r,"bindMatrix"),P.setOptional(ft,r,"bindMatrixInverse");const t=r.skeleton;t&&(X.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(ft,"boneTexture",t.boneTexture,J),P.setValue(ft,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const D=n.morphAttributes;(void 0!==D.position||void 0!==D.normal||void 0!==D.color&&!0===X.isWebGL2)&&ht.update(r,n,i,w);(T||x.receiveShadow!==r.receiveShadow)&&(x.receiveShadow=r.receiveShadow,P.setValue(ft,"receiveShadow",r.receiveShadow));T&&(P.setValue(ft,"toneMappingExposure",f.toneMappingExposure),x.needsLights&&(z=L,(O=R).ambientLightColor.needsUpdate=z,O.lightProbe.needsUpdate=z,O.directionalLights.needsUpdate=z,O.directionalLightShadows.needsUpdate=z,O.pointLights.needsUpdate=z,O.pointLightShadows.needsUpdate=z,O.spotLights.needsUpdate=z,O.spotLightShadows.needsUpdate=z,O.rectAreaLights.needsUpdate=z,O.hemisphereLights.needsUpdate=z),s&&!0===i.fog&&rt.refreshFogUniforms(R,s),rt.refreshMaterialUniforms(R,i,E,S,U),Pa.upload(ft,x.uniformsList,R,J));var O,z;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Pa.upload(ft,x.uniformsList,R,J),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&P.setValue(ft,"center",r.center);return P.setValue(ft,"modelViewMatrix",r.modelViewMatrix),P.setValue(ft,"normalMatrix",r.normalMatrix),P.setValue(ft,"modelMatrix",r.matrixWorld),w}(t,e,n,i,r);Q.setMaterial(i,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,u=1;!0===i.wireframe&&(l=et.getWireframeAttribute(n),u=2),gt.setup(r,i,a,n,l);let p=ut;null!==l&&(h=tt.get(l),p=dt,p.setIndex(h));const g=null!==l?l.count:c.count,m=n.drawRange.start*u,A=n.drawRange.count*u,C=null!==s?s.start*u:0,x=null!==s?s.count*u:1/0,b=Math.max(m,C),_=Math.min(g,m+A,C+x)-1,w=Math.max(0,_-b+1);if(0!==w){if(r.isMesh)!0===i.wireframe?(Q.setLineWidth(i.wireframeLinewidth*j()),p.setMode(1)):p.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),Q.setLineWidth(t*j()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);if(r.isInstancedMesh)p.renderInstances(b,w,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(b,w,t)}else p.render(b,w)}},this.compile=function(t,e){d=ot.get(t),d.init(),g.push(d),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(f.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){Lt(n[i],t,e)}else Lt(n,t,e)})),g.pop(),d=null};let bt=null;function _t(){Mt.stop()}function wt(){Mt.start()}const Mt=new js;function St(t,e,n,i){const r=t.opaque,o=t.transmissive,a=t.transparent;d.setupLightsView(n),o.length>0&&function(t,e,n){const i=X.isWebGL2;null===U&&(U=new Ci(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?Zt:kt,minFilter:Ut,samples:i&&!0===s?4:0}));f.getDrawingBufferSize(k),i?U.setSize(k.x,k.y):U.setSize(Yn(k.x),Yn(k.y));const r=f.getRenderTarget();f.setRenderTarget(U),f.clear();const o=f.toneMapping;f.toneMapping=At,Et(t,e,n),f.toneMapping=o,J.updateMultisampleRenderTarget(U),J.updateRenderTargetMipmap(U),f.setRenderTarget(r)}(r,e,n),i&&Q.viewport(b.copy(i)),r.length>0&&Et(r,e,n),o.length>0&&Et(o,e,n),a.length>0&&Et(a,e,n),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Et(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,l=null===i?s.material:i,c=s.group;o.layers.test(n.layers)&&Tt(o,e,n,a,l,c)}}function Tt(t,e,n,i,r,s){t.onBeforeRender(f,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(f,e,n,i,t,s),!0===r.transparent&&r.side===z?(r.side=O,r.needsUpdate=!0,f.renderBufferDirect(n,e,i,r,t,s),r.side=D,r.needsUpdate=!0,f.renderBufferDirect(n,e,i,r,t,s),r.side=z):f.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(f,e,n,i,r,s)}function Lt(t,e,n){!0!==e.isScene&&(e=V);const i=q.get(t),r=d.state.lights,s=d.state.shadowsArray,o=r.state.version,a=it.getParameters(t,r.state,s,e,n),l=it.getProgramCacheKey(a);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?$:K).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",xt),c=new Map,i.programs=c);let h=c.get(l);if(void 0!==h){if(i.currentProgram===h&&i.lightsStateVersion===o)return Pt(t,a),h}else a.uniforms=it.getUniforms(t),t.onBuild(n,a,f),t.onBeforeCompile(a,f),h=it.acquireProgram(a,l),c.set(l,h),i.uniforms=a.uniforms;const u=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=at.uniform),Pt(t,a),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=h.getUniforms(),g=Pa.seqWithValue(p.seq,u);return i.currentProgram=h,i.uniformsList=g,h}function Pt(t,e){const n=q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Mt.setAnimationLoop((function(t){bt&&bt(t)})),"undefined"!=typeof self&&Mt.setContext(self),this.setAnimationLoop=function(t){bt=t,vt.setAnimationLoop(t),null===t?Mt.stop():Mt.start()},vt.addEventListener("sessionstart",_t),vt.addEventListener("sessionend",wt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===m)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(e),e=vt.getCamera()),!0===t.isScene&&t.onBeforeRender(f,t,e,v),d=ot.get(t,g.length),d.init(),g.push(d),G.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),H.setFromProjectionMatrix(G),F=this.localClippingEnabled,N=at.init(this.clippingPlanes,F,e),u=st.get(t,p.length),u.init(),p.push(u),function t(e,n,i,r){if(!1===e.visible)return;if(e.layers.test(n.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||H.intersectsSprite(e)){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=nt.update(e),n=e.material;n.visible&&u.push(e,t,n,i,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||H.intersectsObject(e))){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=nt.update(e),n=e.material;if(Array.isArray(n)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=n[o.materialIndex];a&&a.visible&&u.push(e,t,a,i,W.z,o)}}else n.visible&&u.push(e,t,n,i,W.z,null)}const s=e.children;for(let e=0,o=s.length;e<o;e++)t(s[e],n,i,r)}(t,e,0,f.sortObjects),u.finish(),!0===f.sortObjects&&u.sort(T,L),!0===N&&at.beginShadows();const n=d.state.shadowsArray;if(lt.render(n,t,e),!0===N&&at.endShadows(),!0===this.info.autoReset&&this.info.reset(),ct.render(u,t),d.setupLights(f.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];St(u,t,i,i.viewport)}}else St(u,t,e);null!==v&&(J.updateMultisampleRenderTarget(v),J.updateRenderTargetMipmap(v)),!0===t.isScene&&t.onAfterRender(f,t,e),gt.resetDefaultState(),y=-1,I=null,g.pop(),d=g.length>0?g[g.length-1]:null,p.pop(),u=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(t,e,n){q.get(t.texture).__webglTexture=e,q.get(t.depthTexture).__webglTexture=n;const i=q.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){v=t,A=e,C=n;let i=!0;if(t){const e=q.get(t);void 0!==e.__useDefaultFramebuffer?(Q.bindFramebuffer(36160,null),i=!1):void 0===e.__webglFramebuffer?J.setupRenderTarget(t):e.__hasExternalTextures&&J.rebindTextures(t,q.get(t.texture).__webglTexture,q.get(t.depthTexture).__webglTexture)}let r=null,s=!1,o=!1;if(t){const n=t.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(o=!0);const i=q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],s=!0):r=X.isWebGL2&&t.samples>0&&!1===J.useMultisampledRTT(t)?q.get(t).__webglMultisampledFramebuffer:i,b.copy(t.viewport),_.copy(t.scissor),w=t.scissorTest}else b.copy(P).multiplyScalar(E).floor(),_.copy(R).multiplyScalar(E).floor(),w=B;if(Q.bindFramebuffer(36160,r)&&X.drawBuffers&&i&&Q.drawBuffers(t,r),Q.viewport(b),Q.scissor(_),Q.setScissorTest(w),s){const i=q.get(t.texture);ft.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(o){const i=q.get(t.texture),r=e||0;ft.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}y=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){Q.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==ee&&pt.convert(a)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Zt&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(l===kt||pt.convert(l)===ft.getParameter(35738)||l===Qt&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ft.readPixels(e,n,i,r,pt.convert(a),pt.convert(l),s)}finally{const t=null!==v?q.get(v).__webglFramebuffer:null;Q.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);J.setTexture2D(e,0),ft.copyTexSubImage2D(3553,n,0,0,t.x,t.y,r,s),Q.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,s=e.image.height,o=pt.convert(n.format),a=pt.convert(n.type);J.setTexture2D(n,0),ft.pixelStorei(37440,n.flipY),ft.pixelStorei(37441,n.premultiplyAlpha),ft.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ft.texSubImage2D(3553,i,t.x,t.y,r,s,o,a,e.image.data):e.isCompressedTexture?ft.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ft.texSubImage2D(3553,i,t.x,t.y,o,a,e.image),0===i&&n.generateMipmaps&&ft.generateMipmap(3553),Q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(f.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=pt.convert(i.format),c=pt.convert(i.type);let h;if(i.isData3DTexture)J.setTexture3D(i,0),h=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(i,0),h=35866}ft.pixelStorei(37440,i.flipY),ft.pixelStorei(37441,i.premultiplyAlpha),ft.pixelStorei(3317,i.unpackAlignment);const u=ft.getParameter(3314),d=ft.getParameter(32878),p=ft.getParameter(3316),g=ft.getParameter(3315),m=ft.getParameter(32877),A=n.isCompressedTexture?n.mipmaps[0]:n.image;ft.pixelStorei(3314,A.width),ft.pixelStorei(32878,A.height),ft.pixelStorei(3316,t.min.x),ft.pixelStorei(3315,t.min.y),ft.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?ft.texSubImage3D(h,r,e.x,e.y,e.z,s,o,a,l,c,A.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(h,r,e.x,e.y,e.z,s,o,a,l,A.data)):ft.texSubImage3D(h,r,e.x,e.y,e.z,s,o,a,l,c,A),ft.pixelStorei(3314,u),ft.pixelStorei(32878,d),ft.pixelStorei(3316,p),ft.pixelStorei(3315,g),ft.pixelStorei(32877,m),0===r&&i.generateMipmaps&&ft.generateMipmap(h),Q.unbindTexture()},this.initTexture=function(t){J.setTexture2D(t,0),Q.unbindTexture()},this.resetState=function(){A=0,C=0,v=null,Q.reset(),gt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}_l.prototype.isWebGLRenderer=!0;class wl extends _l{}wl.prototype.isWebGL1Renderer=!0;class Ml{constructor(t,e=25e-5){this.name="",this.color=new hi(t),this.density=e}clone(){return new Ml(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Ml.prototype.isFogExp2=!0;class Sl{constructor(t,e=1,n=1e3){this.name="",this.color=new hi(t),this.near=e,this.far=n}clone(){return new Sl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Sl.prototype.isFog=!0;class El extends Sr{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}El.prototype.isScene=!0;class Tl{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=bn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Un()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Tl.prototype.isInterleavedBuffer=!0;const Ll=new wi;class Pl{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ll.fromBufferAttribute(this,e),Ll.applyMatrix4(t),this.setXYZ(e,Ll.x,Ll.y,Ll.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ll.fromBufferAttribute(this,e),Ll.applyNormalMatrix(t),this.setXYZ(e,Ll.x,Ll.y,Ll.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ll.fromBufferAttribute(this,e),Ll.transformDirection(t),this.setXYZ(e,Ll.x,Ll.y,Ll.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Vr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Pl(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Pl.prototype.isInterleavedBufferAttribute=!0;class Rl extends Ur{constructor(t){super(),this.type="SpriteMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Dl;Rl.prototype.isSpriteMaterial=!0;const Ol=new wi,zl=new wi,Bl=new wi,Hl=new Qn,Nl=new Qn,Fl=new nr,Ul=new wi,Gl=new wi,kl=new wi,Wl=new Qn,Vl=new Qn,jl=new Qn;class Yl extends Sr{constructor(t){if(super(),this.type="Sprite",void 0===Dl){Dl=new ls;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Tl(t,5);Dl.setIndex([0,1,2,0,2,3]),Dl.setAttribute("position",new Pl(e,3,0,!1)),Dl.setAttribute("uv",new Pl(e,2,3,!1))}this.geometry=Dl,this.material=void 0!==t?t:new Rl,this.center=new Qn(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zl.setFromMatrixScale(this.matrixWorld),Fl.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Bl.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&zl.multiplyScalar(-Bl.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Xl(Ul.set(-.5,-.5,0),Bl,s,zl,i,r),Xl(Gl.set(.5,-.5,0),Bl,s,zl,i,r),Xl(kl.set(.5,.5,0),Bl,s,zl,i,r),Wl.set(0,0),Vl.set(1,0),jl.set(1,1);let o=t.ray.intersectTriangle(Ul,Gl,kl,!1,Ol);if(null===o&&(Xl(Gl.set(-.5,.5,0),Bl,s,zl,i,r),Vl.set(0,1),o=t.ray.intersectTriangle(Ul,kl,Gl,!1,Ol),null===o))return;const a=t.ray.origin.distanceTo(Ol);a<t.near||a>t.far||e.push({distance:a,point:Ol.clone(),uv:Nr.getUV(Ol,Ul,Gl,kl,Wl,Vl,jl,new Qn),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Xl(t,e,n,i,r,s){Hl.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Nl.x=s*Hl.x-r*Hl.y,Nl.y=r*Hl.x+s*Hl.y):Nl.copy(Hl),t.copy(e),t.x+=Nl.x,t.y+=Nl.y,t.applyMatrix4(Fl)}Yl.prototype.isSprite=!0;const Ql=new wi,Zl=new wi;class ql extends Sr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){Ql.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Ql);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Ql.setFromMatrixPosition(t.matrixWorld),Zl.setFromMatrixPosition(this.matrixWorld);const n=Ql.distanceTo(Zl)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}}const Jl=new wi,Kl=new Ai,$l=new Ai,tc=new wi,ec=new nr;class nc extends Ms{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nr,this.bindMatrixInverse=new nr}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ai,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;Kl.fromBufferAttribute(i.attributes.skinIndex,t),$l.fromBufferAttribute(i.attributes.skinWeight,t),Jl.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=$l.getComponent(t);if(0!==i){const r=Kl.getComponent(t);ec.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(tc.copy(Jl).applyMatrix4(ec),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}nc.prototype.isSkinnedMesh=!0;class ic extends Sr{constructor(){super(),this.type="Bone"}}ic.prototype.isBone=!0;class rc extends mi{constructor(t=null,e=1,n=1,i,r,s,o,a,l=Rt,c=Rt,h,u){super(null,s,o,a,l,c,i,r,h,u),this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}rc.prototype.isDataTexture=!0;const sc=new nr,oc=new nr;class ac{constructor(t=[],e=[]){this.uuid=Un(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new nr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new nr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:oc;sc.multiplyMatrices(r,e[i]),sc.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new ac(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=jn(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new rc(e,t,t,ee,Qt);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new ic),this.bones.push(r),this.boneInverses.push((new nr).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class lc extends Vr{constructor(t,e,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}lc.prototype.isInstancedBufferAttribute=!0;const cc=new nr,hc=new nr,uc=[],dc=new Ms;class pc extends Ms{constructor(t,e,n){super(t,e),this.instanceMatrix=new lc(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(dc.geometry=this.geometry,dc.material=this.material,void 0!==dc.material)for(let r=0;r<i;r++){this.getMatrixAt(r,cc),hc.multiplyMatrices(n,cc),dc.matrixWorld=hc,dc.raycast(t,uc);for(let t=0,n=uc.length;t<n;t++){const n=uc[t];n.instanceId=r,n.object=this,e.push(n)}uc.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new lc(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}pc.prototype.isInstancedMesh=!0;class gc extends Ur{constructor(t){super(),this.type="LineBasicMaterial",this.color=new hi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}gc.prototype.isLineBasicMaterial=!0;const fc=new wi,mc=new wi,Ac=new nr,Cc=new er,vc=new Xi;class yc extends Sr{constructor(t=new ls,e=new gc){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)fc.fromBufferAttribute(e,t-1),mc.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=fc.distanceTo(mc);t.setAttribute("lineDistance",new $r(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vc.copy(n.boundingSphere),vc.applyMatrix4(i),vc.radius+=r,!1===t.ray.intersectsSphere(vc))return;Ac.copy(i).invert(),Cc.copy(t.ray).applyMatrix4(Ac);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new wi,c=new wi,h=new wi,u=new wi,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,s.start),o=Math.min(i.count,s.start+s.count)-1;n<o;n+=d){const s=i.getX(n),o=i.getX(n+1);l.fromBufferAttribute(r,s),c.fromBufferAttribute(r,o);if(Cc.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(u);d<t.near||d>t.far||e.push({distance:d,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(r.count,s.start+s.count)-1;n<i;n+=d){l.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(Cc.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:h.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}yc.prototype.isLine=!0;const Ic=new wi,xc=new wi;class bc extends yc{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Ic.fromBufferAttribute(e,t),xc.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Ic.distanceTo(xc);t.setAttribute("lineDistance",new $r(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}bc.prototype.isLineSegments=!0;class _c extends yc{constructor(t,e){super(t,e),this.type="LineLoop"}}_c.prototype.isLineLoop=!0;class wc extends Ur{constructor(t){super(),this.type="PointsMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}wc.prototype.isPointsMaterial=!0;const Mc=new nr,Sc=new er,Ec=new Xi,Tc=new wi;class Lc extends Sr{constructor(t=new ls,e=new wc){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ec.copy(n.boundingSphere),Ec.applyMatrix4(i),Ec.radius+=r,!1===t.ray.intersectsSphere(Ec))return;Mc.copy(i).invert(),Sc.copy(t.ray).applyMatrix4(Mc);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){for(let n=Math.max(0,s.start),l=Math.min(r.count,s.start+s.count);n<l;n++){const s=r.getX(n);Tc.fromBufferAttribute(o,s),Pc(Tc,s,a,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);n<r;n++)Tc.fromBufferAttribute(o,n),Pc(Tc,n,a,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Pc(t,e,n,i,r,s,o){const a=Sc.distanceSqToPoint(t);if(a<n){const n=new wi;Sc.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:o})}}Lc.prototype.isPoints=!0;class Rc extends mi{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.minFilter=void 0!==s?s:Ht,this.magFilter=void 0!==r?r:Ht,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Rc.prototype.isVideoTexture=!0;class Dc extends mi{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=Rt,this.minFilter=Rt,this.generateMipmaps=!1,this.needsUpdate=!0}}Dc.prototype.isFramebufferTexture=!0;class Oc extends mi{constructor(t,e,n,i,r,s,o,a,l,c,h,u){super(null,s,o,a,l,c,i,r,h,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}Oc.prototype.isCompressedTexture=!0;class zc extends mi{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}}zc.prototype.isCanvasTexture=!0;class Bc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let o,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),o=n[i]-s,o<0)a=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),s=this.getPoint(i),o=e||(r.isVector2?new Qn:new wi);return o.copy(s).sub(r).normalize(),o}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new wi,i=[],r=[],s=[],o=new wi,a=new nr;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new wi)}r[0]=new wi,s[0]=new wi;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),s[e]=s[e-1].clone(),o.crossVectors(i[e-1],i[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(Gn(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(a.makeRotationAxis(o,t))}s[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(Gn(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Hc extends Bc{constructor(t=0,e=0,n=1,i=1,r=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const n=e||new Qn,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Hc.prototype.isEllipseCurve=!0;class Nc extends Hc{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.type="ArcCurve"}}function Fc(){let t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){let l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,c=(n-e)/o-(i-e)/(o+a)+(i-n)/a;l*=o,c*=o,r(e,n,l,c)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}Nc.prototype.isArcCurve=!0;const Uc=new wi,Gc=new Fc,kc=new Fc,Wc=new Fc;class Vc extends Bc{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new wi){const n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t;let o,a,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?o=i[(l-1)%r]:(Uc.subVectors(i[0],i[1]).add(i[0]),o=Uc);const h=i[l%r],u=i[(l+1)%r];if(this.closed||l+2<r?a=i[(l+2)%r]:(Uc.subVectors(i[r-1],i[r-2]).add(i[r-1]),a=Uc),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(h),t),n=Math.pow(h.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Gc.initNonuniformCatmullRom(o.x,h.x,u.x,a.x,e,n,i),kc.initNonuniformCatmullRom(o.y,h.y,u.y,a.y,e,n,i),Wc.initNonuniformCatmullRom(o.z,h.z,u.z,a.z,e,n,i)}else"catmullrom"===this.curveType&&(Gc.initCatmullRom(o.x,h.x,u.x,a.x,this.tension),kc.initCatmullRom(o.y,h.y,u.y,a.y,this.tension),Wc.initCatmullRom(o.z,h.z,u.z,a.z,this.tension));return n.set(Gc.calc(c),kc.calc(c),Wc.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new wi).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function jc(t,e,n,i,r){const s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function Yc(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Xc(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}Vc.prototype.isCatmullRomCurve3=!0;class Qc extends Bc{constructor(t=new Qn,e=new Qn,n=new Qn,i=new Qn){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Qn){const n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Xc(t,i.x,r.x,s.x,o.x),Xc(t,i.y,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Qc.prototype.isCubicBezierCurve=!0;class Zc extends Bc{constructor(t=new wi,e=new wi,n=new wi,i=new wi){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new wi){const n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Xc(t,i.x,r.x,s.x,o.x),Xc(t,i.y,r.y,s.y,o.y),Xc(t,i.z,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Zc.prototype.isCubicBezierCurve3=!0;class qc extends Bc{constructor(t=new Qn,e=new Qn){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Qn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Qn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}qc.prototype.isLineCurve=!0;class Jc extends Bc{constructor(t=new wi,e=new wi){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new wi){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Kc extends Bc{constructor(t=new Qn,e=new Qn,n=new Qn){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Qn){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Yc(t,i.x,r.x,s.x),Yc(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Kc.prototype.isQuadraticBezierCurve=!0;class $c extends Bc{constructor(t=new wi,e=new wi,n=new wi){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new wi){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Yc(t,i.x,r.x,s.x),Yc(t,i.y,r.y,s.y),Yc(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}$c.prototype.isQuadraticBezierCurve3=!0;class th extends Bc{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Qn){const n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(jc(o,a.x,l.x,c.x,h.x),jc(o,a.y,l.y,c.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Qn).fromArray(n))}return this}}th.prototype.isSplineCurve=!0;var eh=Object.freeze({__proto__:null,ArcCurve:Nc,CatmullRomCurve3:Vc,CubicBezierCurve:Qc,CubicBezierCurve3:Zc,EllipseCurve:Hc,LineCurve:qc,LineCurve3:Jc,QuadraticBezierCurve:Kc,QuadraticBezierCurve3:$c,SplineCurve:th});class nh extends Bc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new qc(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const i=a[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new eh[n.type]).fromJSON(n))}return this}}class ih extends nh{constructor(t){super(),this.type="Path",this.currentPoint=new Qn,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new qc(this.currentPoint.clone(),new Qn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new Kc(this.currentPoint.clone(),new Qn(t,e),new Qn(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const o=new Qc(this.currentPoint.clone(),new Qn(t,e),new Qn(n,i),new Qn(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new th(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){const l=new Hc(t,e,n,i,r,s,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class rh extends ls{constructor(t=[new Qn(0,.5),new Qn(.5,0),new Qn(0,-.5)],e=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Gn(i,0,2*Math.PI);const r=[],s=[],o=[],a=[],l=[],c=1/e,h=new wi,u=new Qn,d=new wi,p=new wi,g=new wi;let f=0,m=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:f=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,d.x=1*m,d.y=-f,d.z=0*m,g.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case t.length-1:a.push(g.x,g.y,g.z);break;default:f=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,d.x=1*m,d.y=-f,d.z=0*m,p.copy(d),d.x+=g.x,d.y+=g.y,d.z+=g.z,d.normalize(),a.push(d.x,d.y,d.z),g.copy(p)}for(let r=0;r<=e;r++){const d=n+r*c*i,p=Math.sin(d),g=Math.cos(d);for(let n=0;n<=t.length-1;n++){h.x=t[n].x*p,h.y=t[n].y,h.z=t[n].x*g,s.push(h.x,h.y,h.z),u.x=r/e,u.y=n/(t.length-1),o.push(u.x,u.y);const i=a[3*n+0]*p,c=a[3*n+1],d=a[3*n+0]*g;l.push(i,c,d)}}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const i=e+n*t.length,s=i,o=i+t.length,a=i+t.length+1,l=i+1;r.push(s,o,l),r.push(a,l,o)}this.setIndex(r),this.setAttribute("position",new $r(s,3)),this.setAttribute("uv",new $r(o,2)),this.setAttribute("normal",new $r(l,3))}static fromJSON(t){return new rh(t.points,t.segments,t.phiStart,t.phiLength)}}class sh extends rh{constructor(t=1,e=1,n=4,i=8){const r=new ih;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:i}}static fromJSON(t){return new sh(t.radius,t.length,t.capSegments,t.radialSegments)}}class oh extends ls{constructor(t=1,e=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],s=[],o=[],a=[],l=new wi,c=new Qn;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let r=0,h=3;r<=e;r++,h+=3){const u=n+r/e*i;l.x=t*Math.cos(u),l.y=t*Math.sin(u),s.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(s[h]/t+1)/2,c.y=(s[h+1]/t+1)/2,a.push(c.x,c.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new $r(s,3)),this.setAttribute("normal",new $r(o,3)),this.setAttribute("uv",new $r(a,2))}static fromJSON(t){return new oh(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ah extends ls{constructor(t=1,e=1,n=1,i=8,r=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],h=[],u=[],d=[];let p=0;const g=[],f=n/2;let m=0;function A(n){const r=p,s=new Qn,g=new wi;let A=0;const C=!0===n?t:e,v=!0===n?1:-1;for(let t=1;t<=i;t++)h.push(0,f*v,0),u.push(0,v,0),d.push(.5,.5),p++;const y=p;for(let t=0;t<=i;t++){const e=t/i*a+o,n=Math.cos(e),r=Math.sin(e);g.x=C*r,g.y=f*v,g.z=C*n,h.push(g.x,g.y,g.z),u.push(0,v,0),s.x=.5*n+.5,s.y=.5*r*v+.5,d.push(s.x,s.y),p++}for(let t=0;t<i;t++){const e=r+t,i=y+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),A+=3}l.addGroup(m,A,!0===n?1:2),m+=A}!function(){const s=new wi,A=new wi;let C=0;const v=(e-t)/n;for(let l=0;l<=r;l++){const c=[],m=l/r,C=m*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*a+o,l=Math.sin(r),g=Math.cos(r);A.x=C*l,A.y=-m*n+f,A.z=C*g,h.push(A.x,A.y,A.z),s.set(l,v,g).normalize(),u.push(s.x,s.y,s.z),d.push(e,1-m),c.push(p++)}g.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=g[e][t],i=g[e+1][t],r=g[e+1][t+1],s=g[e][t+1];c.push(n,i,s),c.push(i,r,s),C+=6}l.addGroup(m,C,0),m+=C}(),!1===s&&(t>0&&A(!0),e>0&&A(!1)),this.setIndex(c),this.setAttribute("position",new $r(h,3)),this.setAttribute("normal",new $r(u,3)),this.setAttribute("uv",new $r(d,2))}static fromJSON(t){return new ah(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class lh extends ah{constructor(t=1,e=1,n=8,i=1,r=!1,s=0,o=2*Math.PI){super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new lh(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ch extends ls{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],s=[];function o(t,e,n,i){const r=i+1,s=[];for(let i=0;i<=r;i++){s[i]=[];const o=t.clone().lerp(n,i/r),a=e.clone().lerp(n,i/r),l=r-i;for(let t=0;t<=l;t++)s[i][t]=0===t&&i===r?o:o.clone().lerp(a,t/l)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const n=Math.floor(e/2);e%2==0?(a(s[t][n+1]),a(s[t+1][n]),a(s[t][n])):(a(s[t][n+1]),a(s[t+1][n+1]),a(s[t+1][n]))}}function a(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new wi,i=new wi,r=new wi;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i),function(t){const e=new wi;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new wi;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=h(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);s.push(i,1-o)}var e;(function(){const t=new wi,e=new wi,n=new wi,i=new wi,o=new Qn,a=new Qn,l=new Qn;for(let u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(t).add(e).add(n).divideScalar(3);const p=h(i);c(o,d+0,t,p),c(a,d+2,e,p),c(l,d+4,n,p)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new $r(r,3)),this.setAttribute("normal",new $r(r.slice(),3)),this.setAttribute("uv",new $r(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new ch(t.vertices,t.indices,t.radius,t.details)}}class hh extends ch{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new hh(t.radius,t.detail)}}const uh=new wi,dh=new wi,ph=new wi,gh=new Nr;class fh extends ls{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(Nn*e),s=t.getIndex(),o=t.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],h=new Array(3),u={},d=[];for(let t=0;t<a;t+=3){s?(l[0]=s.getX(t),l[1]=s.getX(t+1),l[2]=s.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:a}=gh;if(e.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),a.fromBufferAttribute(o,l[2]),gh.getNormal(ph),h[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,h[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,h[2]=`${Math.round(a.x*i)},${Math.round(a.y*i)},${Math.round(a.z*i)}`,h[0]!==h[1]&&h[1]!==h[2]&&h[2]!==h[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=h[t],i=h[e],s=gh[c[t]],o=gh[c[e]],a=`${n}_${i}`,p=`${i}_${n}`;p in u&&u[p]?(ph.dot(u[p].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(o.x,o.y,o.z)),u[p]=null):a in u||(u[a]={index0:l[t],index1:l[e],normal:ph.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];uh.fromBufferAttribute(o,e),dh.fromBufferAttribute(o,n),d.push(uh.x,uh.y,uh.z),d.push(dh.x,dh.y,dh.z)}this.setAttribute("position",new $r(d,3))}}}class mh extends ih{constructor(t){super(t),this.uuid=Un(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new ih).fromJSON(n))}return this}}const Ah=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=Ch(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,p;if(i&&(s=function(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=Ch(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Th(c));for(r.sort(wh),s=0;s<r.length;s++)Mh(r[s],n),n=vh(n,n.next);return n}(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let e=n;e<r;e+=n)u=t[e],d=t[e+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);p=Math.max(c-a,h-l),p=0!==p?1/p:0}return yh(s,o,n,a,l,p),o};function Ch(t,e,n,i,r){let s,o;if(r===function(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=Fh(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=Fh(s,t[s],t[s+1],o);return o&&Dh(o,o.next)&&(Uh(o),o=o.next),o}function vh(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Dh(i,i.next)&&0!==Rh(i.prev,i,i.next))i=i.next;else{if(Uh(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function yh(t,e,n,i,r,s,o){if(!t)return;!o&&s&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=Eh(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1)}(r)}(t,i,r,s);let a,l,c=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,s?xh(t,i,r,s):Ih(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Uh(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?yh(t=bh(vh(t),e,n),e,n,i,r,s,2):2===o&&_h(t,e,n,i,r,s):yh(vh(t),e,n,i,r,s,1);break}}function Ih(t){const e=t.prev,n=t,i=t.next;if(Rh(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(Lh(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Rh(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function xh(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Rh(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,h=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=Eh(a,l,e,n,i),d=Eh(c,h,e,n,i);let p=t.prevZ,g=t.nextZ;for(;p&&p.z>=u&&g&&g.z<=d;){if(p!==t.prev&&p!==t.next&&Lh(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Rh(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,g!==t.prev&&g!==t.next&&Lh(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&Rh(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&Lh(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Rh(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;g&&g.z<=d;){if(g!==t.prev&&g!==t.next&&Lh(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&Rh(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function bh(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Dh(r,s)&&Oh(r,i,i.next,s)&&Hh(r,s)&&Hh(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),Uh(i),Uh(i.next),i=t=s),i=i.next}while(i!==t);return vh(i)}function _h(t,e,n,i,r,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&Ph(o,t)){let a=Nh(o,t);return o=vh(o,o.next),a=vh(a,a.next),yh(o,e,n,i,r,s),void yh(a,e,n,i,r,s)}t=t.next}o=o.next}while(o!==t)}function wh(t,e){return t.x-e.x}function Mh(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let s,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o){if(o=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===o)return s;const a=s,l=s.x,c=s.y;let h,u=1/0;n=s;do{i>=n.x&&n.x>=l&&i!==n.x&&Lh(r<c?i:o,r,l,c,r<c?o:i,r,n.x,n.y)&&(h=Math.abs(r-n.y)/(i-n.x),Hh(n,t)&&(h<u||h===u&&(n.x>s.x||n.x===s.x&&Sh(s,n)))&&(s=n,u=h)),n=n.next}while(n!==a);return s}(t,e)){const n=Nh(e,t);vh(e,e.next),vh(n,n.next)}}function Sh(t,e){return Rh(t.prev,t,e.prev)<0&&Rh(e.next,t,t.next)<0}function Eh(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Th(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Lh(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function Ph(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Oh(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Hh(t,e)&&Hh(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Rh(t.prev,t,e.prev)||Rh(t,e.prev,e))||Dh(t,e)&&Rh(t.prev,t,t.next)>0&&Rh(e.prev,e,e.next)>0)}function Rh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Dh(t,e){return t.x===e.x&&t.y===e.y}function Oh(t,e,n,i){const r=Bh(Rh(t,e,n)),s=Bh(Rh(t,e,i)),o=Bh(Rh(n,i,t)),a=Bh(Rh(n,i,e));return r!==s&&o!==a||(!(0!==r||!zh(t,n,e))||(!(0!==s||!zh(t,i,e))||(!(0!==o||!zh(n,t,i))||!(0!==a||!zh(n,e,i)))))}function zh(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Bh(t){return t>0?1:t<0?-1:0}function Hh(t,e){return Rh(t.prev,t,t.next)<0?Rh(t,e,t.next)>=0&&Rh(t,t.prev,e)>=0:Rh(t,e,t.prev)<0||Rh(t,t.next,e)<0}function Nh(t,e){const n=new Gh(t.i,t.x,t.y),i=new Gh(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Fh(t,e,n,i){const r=new Gh(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Uh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Gh(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class kh{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return kh.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];Wh(t),Vh(n,t);let s=t.length;e.forEach(Wh);for(let t=0;t<e.length;t++)i.push(s),s+=e[t].length,Vh(n,e[t]);const o=Ah(n,i);for(let t=0;t<o.length;t+=3)r.push(o.slice(t,t+3));return r}}function Wh(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Vh(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class jh extends ls{constructor(t=new mh([new Qn(.5,.5),new Qn(-.5,.5),new Qn(-.5,-.5),new Qn(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let e=0,n=t.length;e<n;e++){s(t[e])}function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:h-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const g=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Yh;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let m,A,C,v,y,I=!1;g&&(m=g.getSpacedPoints(a),I=!0,c=!1,A=g.computeFrenetFrames(a,!1),C=new wi,v=new wi,y=new wi),c||(p=0,h=0,u=0,d=0);const x=t.extractPoints(o);let b=x.shape;const _=x.holes;if(!kh.isClockWise(b)){b=b.reverse();for(let t=0,e=_.length;t<e;t++){const e=_[t];kh.isClockWise(e)&&(_[t]=e.reverse())}}const w=kh.triangulateShape(b,_),M=b;for(let t=0,e=_.length;t<e;t++){const e=_[t];b=b.concat(e)}function S(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const E=b.length,T=w.length;function L(t,e,n){let i,r,s;const o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=o*o+a*a,u=o*c-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=e.x-a/u,g=e.y+o/u,f=((n.x-c/d-p)*c-(n.y+l/d-g)*l)/(o*c-a*l);i=p+o*f-t.x,r=g+a*f-t.y;const m=i*i+r*r;if(m<=2)return new Qn(i,r);s=Math.sqrt(m/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(c)&&(t=!0),t?(i=-a,r=o,s=Math.sqrt(h)):(i=o,r=a,s=Math.sqrt(h/2))}return new Qn(i/s,r/s)}const P=[];for(let t=0,e=M.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),P[t]=L(M[t],M[n],M[i]);const R=[];let D,O=P.concat();for(let t=0,e=_.length;t<e;t++){const e=_[t];D=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),D[t]=L(e[t],e[i],e[r]);R.push(D),O=O.concat(D)}for(let t=0;t<p;t++){const e=t/p,n=h*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=M.length;t<e;t++){const e=S(M[t],P[t],i);H(e.x,e.y,-n)}for(let t=0,e=_.length;t<e;t++){const e=_[t];D=R[t];for(let t=0,r=e.length;t<r;t++){const r=S(e[t],D[t],i);H(r.x,r.y,-n)}}}const z=u+d;for(let t=0;t<E;t++){const e=c?S(b[t],O[t],z):b[t];I?(v.copy(A.normals[0]).multiplyScalar(e.x),C.copy(A.binormals[0]).multiplyScalar(e.y),y.copy(m[0]).add(v).add(C),H(y.x,y.y,y.z)):H(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<E;e++){const n=c?S(b[e],O[e],z):b[e];I?(v.copy(A.normals[t]).multiplyScalar(n.x),C.copy(A.binormals[t]).multiplyScalar(n.y),y.copy(m[t]).add(v).add(C),H(y.x,y.y,y.z)):H(n.x,n.y,l/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=h*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=M.length;t<e;t++){const e=S(M[t],P[t],i);H(e.x,e.y,l+n)}for(let t=0,e=_.length;t<e;t++){const e=_[t];D=R[t];for(let t=0,r=e.length;t<r;t++){const r=S(e[t],D[t],i);I?H(r.x,r.y+m[a-1].y,m[a-1].x+n):H(r.x,r.y,l+n)}}}function B(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=a+2*p;t<n;t++){const n=E*t,s=E*(t+1);F(e+i+n,e+r+n,e+r+s,e+i+s)}}}function H(t,e,n){s.push(t),s.push(e),s.push(n)}function N(t,e,r){U(t),U(e),U(r);const s=i.length/3,o=f.generateTopUV(n,i,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function F(t,e,r,s){U(t),U(e),U(s),U(e),U(r),U(s);const o=i.length/3,a=f.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function U(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=E*t;for(let t=0;t<T;t++){const n=w[t];N(n[2]+e,n[1]+e,n[0]+e)}t=a+2*p,e=E*t;for(let t=0;t<T;t++){const n=w[t];N(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<T;t++){const e=w[t];N(e[2],e[1],e[0])}for(let t=0;t<T;t++){const e=w[t];N(e[0]+E*a,e[1]+E*a,e[2]+E*a)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;B(M,e),e+=M.length;for(let t=0,n=_.length;t<n;t++){const n=_[t];B(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new $r(i,3)),this.setAttribute("uv",new $r(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new eh[i.type]).fromJSON(i)),new jh(n,t.options)}}const Yh={generateTopUV:function(t,e,n,i,r){const s=e[3*n],o=e[3*n+1],a=e[3*i],l=e[3*i+1],c=e[3*r],h=e[3*r+1];return[new Qn(s,o),new Qn(a,l),new Qn(c,h)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[3*n],a=e[3*n+1],l=e[3*n+2],c=e[3*i],h=e[3*i+1],u=e[3*i+2],d=e[3*r],p=e[3*r+1],g=e[3*r+2],f=e[3*s],m=e[3*s+1],A=e[3*s+2];return Math.abs(a-h)<Math.abs(o-c)?[new Qn(o,1-l),new Qn(c,1-u),new Qn(d,1-g),new Qn(f,1-A)]:[new Qn(a,1-l),new Qn(h,1-u),new Qn(p,1-g),new Qn(m,1-A)]}};class Xh extends ch{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Xh(t.radius,t.detail)}}class Qh extends ch{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Qh(t.radius,t.detail)}}class Zh extends ls{constructor(t=.5,e=1,n=8,i=1,r=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n);const o=[],a=[],l=[],c=[];let h=t;const u=(e-t)/(i=Math.max(1,i)),d=new wi,p=new Qn;for(let t=0;t<=i;t++){for(let t=0;t<=n;t++){const i=r+t/n*s;d.x=h*Math.cos(i),d.y=h*Math.sin(i),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,c.push(p.x,p.y)}h+=u}for(let t=0;t<i;t++){const e=t*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,s=i+n+1,a=i+n+2,l=i+1;o.push(r,s,l),o.push(s,a,l)}}this.setIndex(o),this.setAttribute("position",new $r(a,3)),this.setAttribute("normal",new $r(l,3)),this.setAttribute("uv",new $r(c,2))}static fromJSON(t){return new Zh(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class qh extends ls{constructor(t=new mh([new Qn(0,.5),new Qn(-.5,-.5),new Qn(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(o,a,e),o+=a,a=0;function l(t){const o=i.length/3,l=t.extractPoints(e);let c=l.shape;const h=l.holes;!1===kh.isClockWise(c)&&(c=c.reverse());for(let t=0,e=h.length;t<e;t++){const e=h[t];!0===kh.isClockWise(e)&&(h[t]=e.reverse())}const u=kh.triangulateShape(c,h);for(let t=0,e=h.length;t<e;t++){const e=h[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],i=e[0]+o,r=e[1]+o,s=e[2]+o;n.push(i,r,s),a+=3}}this.setIndex(n),this.setAttribute("position",new $r(i,3)),this.setAttribute("normal",new $r(r,3)),this.setAttribute("uv",new $r(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new qh(n,t.curveSegments)}}class Jh extends ls{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const c=[],h=new wi,u=new wi,d=[],p=[],g=[],f=[];for(let d=0;d<=n;d++){const m=[],A=d/n;let C=0;0==d&&0==s?C=.5/e:d==n&&a==Math.PI&&(C=-.5/e);for(let n=0;n<=e;n++){const a=n/e;h.x=-t*Math.cos(i+a*r)*Math.sin(s+A*o),h.y=t*Math.cos(s+A*o),h.z=t*Math.sin(i+a*r)*Math.sin(s+A*o),p.push(h.x,h.y,h.z),u.copy(h).normalize(),g.push(u.x,u.y,u.z),f.push(a+C,1-A),m.push(l++)}c.push(m)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=c[t][i+1],r=c[t][i],o=c[t+1][i],l=c[t+1][i+1];(0!==t||s>0)&&d.push(e,r,l),(t!==n-1||a<Math.PI)&&d.push(r,o,l)}this.setIndex(d),this.setAttribute("position",new $r(p,3)),this.setAttribute("normal",new $r(g,3)),this.setAttribute("uv",new $r(f,2))}static fromJSON(t){return new Jh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Kh extends ch{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Kh(t.radius,t.detail)}}class $h extends ls{constructor(t=1,e=.4,n=8,i=6,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],a=[],l=[],c=new wi,h=new wi,u=new wi;for(let s=0;s<=n;s++)for(let d=0;d<=i;d++){const p=d/i*r,g=s/n*Math.PI*2;h.x=(t+e*Math.cos(g))*Math.cos(p),h.y=(t+e*Math.cos(g))*Math.sin(p),h.z=e*Math.sin(g),o.push(h.x,h.y,h.z),c.x=t*Math.cos(p),c.y=t*Math.sin(p),u.subVectors(h,c).normalize(),a.push(u.x,u.y,u.z),l.push(d/i),l.push(s/n)}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*t+e-1,r=(i+1)*(t-1)+e-1,o=(i+1)*(t-1)+e,a=(i+1)*t+e;s.push(n,r,a),s.push(r,o,a)}this.setIndex(s),this.setAttribute("position",new $r(o,3)),this.setAttribute("normal",new $r(a,3)),this.setAttribute("uv",new $r(l,2))}static fromJSON(t){return new $h(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class tu extends ls{constructor(t=1,e=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],l=[],c=[],h=new wi,u=new wi,d=new wi,p=new wi,g=new wi,f=new wi,m=new wi;for(let o=0;o<=n;++o){const C=o/n*r*Math.PI*2;A(C,r,s,t,d),A(C+.01,r,s,t,p),f.subVectors(p,d),m.addVectors(p,d),g.crossVectors(f,m),m.crossVectors(g,f),g.normalize(),m.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,s=-e*Math.cos(r),p=e*Math.sin(r);h.x=d.x+(s*m.x+p*g.x),h.y=d.y+(s*m.y+p*g.y),h.z=d.z+(s*m.z+p*g.z),a.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(o/n),c.push(t/i)}}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),s=(i+1)*t+e,a=(i+1)*(t-1)+e;o.push(n,r,a),o.push(r,s,a)}function A(t,e,n,i,r){const s=Math.cos(t),o=Math.sin(t),a=n/e*t,l=Math.cos(a);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new $r(a,3)),this.setAttribute("normal",new $r(l,3)),this.setAttribute("uv",new $r(c,2))}static fromJSON(t){return new tu(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class eu extends ls{constructor(t=new $c(new wi(-1,-1,0),new wi(-1,1,0),new wi(1,1,0)),e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const s=t.computeFrenetFrames(e,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new wi,a=new wi,l=new Qn;let c=new wi;const h=[],u=[],d=[],p=[];function g(r){c=t.getPointAt(r/e,c);const l=s.normals[r],d=s.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),s=-Math.cos(e);a.x=s*l.x+r*d.x,a.y=s*l.y+r*d.y,a.z=s*l.z+r*d.z,a.normalize(),u.push(a.x,a.y,a.z),o.x=c.x+n*a.x,o.y=c.y+n*a.y,o.z=c.z+n*a.z,h.push(o.x,o.y,o.z)}}!function(){for(let t=0;t<e;t++)g(t);g(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),s=(i+1)*t+e,o=(i+1)*(t-1)+e;p.push(n,r,o),p.push(r,s,o)}}()}(),this.setIndex(p),this.setAttribute("position",new $r(h,3)),this.setAttribute("normal",new $r(u,3)),this.setAttribute("uv",new $r(d,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new eu((new eh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class nu extends ls{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new wi,r=new wi;if(null!==t.index){const s=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,l=a.length;t<l;++t){const l=a[t],c=l.start;for(let t=c,a=c+l.count;t<a;t+=3)for(let a=0;a<3;a++){const l=o.getX(t+a),c=o.getX(t+(a+1)%3);i.fromBufferAttribute(s,l),r.fromBufferAttribute(s,c),!0===iu(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,o=s.count/3;t<o;t++)for(let o=0;o<3;o++){const a=3*t+o,l=3*t+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===iu(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new $r(e,3))}}}function iu(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var ru=Object.freeze({__proto__:null,BoxGeometry:Es,BoxBufferGeometry:Es,CapsuleGeometry:sh,CapsuleBufferGeometry:sh,CircleGeometry:oh,CircleBufferGeometry:oh,ConeGeometry:lh,ConeBufferGeometry:lh,CylinderGeometry:ah,CylinderBufferGeometry:ah,DodecahedronGeometry:hh,DodecahedronBufferGeometry:hh,EdgesGeometry:fh,ExtrudeGeometry:jh,ExtrudeBufferGeometry:jh,IcosahedronGeometry:Xh,IcosahedronBufferGeometry:Xh,LatheGeometry:rh,LatheBufferGeometry:rh,OctahedronGeometry:Qh,OctahedronBufferGeometry:Qh,PlaneGeometry:Xs,PlaneBufferGeometry:Xs,PolyhedronGeometry:ch,PolyhedronBufferGeometry:ch,RingGeometry:Zh,RingBufferGeometry:Zh,ShapeGeometry:qh,ShapeBufferGeometry:qh,SphereGeometry:Jh,SphereBufferGeometry:Jh,TetrahedronGeometry:Kh,TetrahedronBufferGeometry:Kh,TorusGeometry:$h,TorusBufferGeometry:$h,TorusKnotGeometry:tu,TorusKnotBufferGeometry:tu,TubeGeometry:eu,TubeBufferGeometry:eu,WireframeGeometry:nu});class su extends Ur{constructor(t){super(),this.type="ShadowMaterial",this.color=new hi(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}su.prototype.isShadowMaterial=!0;class ou extends Rs{constructor(t){super(t),this.type="RawShaderMaterial"}}ou.prototype.isRawShaderMaterial=!0;class au extends Ur{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new hi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=en,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}au.prototype.isMeshStandardMaterial=!0;class lu extends au{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new hi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new hi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new hi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}lu.prototype.isMeshPhysicalMaterial=!0;class cu extends Ur{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new hi(16777215),this.specular=new hi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=en,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}cu.prototype.isMeshPhongMaterial=!0;class hu extends Ur{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new hi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=en,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}hu.prototype.isMeshToonMaterial=!0;class uu extends Ur{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=en,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}uu.prototype.isMeshNormalMaterial=!0;class du extends Ur{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}du.prototype.isMeshLambertMaterial=!0;class pu extends Ur{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new hi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=en,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}pu.prototype.isMeshMatcapMaterial=!0;class gu extends gc{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}gu.prototype.isLineDashedMaterial=!0;const fu={ShadowMaterial:su,SpriteMaterial:Rl,RawShaderMaterial:ou,ShaderMaterial:Rs,PointsMaterial:wc,MeshPhysicalMaterial:lu,MeshStandardMaterial:au,MeshPhongMaterial:cu,MeshToonMaterial:hu,MeshNormalMaterial:uu,MeshLambertMaterial:du,MeshDepthMaterial:ul,MeshDistanceMaterial:dl,MeshBasicMaterial:Gr,MeshMatcapMaterial:pu,LineDashedMaterial:gu,LineBasicMaterial:gc,Material:Ur};Ur.fromType=function(t){return new fu[t]};const mu={arraySlice:function(t,e,n){return mu.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[o++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)},subclip:function(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let t=0;t<s.tracks.length;++t){const e=s.tracks[t],a=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const s=e.times[t]*r;if(!(s<n||s>=i)){l.push(e.times[t]);for(let n=0;n<a;++n)c.push(e.values[t*a+n])}}0!==l.length&&(e.times=mu.convertArray(l,e.times.constructor),e.values=mu.convertArray(c,e.values.constructor),o.push(e))}s.tracks=o;let a=1/0;for(let t=0;t<s.tracks.length;++t)a>s.tracks[t].times[0]&&(a=s.tracks[t].times[0]);for(let t=0;t<s.tracks.length;++t)s.tracks[t].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===o)continue;let a=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const u=i.times.length-1;let d;if(s<=i.times[0]){const t=a,e=l-a;d=mu.arraySlice(i.values,t,e)}else if(s>=i.times[u]){const t=u*l+a,e=t+l-a;d=mu.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=a,n=l-a;t.evaluate(s),d=mu.arraySlice(t.resultBuffer,e,n)}if("quaternion"===r){(new _i).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let t=0;t<p;++t){const e=t*h+c;if("quaternion"===r)_i.multiplyQuaternionsFlat(o.values,e,d,0,o.values,e);else{const t=h-2*c;for(let n=0;n<t;++n)o.values[e+n]-=d[n]}}}return t.blendMode=Xe,t}};class Au{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const o=e[1];t<o&&(n=2,r=o);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Au.prototype.beforeStart_=Au.prototype.copySampleValue_,Au.prototype.afterEnd_=Au.prototype.copySampleValue_;class Cu extends Au{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:We,endingEnd:We}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case Ve:r=t,o=2*e-n;break;case je:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Ve:s=t,a=2*n-e;break;case je:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),g=p*p,f=g*p,m=-u*f+2*u*g-u*p,A=(1+u)*f+(-1.5-2*u)*g+(-.5+u)*p+1,C=(-1-d)*f+(1.5+d)*g+.5*p,v=d*f-d*g;for(let t=0;t!==o;++t)r[t]=m*s[c+t]+A*s[l+t]+C*s[a+t]+v*s[h+t];return r}}class vu extends Au{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(i-e),h=1-c;for(let t=0;t!==o;++t)r[t]=s[l+t]*h+s[a+t]*c;return r}}class yu extends Au{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Iu{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=mu.convertArray(e,this.TimeBufferType),this.values=mu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:mu.convertArray(t.times,Array),values:mu.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new yu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new vu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Cu(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Ue:e=this.InterpolantFactoryMethodDiscrete;break;case Ge:e=this.InterpolantFactoryMethodLinear;break;case ke:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ue;case this.InterpolantFactoryMethodLinear:return Ge;case this.InterpolantFactoryMethodSmooth:return ke}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=mu.arraySlice(n,r,s),this.values=mu.arraySlice(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,s),t=!1;break}s=i}if(void 0!==i&&mu.isTypedArray(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=mu.arraySlice(this.times),e=mu.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===ke,r=t.length-1;let s=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(i)r=!0;else{const t=o*n,i=t-n,s=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[i+o]||n!==e[s+o]){r=!0;break}}}if(r){if(o!==s){t[s]=t[o];const i=o*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,o=0;o!==n;++o)e[i+o]=e[t+o];++s}return s!==t.length?(this.times=mu.arraySlice(t,0,s),this.values=mu.arraySlice(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=mu.arraySlice(this.times,0),e=mu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Iu.prototype.TimeBufferType=Float32Array,Iu.prototype.ValueBufferType=Float32Array,Iu.prototype.DefaultInterpolation=Ge;class xu extends Iu{}xu.prototype.ValueTypeName="bool",xu.prototype.ValueBufferType=Array,xu.prototype.DefaultInterpolation=Ue,xu.prototype.InterpolantFactoryMethodLinear=void 0,xu.prototype.InterpolantFactoryMethodSmooth=void 0;class bu extends Iu{}bu.prototype.ValueTypeName="color";class _u extends Iu{}_u.prototype.ValueTypeName="number";class wu extends Au{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let t=l+o;l!==t;l+=4)_i.slerpFlat(r,0,s,l-o,s,l,a);return r}}class Mu extends Iu{InterpolantFactoryMethodLinear(t){return new wu(this.times,this.values,this.getValueSize(),t)}}Mu.prototype.ValueTypeName="quaternion",Mu.prototype.DefaultInterpolation=Ge,Mu.prototype.InterpolantFactoryMethodSmooth=void 0;class Su extends Iu{}Su.prototype.ValueTypeName="string",Su.prototype.ValueBufferType=Array,Su.prototype.DefaultInterpolation=Ue,Su.prototype.InterpolantFactoryMethodLinear=void 0,Su.prototype.InterpolantFactoryMethodSmooth=void 0;class Eu extends Iu{}Eu.prototype.ValueTypeName="vector";class Tu{constructor(t,e=-1,n,i=Ye){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Un(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(Lu(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(Iu.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let t=0;t<r;t++){let o=[],a=[];o.push((t+r-1)%r,t,(t+1)%r),a.push(0,1,0);const l=mu.getKeyframeOrder(o);o=mu.sortedArray(o,1,l),a=mu.sortedArray(a,1,l),i||0!==o[0]||(o.push(r),a.push(a[0])),s.push(new _u(".morphTargetInfluences["+e[t].name+"]",o,a).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],s=n.name.match(r);if(s&&s.length>1){const t=s[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const s=[];for(const t in i)s.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],o=[];mu.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],s=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),s.push(i.morphTarget===n?1:0)}i.push(new _u(".morphTargetInfluence["+n+"]",t,s))}a=t.length*s}else{const s=".bones["+e[t].name+"]";n(Eu,s+".position",r,"pos",i),n(Mu,s+".quaternion",r,"rot",i),n(Eu,s+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _u;case"vector":case"vector2":case"vector3":case"vector4":return Eu;case"color":return bu;case"quaternion":return Mu;case"bool":case"boolean":return xu;case"string":return Su}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];mu.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Pu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Ru{constructor(t,e,n){const i=this;let r=!1,s=0,o=0,a=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,o),s===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Du=new Ru;class Ou{constructor(t){this.manager=void 0!==t?t:Du,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const zu={};class Bu extends Ou{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Pu.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(void 0!==zu[t])return void zu[t].push({onLoad:e,onProgress:n,onError:i});zu[t]=[],zu[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=zu[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),s=r?parseInt(r):0,o=0!==s;let a=0;const l=new ReadableStream({start(t){!function e(){i.read().then(({done:i,value:r})=>{if(i)t.close();else{a+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}})}()}});return new Response(l)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)}).then(t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>(new DOMParser).parseFromString(t,o));case"json":return t.json();default:if(void 0===o)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(o),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then(t=>i.decode(t))}}}).then(e=>{Pu.add(t,e);const n=zu[t];delete zu[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}}).catch(e=>{const n=zu[t];if(void 0===n)throw this.manager.itemError(t),e;delete zu[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Hu extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=Tu.parse(t[n]);e.push(i)}return e}}class Nu extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=[],o=new Oc,a=new Bu(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(c){a.load(t[c],(function(t){const n=r.parse(t,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=Ht),o.image=s,o.format=n.format,o.needsUpdate=!0,e&&e(o))}),n,i)}if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)c(e);else a.load(t,(function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){s[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)s[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),s[e].format=n.format,s[e].width=n.width,s[e].height=n.height}o.image=s}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ht),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,i);return o}}class Fu extends Ou{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Pu.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o=$n("img");function a(){c(),Pu.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class Uu extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=new Bs,s=new Fu(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(t[n],(function(t){r.images[n]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)a(e);return r}}class Gu extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new rc,o=new Bu(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,(function(t){const n=r.parse(t);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:Lt,s.wrapT=void 0!==n.wrapT?n.wrapT:Lt,s.magFilter=void 0!==n.magFilter?n.magFilter:Ht,s.minFilter=void 0!==n.minFilter?n.minFilter:Ht,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=Ut),1===n.mipmapCount&&(s.minFilter=Ht),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,e&&e(s,n))}),n,i),s}}class ku extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=new mi,s=new Fu(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class Wu extends Sr{constructor(t,e=1){super(),this.type="Light",this.color=new hi(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Wu.prototype.isLight=!0;class Vu extends Wu{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Sr.DefaultUp),this.updateMatrix(),this.groundColor=new hi(e)}copy(t){return Wu.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Vu.prototype.isHemisphereLight=!0;const ju=new nr,Yu=new wi,Xu=new wi;class Qu{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qn(512,512),this.map=null,this.mapPass=null,this.matrix=new nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vs,this._frameExtents=new Qn(1,1),this._viewportCount=1,this._viewports=[new Ai(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Yu.setFromMatrixPosition(t.matrixWorld),e.position.copy(Yu),Xu.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Xu),e.updateMatrixWorld(),ju.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ju),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Zu extends Qu{constructor(){super(new Os(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*Fn*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Zu.prototype.isSpotLightShadow=!0;class qu extends Wu{constructor(t,e,n=0,i=Math.PI/3,r=0,s=1){super(t,e),this.type="SpotLight",this.position.copy(Sr.DefaultUp),this.updateMatrix(),this.target=new Sr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.shadow=new Zu}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}qu.prototype.isSpotLight=!0;const Ju=new nr,Ku=new wi,$u=new wi;class td extends Qu{constructor(){super(new Os(90,1,.5,500)),this._frameExtents=new Qn(4,2),this._viewportCount=6,this._viewports=[new Ai(2,1,1,1),new Ai(0,1,1,1),new Ai(3,1,1,1),new Ai(1,1,1,1),new Ai(3,0,1,1),new Ai(1,0,1,1)],this._cubeDirections=[new wi(1,0,0),new wi(-1,0,0),new wi(0,0,1),new wi(0,0,-1),new wi(0,1,0),new wi(0,-1,0)],this._cubeUps=[new wi(0,1,0),new wi(0,1,0),new wi(0,1,0),new wi(0,1,0),new wi(0,0,1),new wi(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Ku.setFromMatrixPosition(t.matrixWorld),n.position.copy(Ku),$u.copy(n.position),$u.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt($u),n.updateMatrixWorld(),i.makeTranslation(-Ku.x,-Ku.y,-Ku.z),Ju.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ju)}}td.prototype.isPointLightShadow=!0;class ed extends Wu{constructor(t,e,n=0,i=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new td}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}ed.prototype.isPointLight=!0;class nd extends Qu{constructor(){super(new io(-5,5,5,-5,.5,500))}}nd.prototype.isDirectionalLightShadow=!0;class id extends Wu{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Sr.DefaultUp),this.updateMatrix(),this.target=new Sr,this.shadow=new nd}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}id.prototype.isDirectionalLight=!0;class rd extends Wu{constructor(t,e){super(t,e),this.type="AmbientLight"}}rd.prototype.isAmbientLight=!0;class sd extends Wu{constructor(t,e,n=10,i=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}sd.prototype.isRectAreaLight=!0;class od{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new wi)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}od.prototype.isSphericalHarmonics3=!0;class ad extends Wu{constructor(t=new od,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}ad.prototype.isLightProbe=!0;class ld extends Ou{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,s=new Bu(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=Ur.fromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new hi).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(i.uniforms[e]={},r.type){case"t":i.uniforms[e].value=n(r.value);break;case"c":i.uniforms[e].value=(new hi).setHex(r.value);break;case"v2":i.uniforms[e].value=(new Qn).fromArray(r.value);break;case"v3":i.uniforms[e].value=(new wi).fromArray(r.value);break;case"v4":i.uniforms[e].value=(new Ai).fromArray(r.value);break;case"m3":i.uniforms[e].value=(new Zn).fromArray(r.value);break;case"m4":i.uniforms[e].value=(new nr).fromArray(r.value);break;default:i.uniforms[e].value=r.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)i.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new Qn).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Qn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}}class cd{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class hd extends ls{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}hd.prototype.isInstancedBufferGeometry=!0;class ud extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bu(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],s=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers[e],r=new Uint32Array(i).buffer;return n[e]=r,r}(t,r.buffer),o=Kn(r.type,s),a=new Tl(o,r.stride);return a.uuid=r.uuid,e[i]=a,a}const r=t.isInstancedBufferGeometry?new hd:new ls,s=t.data.index;if(void 0!==s){const t=Kn(s.type,s.array);r.setIndex(new Vr(t,1))}const o=t.data.attributes;for(const e in o){const n=o[e];let s;if(n.isInterleavedBufferAttribute){const e=i(t.data,n.data);s=new Pl(e,n.itemSize,n.offset,n.normalized)}else{const t=Kn(n.type,n.array);s=new(n.isInstancedBufferAttribute?lc:Vr)(t,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),void 0!==n.updateRange&&(s.updateRange.offset=n.updateRange.offset,s.updateRange.count=n.updateRange.count),r.setAttribute(e,s)}const a=t.data.morphAttributes;if(a)for(const e in a){const n=a[e],s=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];let o;if(r.isInterleavedBufferAttribute){const e=i(t.data,r.data);o=new Pl(e,r.itemSize,r.offset,r.normalized)}else{const t=Kn(r.type,r.array);o=new Vr(t,r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),s.push(o)}r.morphAttributes[e]=s}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let t=0,e=l.length;t!==e;++t){const e=l[t];r.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new wi;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new Xi(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class dd extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=""===this.path?cd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const o=new Bu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){let s=null;try{s=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(s,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)}async loadAsync(t,e){const n=""===this.path?cd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new Bu(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),s=JSON.parse(r),o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(s)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),s=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),o=this.parseTextures(t.textures,s),a=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,a,o,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in s)if(s[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,s),a=this.parseObject(t.object,i,o,s,e),l=this.parseSkeletons(t.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new mh).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new ac).fromJSON(t[e],i);n[r.uuid]=r}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new ud;for(let r=0,s=t.length;r<s;r++){let s;const o=t[r];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in ru?s=ru[o.type].fromJSON(o,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new ld;r.setTextures(e);for(let e=0,s=t.length;e<s;e++){const s=t[e];if("MultiMaterial"===s.type){const t=[];for(let e=0;e<s.materials.length;e++){const i=s.materials[e];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),t.push(n[i.uuid])}i[s.uuid]=t}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=Tu.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function s(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:Kn(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Ru(e);r=new Fu(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n.url;if(Array.isArray(r)){const t=[];for(let e=0,n=r.length;e<n;e++){const n=s(r[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new rc(n.data,n.width,n.height)))}i[n.uuid]=new pi(t)}else{const t=s(n.url);i[n.uuid]=new pi(t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"==typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:Kn(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new Fu(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.url;if(Array.isArray(s)){const t=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=await r(n);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new rc(i.data,i.width,i.height)))}n[i.uuid]=new pi(t)}else{const t=await r(i.url);n[i.uuid]=new pi(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,s=t.length;r<s;r++){const s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const o=e[s.image],a=o.data;let l;Array.isArray(a)?(l=new Bs,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new rc:new mi,a&&(l.needsUpdate=!0)),l.source=o,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,pd)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],gd),l.wrapT=n(s.wrap[1],gd)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,fd)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,fd)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(t,e,n,i,r){let s,o,a;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function h(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":s=new El,void 0!==t.background&&(Number.isInteger(t.background)?s.background=new hi(t.background):s.background=h(t.background)),void 0!==t.environment&&(s.environment=h(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?s.fog=new Sl(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(s.fog=new Ml(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":s=new Os(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new io(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new rd(t.color,t.intensity);break;case"DirectionalLight":s=new id(t.color,t.intensity);break;case"PointLight":s=new ed(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new sd(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new qu(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new Vu(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=(new ad).fromJSON(t);break;case"SkinnedMesh":o=l(t.geometry),a=c(t.material),s=new nc(o,a),void 0!==t.bindMode&&(s.bindMode=t.bindMode),void 0!==t.bindMatrix&&s.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(s.skeleton=t.skeleton);break;case"Mesh":o=l(t.geometry),a=c(t.material),s=new Ms(o,a);break;case"InstancedMesh":o=l(t.geometry),a=c(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;s=new pc(o,a,e),s.instanceMatrix=new lc(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new lc(new Float32Array(i.array),i.itemSize));break;case"LOD":s=new ql;break;case"Line":s=new yc(l(t.geometry),c(t.material));break;case"LineLoop":s=new _c(l(t.geometry),c(t.material));break;case"LineSegments":s=new bc(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":s=new Lc(l(t.geometry),c(t.material));break;case"Sprite":s=new Yl(c(t.material));break;case"Group":s=new Cl;break;case"Bone":s=new ic;break;default:s=new Sr}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(s.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.quaternion&&s.quaternion.fromArray(t.quaternion),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(s.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(s.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(s.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&s.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(s.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.frustumCulled&&(s.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(s.renderOrder=t.renderOrder),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.layers&&(s.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)s.add(this.parseObject(o[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];s.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(s.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance)}}return s}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const pd={UVMapping:bt,CubeReflectionMapping:_t,CubeRefractionMapping:wt,EquirectangularReflectionMapping:Mt,EquirectangularRefractionMapping:St,CubeUVReflectionMapping:Et},gd={RepeatWrapping:Tt,ClampToEdgeWrapping:Lt,MirroredRepeatWrapping:Pt},fd={NearestFilter:Rt,NearestMipmapNearestFilter:Dt,NearestMipmapLinearFilter:zt,LinearFilter:Ht,LinearMipmapNearestFilter:Nt,LinearMipmapLinearFilter:Ut};class md extends Ou{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Pu.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Pu.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let Ad;md.prototype.isImageBitmapLoader=!0;const Cd={getContext:function(){return void 0===Ad&&(Ad=new(window.AudioContext||window.webkitAudioContext)),Ad},setContext:function(t){Ad=t}};class vd extends Ou{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Bu(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{const t=n.slice(0);Cd.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}}class yd extends ad{constructor(t,e,n=1){super(void 0,n);const i=(new hi).set(t),r=(new hi).set(e),s=new wi(i.r,i.g,i.b),o=new wi(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}}yd.prototype.isHemisphereLightProbe=!0;class Id extends ad{constructor(t,e=1){super(void 0,e);const n=(new hi).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Id.prototype.isAmbientLightProbe=!0;const xd=new nr,bd=new nr,_d=new nr;class wd{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Os,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Os,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,_d.copy(t.projectionMatrix);const n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(Nn*e.fov*.5)/e.zoom;let s,o;bd.elements[12]=-n,xd.elements[12]=n,s=-r*e.aspect+i,o=r*e.aspect+i,_d.elements[0]=2*e.near/(o-s),_d.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(_d),s=-r*e.aspect-i,o=r*e.aspect-i,_d.elements[0]=2*e.near/(o-s),_d.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(_d)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(bd),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(xd)}}class Md{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Sd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Sd();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Sd(){return("undefined"==typeof performance?Date:performance).now()}const Ed=new wi,Td=new _i,Ld=new wi,Pd=new wi;class Rd extends Sr{constructor(){super(),this.type="AudioListener",this.context=Cd.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Md}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ed,Td,Ld),Pd.set(0,0,-1).applyQuaternion(Td),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Ed.x,t),e.positionY.linearRampToValueAtTime(Ed.y,t),e.positionZ.linearRampToValueAtTime(Ed.z,t),e.forwardX.linearRampToValueAtTime(Pd.x,t),e.forwardY.linearRampToValueAtTime(Pd.y,t),e.forwardZ.linearRampToValueAtTime(Pd.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Ed.x,Ed.y,Ed.z),e.setOrientation(Pd.x,Pd.y,Pd.z,n.x,n.y,n.z)}}class Dd extends Sr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Od=new wi,zd=new _i,Bd=new wi,Hd=new wi;class Nd extends Dd{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Od,zd,Bd),Hd.set(0,0,1).applyQuaternion(zd);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Od.x,t),e.positionY.linearRampToValueAtTime(Od.y,t),e.positionZ.linearRampToValueAtTime(Od.z,t),e.orientationX.linearRampToValueAtTime(Hd.x,t),e.orientationY.linearRampToValueAtTime(Hd.y,t),e.orientationZ.linearRampToValueAtTime(Hd.z,t)}else e.setPosition(Od.x,Od.y,Od.z),e.setOrientation(Hd.x,Hd.y,Hd.z)}}class Fd{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class Ud{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]}_slerp(t,e,n,i){_i.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;_i.multiplyQuaternionsFlat(t,s,t,e,t,n),_i.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*s+t[n+o]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const Gd=new RegExp("[\\[\\]\\.:\\/]","g"),kd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Wd=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Vd=/(WCOD+)?/.source.replace("WCOD",kd),jd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Yd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Xd=new RegExp("^"+Wd+Vd+jd+Yd+"$"),Qd=["material","materials","bones"];class Zd{constructor(t,e,n){this.path=e,this.parsedPath=n||Zd.parseTrackName(e),this.node=Zd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Zd.Composite(t,e,n):new Zd(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Gd,"")}static parseTrackName(t){const e=Xd.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Qd.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Zd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const s=t[i];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zd.Composite=class{constructor(t,e,n){const i=n||Zd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Zd.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zd.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zd.prototype.GetterByBindingType=[Zd.prototype._getValue_direct,Zd.prototype._getValue_array,Zd.prototype._getValue_arrayElement,Zd.prototype._getValue_toArray],Zd.prototype.SetterByBindingTypeAndVersioning=[[Zd.prototype._setValue_direct,Zd.prototype._setValue_direct_setNeedsUpdate,Zd.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zd.prototype._setValue_array,Zd.prototype._setValue_array_setNeedsUpdate,Zd.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zd.prototype._setValue_arrayElement,Zd.prototype._setValue_arrayElement_setNeedsUpdate,Zd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zd.prototype._setValue_fromArray,Zd.prototype._setValue_fromArray_setNeedsUpdate,Zd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qd{constructor(){this.uuid=Un(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let o=void 0,a=t.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const h=arguments[c],u=h.uuid;let d=e[u];if(void 0===d){d=a++,e[u]=d,t.push(h);for(let t=0,e=s;t!==e;++t)r[t].push(new Zd(h,n[t],i[t]))}else if(d<l){o=t[d];const a=--l,c=t[a];e[c.uuid]=d,t[d]=c,e[u]=a,t[a]=h;for(let t=0,e=s;t!==e;++t){const e=r[t],s=e[a];let o=e[d];e[d]=s,void 0===o&&(o=new Zd(h,n[t],i[t])),e[a]=o}}else t[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,l=e[a];if(void 0!==l&&l>=r){const s=r++,c=t[s];e[c.uuid]=l,t[l]=c,e[a]=s,t[s]=o;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[s],r=e[l];e[l]=i,e[s]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=t.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,l=e[a];if(void 0!==l)if(delete e[a],l<r){const o=--r,a=t[o],c=--s,h=t[c];e[a.uuid]=l,t[l]=a,e[h.uuid]=o,t[o]=h,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[o],r=e[c];e[l]=i,e[o]=r,e.pop()}}else{const r=--s,o=t[r];r>0&&(e[o.uuid]=l),t[l]=o,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,h=new Array(l);i=r.length,n[t]=i,s.push(t),o.push(e),r.push(h);for(let n=c,i=a.length;n!==i;++n){const i=a[n];h[n]=new Zd(i,t,e)}return h}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}qd.prototype.isAnimationObjectGroup=!0;class Jd{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,o=new Array(s),a={endingStart:We,endingEnd:We};for(let t=0;t!==s;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ne,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Xe:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(o);break;case Ye:default:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=n===Fe;if(0===t)return-1===r?i:s&&1==(1&r)?e-i:i;if(n===He){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Ve,i.endingEnd=Ve):(i.endingStart=t?this.zeroSlopeAtStart?Ve:We:je,i.endingEnd=e?this.zeroSlopeAtEnd?Ve:We:je)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}class Kd extends zn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let h=c[l];if(void 0!==h)++h.referenceCount,s[t]=h;else{if(h=s[t],void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;h=new Ud(Zd.create(n,l,i),r.ValueTypeName,r.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,a,l),s[t]=h}o[t].resultBuffer=h.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new vu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"==typeof t?Tu.findByName(i,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Ye),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Jd(this,s,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?Tu.findByName(n,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let o=0;o!==n;++o){e[o]._update(i,t,r,s)}const o=this._bindings,a=this._nActiveBindings;for(let t=0;t!==a;++t)o[t].apply(s);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Kd.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class $d{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new $d(void 0===this.value.clone?this.value:this.value.clone())}}class tp extends Tl{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}tp.prototype.isInstancedInterleavedBuffer=!0;class ep{constructor(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}ep.prototype.isGLBufferAttribute=!0;class np{constructor(t,e,n=0,i=1/0){this.ray=new er(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new pr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return rp(t,this,n,e),n.sort(ip),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)rp(t[i],this,n,e);return n.sort(ip),n}}function ip(t,e){return t.distance-e.distance}function rp(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)rp(i[t],e,n,!0)}}class sp{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Gn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class op{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const ap=new Qn;class lp{constructor(t=new Qn(1/0,1/0),e=new Qn(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ap.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ap.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}lp.prototype.isBox2=!0;const cp=new wi,hp=new wi;class up{constructor(t=new wi,e=new wi){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){cp.subVectors(t,this.start),hp.subVectors(this.end,this.start);const n=hp.dot(hp);let i=hp.dot(cp)/n;return e&&(i=Gn(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const dp=new wi;class pp extends Sr{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new ls,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,n=32;t<n;t++,e++){const r=t/n*Math.PI*2,s=e/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new $r(i,3));const r=new gc({fog:!1,toneMapped:!1});this.cone=new bc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),dp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gp=new wi,fp=new nr,mp=new nr;class Ap extends bc{constructor(t){const e=function t(e){const n=[];!0===e.isBone&&n.push(e);for(let i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new ls,i=[],r=[],s=new hi(0,0,1),o=new hi(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new $r(i,3)),n.setAttribute("color",new $r(r,3));super(n,new gc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");mp.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(fp.multiplyMatrices(mp,r.matrixWorld),gp.setFromMatrixPosition(fp),i.setXYZ(n,gp.x,gp.y,gp.z),fp.multiplyMatrices(mp,r.parent.matrixWorld),gp.setFromMatrixPosition(fp),i.setXYZ(n+1,gp.x,gp.y,gp.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class Cp extends Ms{constructor(t,e,n){super(new Jh(e,4,2),new Gr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vp=new wi,yp=new hi,Ip=new hi;class xp extends Sr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new Qh(e);i.rotateY(.5*Math.PI),this.material=new Gr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new Vr(s,3)),this.add(new Ms(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");yp.copy(this.light.color),Ip.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?yp:Ip;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(vp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class bp extends bc{constructor(t=10,e=10,n=4473924,i=8947848){n=new hi(n),i=new hi(i);const r=e/2,s=t/e,o=t/2,a=[],l=[];for(let t=0,c=0,h=-o;t<=e;t++,h+=s){a.push(-o,0,h,o,0,h),a.push(h,0,-o,h,0,o);const e=t===r?n:i;e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3}const c=new ls;c.setAttribute("position",new $r(a,3)),c.setAttribute("color",new $r(l,3));super(c,new gc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class _p extends bc{constructor(t=10,e=16,n=8,i=64,r=4473924,s=8947848){r=new hi(r),s=new hi(s);const o=[],a=[];for(let n=0;n<=e;n++){const i=n/e*(2*Math.PI),l=Math.sin(i)*t,c=Math.cos(i)*t;o.push(0,0,0),o.push(l,0,c);const h=1&n?r:s;a.push(h.r,h.g,h.b),a.push(h.r,h.g,h.b)}for(let e=0;e<=n;e++){const l=1&e?r:s,c=t-t/n*e;for(let t=0;t<i;t++){let e=t/i*(2*Math.PI),n=Math.sin(e)*c,r=Math.cos(e)*c;o.push(n,0,r),a.push(l.r,l.g,l.b),e=(t+1)/i*(2*Math.PI),n=Math.sin(e)*c,r=Math.cos(e)*c,o.push(n,0,r),a.push(l.r,l.g,l.b)}}const l=new ls;l.setAttribute("position",new $r(o,3)),l.setAttribute("color",new $r(a,3));super(l,new gc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const wp=new wi,Mp=new wi,Sp=new wi;class Ep extends Sr{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let i=new ls;i.setAttribute("position",new $r([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new gc({fog:!1,toneMapped:!1});this.lightPlane=new yc(i,r),this.add(this.lightPlane),i=new ls,i.setAttribute("position",new $r([0,0,0,0,0,1],3)),this.targetLine=new yc(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){wp.setFromMatrixPosition(this.light.matrixWorld),Mp.setFromMatrixPosition(this.light.target.matrixWorld),Sp.subVectors(Mp,wp),this.lightPlane.lookAt(Mp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mp),this.targetLine.scale.z=Sp.length()}}const Tp=new wi,Lp=new Ds;class Pp extends bc{constructor(t){const e=new ls,n=new gc({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={},o=new hi(16755200),a=new hi(16711680),l=new hi(43775),c=new hi(16777215),h=new hi(3355443);function u(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.setAttribute("position",new $r(i,3)),e.setAttribute("color",new $r(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const t=this.geometry,e=this.pointMap;Lp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Rp("c",e,t,Lp,0,0,-1),Rp("t",e,t,Lp,0,0,1),Rp("n1",e,t,Lp,-1,-1,-1),Rp("n2",e,t,Lp,1,-1,-1),Rp("n3",e,t,Lp,-1,1,-1),Rp("n4",e,t,Lp,1,1,-1),Rp("f1",e,t,Lp,-1,-1,1),Rp("f2",e,t,Lp,1,-1,1),Rp("f3",e,t,Lp,-1,1,1),Rp("f4",e,t,Lp,1,1,1),Rp("u1",e,t,Lp,.7,1.1,-1),Rp("u2",e,t,Lp,-.7,1.1,-1),Rp("u3",e,t,Lp,0,2,-1),Rp("cf1",e,t,Lp,-1,0,1),Rp("cf2",e,t,Lp,1,0,1),Rp("cf3",e,t,Lp,0,-1,1),Rp("cf4",e,t,Lp,0,1,1),Rp("cn1",e,t,Lp,-1,0,-1),Rp("cn2",e,t,Lp,1,0,-1),Rp("cn3",e,t,Lp,0,-1,-1),Rp("cn4",e,t,Lp,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rp(t,e,n,i,r,s,o){Tp.set(r,s,o).unproject(i);const a=e[t];if(void 0!==a){const t=n.getAttribute("position");for(let e=0,n=a.length;e<n;e++)t.setXYZ(a[e],Tp.x,Tp.y,Tp.z)}}const Dp=new Ei;class Op extends bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ls;r.setIndex(new Vr(n,1)),r.setAttribute("position",new Vr(i,3)),super(r,new gc({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Dp.setFromObject(this.object),Dp.isEmpty())return;const e=Dp.min,n=Dp.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return bc.prototype.copy.call(this,t),this.object=t.object,this}}class zp extends bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new ls;i.setIndex(new Vr(n,1)),i.setAttribute("position",new $r([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new gc({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Bp extends yc{constructor(t,e=1,n=16776960){const i=n,r=new ls;r.setAttribute("position",new $r([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new gc({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const s=new ls;s.setAttribute("position",new $r([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new Ms(s,new Gr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?O:D,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Hp=new wi;let Np,Fp;class Up extends Sr{constructor(t=new wi(0,0,1),e=new wi(0,0,0),n=1,i=16776960,r=.2*n,s=.2*r){super(),this.type="ArrowHelper",void 0===Np&&(Np=new ls,Np.setAttribute("position",new $r([0,0,0,0,1,0],3)),Fp=new ah(0,.5,1,5,1),Fp.translate(0,-.5,0)),this.position.copy(e),this.line=new yc(Np,new gc({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ms(Fp,new Gr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Hp.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Hp,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class Gp extends bc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ls;n.setAttribute("position",new $r(e,3)),n.setAttribute("color",new $r([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new gc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new hi,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kp{constructor(){this.type="ShapePath",this.color=new hi,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ih,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){return this.currentPath.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new mh;r.curves=i.curves,e.push(r)}return e}function i(t,e){const n=e.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=e[r],o=e[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[s],a=-a,o=e[r],l=-l),t.y<n.y||t.y>o.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-a*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(o.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=o.x)return!0}}return i}const r=kh.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);let o,a,l;const c=[];if(1===s.length)return a=s[0],l=new mh,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=t?!h:h;const u=[],d=[];let p,g,f=[],m=0;d[m]=void 0,f[m]=[];for(let e=0,n=s.length;e<n;e++)a=s[e],p=a.getPoints(),o=r(p),o=t?!o:o,o?(!h&&d[m]&&m++,d[m]={s:new mh,p:p},d[m].s.curves=a.curves,h&&m++,f[m]=[]):f[m].push({h:a,p:p[0]});if(!d[0])return n(s);if(d.length>1){let t=!1,e=0;for(let t=0,e=d.length;t<e;t++)u[t]=[];for(let n=0,r=d.length;n<r;n++){const r=f[n];for(let s=0;s<r.length;s++){const o=r[s];let a=!0;for(let r=0;r<d.length;r++)i(o.p,d[r].p)&&(n!==r&&e++,a?(a=!1,u[r].push(o)):t=!0);a&&u[n].push(o)}}e>0&&!1===t&&(f=u)}for(let t=0,e=d.length;t<e;t++){l=d[t].s,c.push(l),g=f[t];for(let t=0,e=g.length;t<e;t++)l.holes.push(g[t].h)}return c}}class Wp{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Gn(t,-65504,65504),jp[0]=t;const e=Yp[0],n=e>>23&511;return Xp[n]+((8388607&e)>>Qp[n])}static fromHalfFloat(t){const e=t>>10;return Yp[0]=Zp[Jp[e]+(1023&t)]+qp[e],jp[0]}}const Vp=new ArrayBuffer(4),jp=new Float32Array(Vp),Yp=new Uint32Array(Vp),Xp=new Uint32Array(512),Qp=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(Xp[t]=0,Xp[256|t]=32768,Qp[t]=24,Qp[256|t]=24):e<-14?(Xp[t]=1024>>-e-14,Xp[256|t]=1024>>-e-14|32768,Qp[t]=-e-1,Qp[256|t]=-e-1):e<=15?(Xp[t]=e+15<<10,Xp[256|t]=e+15<<10|32768,Qp[t]=13,Qp[256|t]=13):e<128?(Xp[t]=31744,Xp[256|t]=64512,Qp[t]=24,Qp[256|t]=24):(Xp[t]=31744,Xp[256|t]=64512,Qp[t]=13,Qp[256|t]=13)}const Zp=new Uint32Array(2048),qp=new Uint32Array(64),Jp=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;0==(8388608&e);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,Zp[t]=e|n}for(let t=1024;t<2048;++t)Zp[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)qp[t]=t<<23;qp[31]=1199570944,qp[32]=2147483648;for(let t=33;t<63;++t)qp[t]=2147483648+(t-32<<23);qp[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(Jp[t]=1024);const Kp=0,$p=1,tg=0,eg=1,ng=2;function ig(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function rg(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}class sg extends Lc{constructor(t,e){console.warn("THREE.PointCloud has been renamed to THREE.Points."),super(t,e)}}class og extends Yl{constructor(t){console.warn("THREE.Particle has been renamed to THREE.Sprite."),super(t)}}class ag extends Lc{constructor(t,e){console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),super(t,e)}}class lg extends wc{constructor(t){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),super(t)}}class cg extends wc{constructor(t){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),super(t)}}class hg extends wc{constructor(t){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),super(t)}}class ug extends wi{constructor(t,e,n){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),super(t,e,n)}}class dg extends Vr{constructor(t,e){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),super(t,e),this.setUsage(_n)}}class pg extends jr{constructor(t,e){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),super(t,e)}}class gg extends Yr{constructor(t,e){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),super(t,e)}}class fg extends Xr{constructor(t,e){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),super(t,e)}}class mg extends Qr{constructor(t,e){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),super(t,e)}}class Ag extends Zr{constructor(t,e){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),super(t,e)}}class Cg extends qr{constructor(t,e){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),super(t,e)}}class vg extends Jr{constructor(t,e){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),super(t,e)}}class yg extends $r{constructor(t,e){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),super(t,e)}}class Ig extends ts{constructor(t,e){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),super(t,e)}}Bc.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Bc.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},ih.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)};class xg extends Gp{constructor(t){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),super(t)}}class bg extends Op{constructor(t,e){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),super(t,e)}}class _g extends bc{constructor(t,e){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),super(new fh(t.geometry),new gc({color:void 0!==e?e:16777215}))}}bp.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ap.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};class wg extends bc{constructor(t,e){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),super(new nu(t.geometry),new gc({color:void 0!==e?e:16777215}))}}Ou.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),cd.extractUrlBase(t)},Ou.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};class Mg extends Bu{constructor(t){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),super(t)}}class Sg extends Gu{constructor(t){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),super(t)}}lp.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},lp.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},lp.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},lp.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Ei.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ei.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ei.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Ei.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Ei.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},dr.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},Xi.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Vs.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},up.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Zn.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Zn.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Zn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Zn.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Zn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Zn.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},nr.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},nr.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},nr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new wi).setFromMatrixColumn(this,3)},nr.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},nr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},nr.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},nr.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},nr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},nr.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},nr.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},nr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},nr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},nr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},nr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},nr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},nr.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},nr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},nr.prototype.makeFrustum=function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)},nr.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Gs.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},_i.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},_i.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},er.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},er.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},er.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Nr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Nr.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Nr.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Nr.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Nr.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Nr.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Nr.getBarycoord(t,e,n,i,r)},Nr.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Nr.getNormal(t,e,n,i)},mh.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},mh.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new jh(this,t)},mh.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qh(this,t)},Qn.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Qn.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Qn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},wi.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},wi.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},wi.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},wi.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},wi.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},wi.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},wi.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},wi.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},wi.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ai.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ai.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Sr.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Sr.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Sr.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Sr.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Sr.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Sr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ms.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Ms.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Qe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),nc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Os.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Wu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Vr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===_n},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(_n)}}}),Vr.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?_n:bn),this},Vr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Vr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ls.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},ls.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Vr(arguments[1],arguments[2])))},ls.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},ls.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ls.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ls.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},ls.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(ls.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Tl.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?_n:bn),this},Tl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},jh.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},jh.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},jh.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},El.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},$d.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ur.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new hi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===B}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Rs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),_l.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},_l.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},_l.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},_l.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},_l.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},_l.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},_l.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},_l.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},_l.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},_l.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},_l.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},_l.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},_l.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},_l.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},_l.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},_l.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},_l.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},_l.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},_l.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},_l.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},_l.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},_l.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},_l.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},_l.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},_l.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(_l.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Ke:Je}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(pl.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});class Eg extends Hs{constructor(t,e,n){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),super(t,n)}}function Tg(){console.error("THREE.CanvasRenderer has been removed")}function Lg(){console.error("THREE.JSONLoader has been removed.")}Object.defineProperties(Ci.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Dd.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new vd).load(t,(function(t){e.setBuffer(t)})),this},Fd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},zs.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},zs.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},di.crossOrigin=void 0,di.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new ku;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},di.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Uu;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},di.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},di.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Pg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Rg(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}class Dg extends ls{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class Og extends ls{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function zg(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Bg(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function Hg(){console.error("THREE.ImmediateRenderObject has been removed.")}class Ng extends Ci{constructor(t,e,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(t,e,n),this.samples=4}}class Fg extends vi{constructor(t,e,n,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(t,e,n,i)}}class Ug extends Ii{constructor(t,e,n,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(t,e,n,i)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:x}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=x);const Gg=i;function kg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(t,e)||Vg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wg(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vg(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Vg(t,e){if(t){if("string"==typeof t)return jg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jg(t,e):void 0}}function jg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Yg(){this.gpt_models=new Map,this.gpt_lights=new Map,this.scene=new Gg.Scene}Yg.prototype.createObjects=function(){console.error("GPT_Scene.createObjects: Not implemented")},Yg.prototype.updateObjects=function(t){console.error("GPT_Scene.updateObjects: Not implemented")},Yg.prototype.createLights=function(){console.error("GPT_Scene.createLights: Not implemented")},Yg.prototype.updateLights=function(t){console.error("GPT_Scene.updateLights: Not implemented")},Yg.prototype.setupScene=function(){this.createObjects();var t,e=Wg(this.gpt_models);try{for(e.s();!(t=e.n()).done;){var n=kg(t.value,2),i=n[0],r=n[1];r.name=i,this.scene.add(r),console.debug("GPT_Scene: added "+i)}}catch(t){e.e(t)}finally{e.f()}console.debug("GPT_Scene: total models: "+this.gpt_models.size),this.createLights();var s,o=Wg(this.gpt_lights);try{for(o.s();!(s=o.n()).done;){var a=kg(s.value,2),l=a[0],c=a[1];c.name=l,this.scene.add(c),console.debug("GPT_Scene: added "+l)}}catch(t){o.e(t)}finally{o.f()}console.debug("GTP_Scene: total lights: "+this.gpt_lights.size)},Yg.prototype.updateScene=function(t){this.updateObjects(t),this.updateLights(t)},Yg.prototype.removeModelFromScene=function(t){var e=this.scene.getObjectByName(t);void 0!==e?(this.scene.remove(e),void 0===this.scene.getObjectByName(t)?(this.gpt_models[t]=null,this.gpt_models.delete(t),void 0===this.gpt_models.get(t)?console.debug("GPT_Scene: removed '"+t+"'. Total models: "+this.gpt_models.size):console.error("GPT_Scene.removeModelFromScene: could not remove '"+t+"'. Object stil in gpt_models")):console.error("GPT_Scene.removeModelFromScene: could not remove '"+t+"'. Object still in THREE.Scene")):console.error("GPT_Scene.removeModelFromScene: could not remove '"+t+"'. Object undefined in THREE.Scene")},Yg.prototype.AddModelToScene=function(t,e){this.gpt_models.set(t,e);var n=this.gpt_models.get(t);n.name=t,this.scene.add(n),void 0!==this.gpt_models.get(t)?console.debug("GPT_Scene: added '"+t+"'. Total models: "+this.gpt_models.size):console.error("GPT_Scene.AddModelToScene: could not add '"+t+"'")};const Xg=Yg;function Qg(){this.geometry=this.get_geometry(),void 0!==this.geometry?(this.material=this.get_material(),void 0!==this.material?this.mesh=new Gg.Mesh(this.geometry,this.material):console.error("Material undefined when constructing model")):console.error("Geometry undefined when constructing model")}Qg.prototype.get_geometry=function(){console.error("GPT_Model.get_geometry: Not implemented")},Qg.prototype.get_material=function(){console.error("GPT_Model.get_material: Not implemented")},Qg.prototype.dispose_buffers=function(){this.geometry.dispose(),this.material.dispose(),this.geometry=null,this.material=null,this.mesh=null};const Zg=Qg;function qg(){this.points3d=void 0,this.triangles_indices=void 0,this.vertices_coordinates=this.getArrayVertices(),this.edges_indices=this.getArrayEdges(),this.normals=this.calculateNormals()}qg.prototype.getArrayVertices=function(){console.error("GPT_Coords.getArrayVertices: not implemented")},qg.prototype.getArrayEdges=function(){console.error("GPT_Coords.getArrayEdges: not implemented")},qg.prototype.calculateNormals=function(){this.points3d=[];for(var t=0;t<this.vertices_coordinates.length;t+=3)this.points3d.push(new Gg.Vector3(this.vertices_coordinates[t],this.vertices_coordinates[t+1],this.vertices_coordinates[t+2]));function e(t,e,n){this.a=t,this.b=e,this.c=n}this.triangles_indices=[];for(var n=0;n<this.edges_indices.length;n+=3)this.triangles_indices.push(new e(this.edges_indices[n],this.edges_indices[n+1],this.edges_indices[n+2]));for(var i=new Float32Array(3*this.triangles_indices.length),r=0,s=0;r<this.triangles_indices.length;r++,s+=3){var o=this.points3d[this.triangles_indices[r].a],a=this.points3d[this.triangles_indices[r].b],l=this.points3d[this.triangles_indices[r].c],c=new Gg.Vector3(a.x-o.x,a.y-o.y,a.z-o.z),h=new Gg.Vector3(l.x-a.x,l.y-a.y,l.z-a.z),u=new Gg.Vector3(c.y*h.z-c.z*h.y,c.x*h.z-c.z*h.x,c.x*h.y-c.y*h.x),d=Math.sqrt(u.x*u.x+u.y*u.y+u.z*u.z);u.x=u.x/d,u.y=u.y/d,u.z=u.z/d,i[s]=u.x,i[s+1]=u.y,i[s+2]=u.z}return i},qg.prototype.getUVs=function(t){if(void 0!==t){t.computeBoundingBox();for(var e=t.boundingBox.max,n=t.boundingBox.min,i=new Gg.Vector2(0-n.x,0-n.y),r=new Gg.Vector2(e.x-n.x,e.y-n.y),s=new Float32Array(6*this.triangles_indices.length),o=0,a=0;o<this.triangles_indices.length;o++,a+=6){var l=this.points3d[this.triangles_indices[o].a],c=this.points3d[this.triangles_indices[o].b],h=this.points3d[this.triangles_indices[o].c];s[a]=(l.x+i.x)/r.x,s[a+1]=(l.y+i.y)/r.y,s[a+2]=(c.x+i.x)/r.x,s[a+3]=(c.y+i.y)/r.y,s[a+4]=(h.x+i.x)/r.x,s[a+5]=(h.y+i.y)/r.y}return s}console.error("GPT_Coords.getUVs: 'geom_' is undefined")};const Jg=qg;function Kg(){Jg.call(this)}Kg.prototype=Object.create(Jg.prototype),Kg.prototype.constructor=Kg,Kg.prototype.getArrayVertices=function(){return new Float32Array([.00469467,.0921578,-.0204182,-.085233,.150314,-.00360416,-.0188786,.057975,.0081125,-.0188455,.056925,.0084625,-.018723,.058325,.00817736,.0385879,.0921634,.0125963,.0196617,.0611276,.00644893,.0385455,.0920224,.0125561,.0451108,.0556533,-.0035831,-.0282391,.177947,-.021844,.0355439,.0557002,.0045928,-.0278977,.178197,-.0219279,.0644119,.119596,-.0121547,.0361999,.0675599,.0157651,.00457744,.0919857,-.0205073,.0427183,.0796915,.0182462,.0122147,.0769013,-.0127457,-.0166542,.0562228,.00950492,.038201,.0919103,.0123829,-.0342434,.0571127,-.00650629,.014549,.0604229,.00150908,.0383965,.092097,.0125412,-.0345574,.0571448,-.00779774,.0157961,.0749277,-.00431026,.0423374,.0824196,.0146436,.0413234,.0816277,.0135528,.040892,.0748925,.0161152,.0366215,.0609514,-.00314977,.0408935,.0749286,.0159742,.0408265,.0785909,.0117576,-.0629624,.154814,-.0085204,.0181082,.119603,-.0205582,.0438356,.0797712,.0201338,.0408499,.0790064,.0114748,.0424125,.0827285,.0160815,-.0341669,.0570231,-.00622611,.0645267,.120767,-.0126395,-.0342363,.0570887,-.0071484,-.0852799,.1503,-.00356141,.0414352,.0820572,.0134733,.0437518,.0813316,.0181727,.0180523,.119524,-.0204299,.0425629,.0792649,.0182377,.0435232,.0840673,.0161356,-.0625554,.159593,-.0170428,.0408049,.0749512,.015889,.0432302,.0805222,.0181764,-.0625419,.160381,-.0158452,-.0186996,.0569787,.00859578,.0328886,.0564243,688931e-9,-.062897,.154797,-.00847856,.0421972,.082068,.0145546,-.0626586,.154804,-.00893433,.0437789,.0797943,.0204091,.0429342,.0829346,.0162496,.0378885,.0626447,-.00340567,-.0184595,.0579394,.00846582,-.0170562,.0574092,.00866344,-.0628351,.159515,-.0169938,-.0315611,.148853,-.0327361,.0155399,.0751813,-.00420264,-.0854274,.150388,-.00368102,.0448218,.0557309,-.00403649,.0643594,.120288,-.0124571,.018379,.120006,-.0203369,-.0851452,.150409,-.00352937,.0382629,.0899159,.012416,.0431033,.0831349,.0160977,.041172,.0812379,.0135096,-.0621101,.159841,-.0166274,.0644184,.120334,-.0125578,-.0630623,.160126,-.0161337,.0449713,.0560852,-.00283856,-.018143,.0555409,.00886103,-.0181372,.0582792,.00799082,.0120575,.0756513,-.0132287,-.0630417,.154889,-.00874295,-.0187117,.0568142,.00821313,.012211,.0767917,-.0128487,-.0178818,.0573475,.00856072,-.0348033,.0572034,-.00807189,.042763,.0830041,.015846,.0645297,.121393,-.012818,-.0596857,.140435,-.0221153,.0431692,.0834292,.0162144,-.0200132,.0578932,.00810183,.0156175,.074096,-.00459014,-.0559052,.143866,-.0143259,-.0184182,.0560023,.00869016,-.05948,.140331,-.0214854,-.084686,.1502,-.00388223,.0157487,.0757431,-.0039805,-.06177,.159987,-.0164026,.0408301,.0790994,.0113892,.0428389,.0826654,.0153925,.0390604,.0771979,.0148853,.0379069,.0897614,.0123281,-.0564409,.144057,-.0132144,-.0166319,.0570268,.00835507,.0414961,.0819914,.0145639,.0374873,.0747436,.0149003,.0424033,.0821005,.0146894,-.0174138,.0557777,.00932506,-.0594748,.140024,-.0222908,.0367312,.0613027,-.00279656,-.0637152,.160331,-.0162532,.0379894,.0628154,-.00391244,-.0168965,.0568028,.00904264,.0183296,.0621395,.00583124,.0335289,.0558104,.00252147,-.0173695,.0565665,.00851819,.0397623,.0790237,.0132241,-.0621615,.160141,-.0167097,-.0185705,.0574335,.00829876,.00459435,.0931747,-.0222849,.0147402,.060303,.00139708,-.0847116,.150976,-.00536018,.0429865,.080761,.0189283,.0407392,.0825824,.0148627,.018338,.119277,-.0188311,-.0341754,.0571492,-.00759792,-.0628463,.159421,-.0170533,.0421526,.0826016,.0139196,-.0471261,.0555395,-.00104418,-.0203277,.0566736,.00870809,.0330737,.0584537,-258582e-9,-.0605508,.178487,458678e-9,.0159572,.0765152,-.00632839,.043192,.0821684,.0162647,-.0468498,.164316,.00368328,.0423153,.0812656,.0123404,-.0187241,.0685204,-.033087,-.0195984,.165445,-.0050343,.0388394,.0771612,.0140544,-.0309557,.161063,-.039098,-.0347418,.115026,-.0147939,.0415808,.0808832,.0146118,.0344814,.0848633,-.0341223,.0376731,.106414,.0166606,-.0181463,.0546137,.00975073,.0460029,.0786687,-.0166917,.0363469,.0599169,-.00486381,.0757712,.145885,-.0110142,.0446078,.082909,.0182634,-.0823024,.149549,-.00768588,.0339952,.0979349,.0221766,.03682,.0922565,.0125312,-.0875727,.171905,.00159423,.0124206,.11232,-.024456,.037733,.0900332,.0120424,.0633675,.0805352,.00364874,-.0564555,.0551266,-.0029089,.0364113,.0557749,.00477431,.0176898,.0605558,.00573245,.0378486,.105486,.00786045,-.0355493,.165038,-.00130911,.0368102,.064056,.0168622,.0442264,.0766697,.00880872,-.0409522,.174498,-.0330665,-.0359989,.143354,-60985e-8,.0499069,.0735242,-.0131676,-.0378205,.178256,-.013649,.0105616,.114164,-.0285177,-.030022,.166308,-.0413553,-.033862,.197358,-.0205959,-.0913433,.163904,-.0117408,.039961,.0934142,.0313281,.0419232,.0770746,.0148292,.0562066,.0549435,.0119139,.0663311,.123592,-.0181827,.0374792,.0727559,.0261967,-.033737,.169372,-.0395799,.0500814,.0761795,-.00169064,.0685287,.0563522,233788e-9,.0793267,.0874515,-.00196231,-.0965275,.154481,-175593e-9,.0896636,.140323,-.00883596,.0650946,.0660269,-.0111539,.035919,.0556761,.0240697,-.0888343,.181848,10237e-8,.014167,.154523,-.0120259,.0420709,.0777072,.0165854,-.0876439,.172652,-.00663972,.0842124,.08875,.00926071,.0277042,.0629097,-.0430929,-.0159093,.0599689,.0254182,-.0426251,.109198,-.0088685,-.0434535,.0686754,.032279,.00911686,.0657072,.0218626,-.0607714,.147651,.0104702,.0460407,.0528027,-.0108052,.0735814,.131349,-.00953801,-.037137,.16006,-984085e-9,-.0994194,.153113,.00481236,.0380868,.0867034,.0121361,-.0821078,.163587,-.00670125,-.0114678,.150578,-.0103121,.0447233,.0857876,.0171688,-.0401814,.177013,-.0236266,-.0652643,.128782,-.00765125,-.0530696,.0567786,-.0324351,.035354,.0835931,.0304703,.0570171,.120356,-.0303037,.0285655,.0711485,.0197151,-.0875276,.140218,-.00543433,-.0453584,.166584,-.0356048,.0338689,.0689744,-.0432019,.0774321,.12926,-.0200339,.0881444,.133617,-.00871829,.0647782,.0908128,.0148009,.0680362,.137869,-.0125166,-.079682,.154783,.0118993,-.00757508,.18955,-.032158,-.0809613,.0631317,-.00788482,.0379121,.0553806,-.0463647,-.0227702,.141315,-.0194662,.0267399,.0652315,.0103642,-.0285777,.0528065,-.0343967,.0886265,.140623,-.0131982,-.0207283,.125617,-.0172717,-.0604611,.0868231,.0186109,-.0381098,.176847,-.00822825,-.0824044,.0985621,.00666781,-.040434,.168982,-.0354267,.0752735,.0619123,-.00365694,.0295909,.0710672,-.047539,.0609374,.0539166,.0175242,-.00823629,.145703,-.0203431,.0117286,.0672135,.00610971,-.104742,.142607,.00187318,-.0527254,.0561799,.034995,-.0297241,.159563,-.0299645,-.0198566,.156424,-.00577688,.0490921,.0686013,-.032485,-.0110596,.0830652,.00614134,-.0967243,.165682,-.00899468,-.0499729,.153846,.00446547,-.0783825,.0588483,-.0397415,-.0316129,.175333,-.00484128,.0114125,.0589165,.00254174,.00219384,.149952,-.0236918,-.0318792,.185158,-.0238604,-.0527552,.142835,-.0174804,-.0674674,.17003,.00946613,-.0371101,.0557097,-.0248221,-.0505921,.175878,-.0363478,.0602089,.0654606,-.0186906,.0806536,.0958676,.0135267,-.0508982,.141154,-.0229469,.0786278,.0748394,.0201212,.0443848,.0855203,.0190124,.0599833,.108371,-.0177734,-.0600724,.166921,.00821945,.0311752,.0677376,-.048082,-.0311102,.196378,-.0230964,-.0134392,.0612181,.00877968,-.0227887,.0983964,.0014704,.0952087,.149311,-.00691576,-.056332,.1331,-.0211893,-.0223226,.0903365,-.0356638,.0631978,.0541463,-.00191583,.0417281,.0773604,.0193256,-.0976347,.175061,-.00735415,.09549,.150067,-.00425868,.0159362,.0636321,.00306293,.078715,.126111,-.0164359,-.0343714,.0840009,.0154661,-.0520066,.178797,68396e-8,.0391014,.0738515,.0137402,.0463497,.0933017,.0285903,-.0315948,.173853,-.0356105,-.0468813,.16173,-.0330998,-.0480128,.180463,-.0373582,-.0428733,.141566,-.032726,.065895,.0958967,.00864006,.0406229,.0643292,-.0284364,-.0588589,.16524,.010194,.00382896,.0901826,-.0206155,-.0298744,.149236,-.0330205,-.0309966,.0976039,-.0171612,.0151765,.0739549,-.00691437,.0241512,.147721,-.00389856,-.012502,.0791933,.0125981,-.0667977,.113175,.00822546,-.00620279,.100439,.00312991,.0259349,.0634209,.00836385,.0775258,.0678879,.0161288,-.0349835,.0938634,-.00659456,-.0580856,.156764,-.0214117,-.069352,.163354,-.00618201,.0392897,.0829929,-.00339661,.031088,.12894,-.0290689,.0795562,.0781032,.0031977,-.021445,.0790707,.00993411,-.0120415,.0648784,.0215518,.0286718,.111434,-.0123067,-.0583961,.067183,.0377157,.0222002,.0740025,-.0330688,.0143149,.0725629,615216e-9,-.0346037,.148552,-982311e-9,.0264912,.126298,-.0262073,.0302769,.0614089,.022871,.032448,.0634147,.0220731,.0309394,.123948,-.0118147,.0690959,.0911661,-536712e-9,.0423923,.0580389,.00511932,-.0506879,.0863547,-.0257747,-.0862612,.171456,.00558665,.0439459,.0567843,-99946e-8,.00964702,.0630305,.0178272,-.0874726,.152384,-.00727942,-.0770354,.10224,.00946234,-.029065,.183712,-.0178793,.0725645,.0958351,-.00578425,-.0614274,.159797,.00701313,-.0401938,.0531714,-.0275929,-.0342031,.154442,-.0386804,-.0347135,.0534059,.00679868,.045656,.0553093,-.00528492,-.0375273,.176627,-.002603,-.0199704,.101233,-.0304253,-.0168541,.0893267,.00969329,-.0122538,.0669859,.0191958,.0719826,.13849,-.00979073,-.0610253,.140065,-.0250836,-.101804,.157778,.00635203,.0517798,.0775664,.0113458,-.0844622,.0602245,-.0243619,.0089433,.0654147,.00868614,-.0959982,.17104,-.00269944,.0428682,.0737715,.0155857,-.0831552,.143665,.0190856,-.0876898,.150157,.0107313,-.00535617,.143495,-.016582,.0351455,.103095,.0137206,-.0445794,.110097,-.0205157,.0199605,.0939847,-.00950905,-.0726026,.0958278,-.0223925,-.0815858,.0644628,-.0397806,.0835745,.145724,-.00743519,.0773314,.144399,-.0153334,-.089533,.172592,.0131851,.0372859,.0947756,.0235491,.0146489,.0577644,.024788,-.0369988,.0535805,-.017737,-.0764106,.0673373,-.0356907,-.0667909,.15563,-.0189361,.0458919,.078684,-.0324388,-.0654425,.0626704,-.0277699,-.0224404,.167171,-.00584617,-.0805912,.173385,.00962193,-.0138049,.190011,-.025645,-.0522299,.11995,.00549822,-.0244824,.0714616,-.0361235,-.030228,.168332,-.0247636,-.0835943,.0685911,.00363493,-.00287172,.100176,-.033159,.0423864,.0860168,.0306927,.0579429,.0546574,.0060862,.0808364,.10546,.00596481,-.0207929,.160559,-.00559078,.0365757,.0601391,-.0400901,-.0134471,.117817,-.00190757,-.00180527,.0788544,-.0201242,-.0605239,.0859956,-.0351845,.0331257,.133611,-.00369514,-.0286324,.186112,-.0200816,-.0437701,.0917742,-.0139796,-.0204053,.144076,-.0232403,.0220886,.152233,-.0319211,.0395323,.0602747,-.0418223,-.099128,.152272,.0104072,.0526605,.153877,-.0192283,-.0242389,.175199,-.00309007,-.0458867,.176693,-.00110835,-.0262307,.0828591,-.0362929,-.00785264,.0649055,.0181699,-.0425235,.150322,.00281265,.0820145,.0864598,.0156092,-.0138192,.112917,-.0315976,-.0408887,.0533465,.00562616,-512945e-9,.0836988,-.00431899,-.0491117,.143651,-.00443281,-.0967931,.14282,-.00186643,-.0479778,.114661,.00427547,-.0193925,.133352,-.0187658,.0376543,.0541738,.0301826,.0331585,.059742,.0154923,.0599999,.0540083,-.02269,-.0560753,.137813,-.0130102,-.0579067,.178426,-.00306296,-.0184043,.160433,-.0249253,.0220692,.0592813,.00781006,-.0524459,.0887259,.0206388,-.0248595,.0532907,.0237506,.0328826,.117025,-.00812961,.0832269,.0989777,-.00175452,-.0551278,.146771,.00329757,-.0309298,.0816977,.011598,-.015248,.189233,-.0295158,.0181468,.082329,-324897e-9,-.095655,.153831,.00299386,-.0848865,.0692346,-.026216,.0131772,.0868057,-.0149693,.0143122,.0835792,-.0108243,-.0619295,.144617,-.0117536,-.0719026,.172637,-.0227284,-.0973459,.144188,.0203425,-.0910279,.0575948,-.0196497,-.026444,.0579603,-.0409665,-.0595922,.151108,.00773049,.0345924,.0851646,.025702,.015571,.0666668,.00436433,.065605,.0879228,.0196773,.0248252,.0939892,-.00622811,-.0238595,.104227,-.00512889,.0365152,.0635778,-.049234,.0834747,.145448,-.0130985,-.0570247,.153665,-328558e-9,.0736543,.0566098,-.00981508,-.0750602,.0631806,-.038276,-.0245103,.0532423,-.00131523,-.0253614,.0533129,.00316262,.0086976,.122514,-.00210679,-.0455669,.0785676,.0303699,-.0501125,.0768978,.0318445,-.0102755,.0685632,-.0220086,-.0804796,.138959,.0192061,.0561543,.11219,-.00575219,-.0997084,.173705,-.00160857,-.023308,.0666244,.0205117,-.0184173,.0814353,.0136938,.0703926,.150365,-.008964,-.0363724,.140548,.00199082,.0834462,.085831,.00431116,-.0431648,.156048,-.0357656,-.00413143,.140838,-.00948277,-.0108919,.14664,-.0200263,-.0682321,.120373,-.0181578,.0309968,.123221,-.0246135,-.0334546,.145116,621319e-9,.0405763,.0729724,.0214811,-.0351049,.130582,-.0279814,.008293,.0648681,.00395889,-.0635182,.173276,.00454412,.0308412,.0858638,.0200441,.0259064,.0861014,.0145164,-.0366028,.116347,-.0188118,.0207347,.146217,-.0352689,-.0340972,.175594,-.0167442,-.0781773,.0782706,-.0202996,-.0615172,.177127,-.0246387,-.0107252,.0719777,.0169123,.0445601,.075879,117458e-9,-.0627369,.124442,.0022603,.0485217,.0814084,-.0282296,-.0874514,.0840296,.00224165,-.0815202,.159435,.0120571,.0578473,.130557,-.0295972,.0482622,.128072,-.0340483,.0524241,.126597,-.0333432,.0328979,.0549485,.00248163,.0721799,.112014,.00321059,.0106766,.112858,-.00937689,-.0924371,.148561,-332189e-9,-.0758126,.0671824,-.0259431,.0595974,.0770734,.00234606,.0134667,.151805,-.029809,.0539491,.0752747,-.00153767,.0338222,.0617894,-.0272206,-.0417571,.0658243,.0159213,-.042967,.178171,-.00732916,.0465765,.0528948,-.0136382,-.0897801,.140872,.0227303,-.0882617,.179234,.00488851,-41862e-8,.0780138,-.0131691,.00592537,.0559269,.0104284,.0080922,.0629167,.0116032,-.0157389,.183404,-.0288462,-.0465834,.0925965,.016596,-.0801212,.173148,.0154422,-.0288634,.169657,-.018035,.0575114,.136414,-.00851952,-.0452183,.102414,-.00678476,-.0507233,.0605639,.0153023,.026441,.127922,-.00980627,.0351557,.0777531,.02895,-.0517938,.176255,-.026427,.0459083,.081804,-.011088,-.0426113,.166718,.00359082,-.0720012,.115842,.00477684,.0327101,.0853767,-.0011992,-.0228245,.0529816,.00993913,-.00968485,.137916,-.0155338,.0172643,.0927995,-.0250665,.0752467,.120851,-.00733311,-.0815784,.104676,.00135369,-.0695432,.0541207,-.00251486,-.0288404,.152146,-.02963,.0374107,.0557558,-.007891,.0409505,.0558902,-.00782061,-.0647356,.175616,-.0211694,.0405149,.129094,-.00203685,-.0644661,.169024,.00641755,-.0603188,.175609,.00679153,-.0480577,.124147,-.0264991,-.0465751,.141256,-.0269279,.057241,.10732,-.0256862,.0605515,.120215,-.0265338,.0279216,.0645546,.0221584,.0303803,.0763194,.0239104,-.0721963,.178809,-.00622188,-.045987,.148184,-.031571,-.0643245,.0638856,.0366231,-.0678612,.060168,.0287185,-.0844131,.0588949,-.0195096,-.0265929,.171904,-.0109803,.0601967,.0677603,-.0164084,-.0694527,.143737,.00825188,-.0573843,.159152,-.0172821,.0330954,.108791,.00825571,.0479199,.0998556,.0239819,.0140462,.144881,-.00389605,-.101568,.148358,465661e-9,-.0492284,.158341,-.00112624,.0296683,.069052,.0145348,.0283579,.095141,-.0342495,.0171699,.0597295,.00634008,-.0476047,.169868,-.0359413,-.0746125,.106716,-.0196228,.0277147,.0781272,-.0425822,-.0921027,.144861,.0166909,.0450224,.071932,-.0375314,-.0325287,.0533537,-.0219057,-.0175631,.110972,-.0288951,-.0512293,.100364,-.0191616,.0496829,.0531683,.0179211,.00259191,.0885292,-.00591699,-.0942509,.16995,-.00912037,.0119339,.0716688,-.0129003,.0104546,.0643063,.0256717,-.0544405,.1446,-.00671166,-.00737557,.068527,-.0168913,-.0604269,.0567917,.0357061,-.0511381,.138524,-.00346217,-.0448204,.0660466,.0231874,-.0734406,.102417,.0109775,-.0400774,.157531,.00254841,-.0467842,.0587068,-.002107,-.0733788,.144205,.0144504,-.0398004,.16249,-.0372193,-.0343856,.145499,-.0313908,-.0663494,.0709943,-.023727,.0152243,.071603,-.0372241,.0276259,.0563924,.0100557,-.073457,.156062,-.0189339,.0682653,.129407,-.0181901,.038928,.0604955,-.0494982,-.0313105,.0531326,-.0292913,.0303182,.0620713,-.0439779,-.037756,.122272,-.0250749,-.0752912,.118172,-.0111243,-.0403379,.193144,-.0182843,-.0323854,.0554408,-.00434492,.0771294,.103292,.0104482,.0472252,.148707,-.00819004,-.0192036,.135375,-.0229348,-.103897,.147036,.00774945,-.0485292,.0981964,.00692103,-.0975527,.149062,.0187953,-.011314,.150317,-.00793511,.017758,.0759135,.0086112,-.0655993,.0541605,.0302227,.0728929,.101029,.0127446,-.022152,.157487,-.00291759,-.029629,.106823,-.0138963,-.0252295,.179619,-.0206898,-.019011,.184875,-.021354,.0334296,.0529024,-.016812,-.0284256,.143206,-.00693815,-.0223389,.0718042,.0141792,.0329482,.103959,.0183083,-.048424,.10262,.00338482,-.0105339,.0574006,.0224492,.0323424,.120629,-.0114484,.00118378,.0541865,.0112935,-.00572647,.0834087,.00300901,-.0873762,.0747603,-.00498517,.0672209,.137301,-.0173212,-.0430897,.173669,-.0348088,.0310394,.154245,-.0302268,.0397341,.081597,.0135744,.00807029,.125107,-.0345941,.0502183,.0626093,-.0325527,-.0904345,.163403,-.00858604,942937e-9,.158628,-.0211253,-.0225279,.113519,-.0125032,-.0769418,.0630233,-.0162476,.065718,.073791,432523e-9,-.0584583,.155563,-.0143,.0400292,.0707496,.0186216,.025358,.155178,-.00968593,.0497719,.0764684,-.0182289,-.0175538,.0649982,.0193883,-.06773,.0662113,.0207084,-.0683238,.0778872,.019389,-.0852999,.1745,.0096639,-.083538,.0669871,-.0369669,865572e-9,.141655,-.00533011,-.0743669,.174842,-.0187253,-.0429853,.0737969,.0293456,-.0928634,.16995,-.012017,-.0341163,.123927,-.00685995,.0454163,.07248,-937617e-9,.0155115,.0656501,-.0241487,.0175896,.0575535,-.0155077,-.0103295,.129578,-.00576759,-.0901851,.144782,.0235986,-.0748806,.0757771,.0145957,-.0609621,.0528715,.00112993,-.0397889,.185665,-.0149547,-.0835053,.159734,-.0113446,-.0421051,.125661,-.0274531,.028386,.0682898,-.0329956,-.0416216,.0827467,-.0274716,.0234606,.13337,-.00470413,.0237538,.139338,-.00300578,.0420979,.100855,.0109637,-.0514372,.160549,-.00199266,-.0359653,.0726729,.0257676,.0365249,.14724,-.00357433,-.0549792,.157678,-.0286543,.0809802,.153768,-.00695225,-.0831929,.066668,-.0191193,-.0777275,.0680629,-.0179009,-.0619945,.0794559,.0173677,-.0364522,.071166,-.0290963,.0334427,.0638264,-.0456836,-.0402565,.180904,-.0342042,-.0683234,.169334,.00198481,.062646,.118081,-.012148,-.0299124,.0960454,-.00327875,-.0267655,.0944959,.00326984,-.0242868,.139923,-.0252228,-.100306,.170843,-.00820805,.00223696,.127278,-807682e-9,-.0299638,.0525309,-.0192343,-.0712755,.167756,.015885,-.0708145,.168173,.0120643,-.0426241,.106659,-.0153687,-.0203545,.093306,-.031974,-.0835957,.0976007,-.0139336,.0665661,.130235,-.0150608,.0820418,.0776975,.014834,-.0646418,.0736481,.0373371,.0697727,.104132,.00844719,.0308727,.10422,-.00525115,.0242476,.101498,-.0100012,-.00969466,.0650377,-.00167101,-.0810352,.168872,-.00892279,-.0423226,.0696457,.0266395,.0365178,.0903236,-.00332367,-.0548402,.175593,.00347586,-.0605179,.0556969,.0170599,-.019517,.167258,-.0115167,-.0674701,.0682951,.0288257,-.0739784,.0889392,-.0284884,-.00205823,.111607,-.0346822,.0287743,.0770019,-.0341967,.0397228,.0789254,-.0354029,.0586339,.0573585,.0217904,.0414612,.0901069,.0157258,.0378287,.0913179,.0118175,.00910038,.0603973,.00819419,-.00884832,.164182,-.00881412,.00888581,.101153,-.0193937,-.0263433,.161316,-.0253699,-.0792378,.150127,.00730043,.0130978,.155874,-.018021,.0298616,.0891231,.0133099,-.00195212,.0992786,.00156777,-.0253358,.161095,-.0195063,-.0885523,.168458,-.00330177,-.0947406,.167115,-.00255419,-.0794383,.166378,-.0023221,-.0723652,.170925,-.0173687,-.0826412,.108073,-.00131931,.0591733,.0826823,.0154601,-.0189284,.0541358,-.00759476,-.0601523,.0530526,-.0107928,-.0656508,.126081,-.00253632,-.092228,.0576753,-.0280518,-.0600018,.11785,.00724866,.0701459,.110748,-.0152065,-.0384388,.172907,-.0284337,.0434915,.136181,-.00188805,.0165239,.0684817,-.00398066,.0315816,.0928976,-.00339214,-.0661606,.0722506,-.030128,-.0870474,.163242,-.0166657,-.00931073,.120475,-462003e-9,.0223446,.151748,-.00590181,.0673091,.106519,.00223666,.0472483,.089417,-.0155933,.0820212,.130574,-.0103898,-.0545003,.156905,-.00523345,.0447483,.0880743,-.00865615,-.0435377,.150644,-.0351134,-.00826154,.0695451,.0114691,-.0270192,.145869,-.00168648,.0421621,.106261,.0206991,.0387274,.113759,.0153775,.0214484,.0569563,-.0221609,.0754935,.0923076,.0184184,-.0875844,.178173,-.00552137,-.0142067,.0528197,.0112169,-.020434,.0686235,.0180118,.0720394,.0533152,-.00472569,-.0231247,.175064,-.0455867,.0613117,.0580952,-.0239726,.0403677,.102107,.0283746,-.0718715,.059341,-.0169397,-.0525628,.179993,-.00602558,.0210881,.12619,-.010098,-.0494462,.110605,-.0231631,.0491857,.0919441,.023779,-.0748224,.15125,-.00614298,-.0267384,.0598941,-.0273811,-.0645967,.0894903,.0159145,-.0736545,.0779194,-.022256,-.0684373,.124515,-.0133238,.00558637,.149481,-.0104388,.0533053,.157633,-.01929,.0852285,.138371,-.0165192,-.0604163,.0748589,.0390014,.061692,.0716666,-.0051818,-.0664104,.0854278,-.0346363,-.0644928,.12085,-.0208791,.0763835,.099038,-.00840017,-.0818704,.0669405,-.02398,-.0166437,.100725,.00285555,-.0500475,.145607,-.0296155,.0164081,.0756053,-.0299127,-.0557738,.0646488,-.0369996,-.0867039,.093181,-.00866772,-.0853215,.152034,.00747684,.0708897,.0712382,.0255842,-.06518,.0567339,.00977322,.0106507,.0588387,.0112473,-.0973166,.136844,-.00800315,.0244163,.10712,-.0169107,-.0879832,.149133,-294563e-10,.0318002,.0803664,.019769,.0493654,.0641427,.0236761,-.0583339,.155537,.00616051,-.0668903,.148253,-.0203129,-.0664203,.068641,-.0333554,-.00245534,.083483,-.0258055,-.0285557,.157179,-.00114474,-.0411021,.0629833,.0298546,-.0330666,.168,-.0291022,-.0313607,.167967,-.032732,-.105616,.145277,-659611e-9,.0384641,.106067,.0223701,.0844427,.0983564,.00514214,-.0913228,.176235,.0174257,-.010936,.134324,-.0227339,-.00916766,.174548,-.00834367,-.0413177,.0565202,-.0122495,-.0324912,.174753,-.020282,-.0859553,.165375,.0123868,-.0301024,.184646,-.00394881,.0919964,.133937,-.0122285,.0219373,.122877,-.0206648,-.0217374,.175917,-.0433213,-.0748891,.141247,-.0176604,-.0415698,.0583552,.035813,.0636051,.119385,-.0192602,.0169147,.139016,-.0356631,-.00113791,.122576,-.0344922,.0623267,.106587,-.0105125,.0113888,.121991,-.0328916,.00320892,.106953,-.0325079,-.0732754,.168227,-.0104606,-.0414396,.13033,411684e-9,-.0324388,.14335,-.00440749,-.00401358,.15477,-.02119,-.0254062,.10183,-.0238119,-.0279425,.0946727,-.0270178,-.075079,.171488,.00461893,.0561837,.0535104,.0170268,-.0710538,.0698629,-.0293087,-.101672,.147772,.0128257,.0232374,.07701,-.0401039,-.0574784,.171933,-.0274644,-.0246394,.12522,-.0198006,-.0286843,.128387,-.0151937,-.0300565,.128737,-.0229163,-.0311094,.11658,-.0161089,-.0178685,.122152,-.0204112,-.00321926,.134532,-.0317404,-.00793819,.132289,-.028785,-.0570367,.11865,-.0238916,-.0503152,.0726876,.0330495,.020363,.0624482,662347e-9,-.0753729,.114322,-.0150377,.03081,.0552337,-.00462609,-.00218694,.152063,-.0207037,-.0549543,.132956,-.00216554,.0239001,.0614835,.0218045,.0576502,.14421,-.0153131,-.0580346,.155104,-.0210069,.0760061,.119844,-.0158171,-.0834924,.0590064,-.0313326,-.0814974,.0579396,-.0204668,-.0840459,.180556,.00633266,.0400601,.10893,-.00173826,.082011,.0941323,-.00304063,-.0353288,.17531,-.0228304,-.0761155,.0572316,-.00666363,-.00432032,.143993,-.0231464,-.0685665,.0545583,-.00975977,-.0751411,.148455,.0120232,-.0209254,.0726309,-.036428,-.0802713,.1024,-.016802,-.0695143,.141919,455519e-9,-.0597171,.181264,-.00760092,-.0870564,.151161,597978e-9,-.0434529,.052973,-.0373773,-.0535431,.161875,-.0318207,-.0525422,.143264,-.00989436,.0347139,.140055,-.00229789,-.0201843,.150238,-.00591714,-.0943509,.179389,.00517826,.0632558,.141514,-.0175827,-.0306055,.168129,-.00290558,-.0819902,.150681,.013659,.0164098,.164554,-.0214238,-.0408568,.0876768,-.022036,.0397268,.0899832,-.0327218,-.0849685,.0698619,-.00517825,.0348049,.0577653,-.00141633,.034511,.0562391,-.00102008,.0333466,.0539259,-.00361934,-.0606872,.0935244,-.0236785,.040881,.0554793,.00627345,-.0533031,.0771063,.0267812,-.0560684,.0799712,.0200964,.0473906,.125052,-.00150842,-.0664166,.054584,.0048643,-.0188088,.157206,-.0112097,-.0545338,.0618542,.0382395,-.07505,.16168,-.0101863,.0289105,.0575202,.00908384,.0239688,.053713,-195053e-9,-.0400784,.0640653,.0219554,-.0129705,.0680045,.00475936,.067065,.105417,-.00890895,-.0612935,.16159,.00993349,-.0823342,.0645196,-93064e-8,.0426677,.0801925,-.00526879,.0385438,.0792983,.00256818,.0371597,.074432,.0119046,.0815425,.142471,-.00583135,.0336339,.0622191,.0186954,.063671,.0880512,.00210461,-.0368662,.116372,-.0114006,-.0853039,.0799622,-.0129559,.00542881,.0910479,-.013231,-.0651494,.0636771,.016258,-.0586806,.0582787,.014572,.0125776,.0580156,.0182959,-.0346532,.0929828,.0035672,-.0378241,.0873174,.0110646,-.0413318,.185113,-.0227115,-.0471484,.17999,-.020409,-.0607861,.151729,-.0145561,.0787983,.0707557,.00930662,-.031851,.0723826,-.0389777,-.0596403,.132794,-.0091046,.0663043,.0536964,-.0194631,-.0186143,.110584,-.00276925,-.0681941,.162921,.00119846,-.0583082,.101088,-.0217919,-.0509507,.171975,-.031046,.0499505,.113205,-.00208216,-.0289538,.140885,-.0282922,.0964837,.127333,-.00887145,-.0815447,.139765,-.00827391,-.0917619,.138487,-.00702414,.029545,.10887,-.0280106,.0312633,.0532415,-.0224094,.0160269,.0942411,-.0176793,.0193545,.0910577,-.0304776,-.0360758,.0979479,-.01193,-.0338104,.0914982,-.0232115,-.0325988,.0857049,-.02873,.0610126,.137902,-.022196,-.010545,.0762948,.00552041,-.0167498,.0814655,-.0316839,-.07336,.0579107,.00586622,.0433036,.065337,-.0397091,.0335541,.093337,.0182055,-.084159,.101727,-.00878011,.0659464,.103516,-.00362694,-.0203034,.0867062,.00735992,.0461869,.139659,-.0337034,.0275716,.123828,-.0182482,-.0552801,.165294,-.0299686,-.0247049,.121781,-.016003,-.0987359,.178588,-.0014226,-.0471109,.0967724,-.0134971,.0461387,.0594539,-.0211728,.0638582,.102736,-.00637605,.0217642,.0750334,.0139665,.0117652,.0735675,-.0197021,.0492329,.0971704,.0198532,.0325422,.0880919,.00977065,.04597,.0560421,.00117121,.0639779,.0615447,-.0179835,.0351084,.15718,-.0171945,.0307237,.164826,-.0213132,.00603392,.066188,.0142747,-.0943088,.154847,.0128225,-.0563778,.0946099,.01801,-.0823312,.181693,-.00148993,.0217941,.0529902,-.0106378,.0365111,.0987226,-.0351135,-.0705236,.152533,.00218545,-.0739946,.148085,.00683861,-.0726541,.0817399,-.0292384,.0147456,.0784813,423249e-9,.0616135,.115407,-.0112315,-.0499624,.132661,-.026022,-.0407056,.139218,-.0294157,-.0486257,.146718,-864523e-9,-.0337549,.172878,-.00172281,.00483418,.0995077,-.0266705,-.0578172,.161993,-.0118188,-.0409361,.185855,-.0367212,-.0882542,.0578678,-.0358393,.0523198,.0762042,.0189375,-.0236064,.151702,-.0117802,.0254457,.0683479,-.0400592,-.0687838,.17712,777221e-9,.0351948,.0737845,-.0361012,-.0768775,.108855,.00610436,-.0458253,.111143,415766e-9,-.0462281,.0660652,.0168451,.0616434,.135029,-.0143059,.0627339,.0636531,.025332,.0866566,.12333,-.011103,.0770789,.125113,-.010844,-.0218501,.0719399,.00966408,-.0601661,.130956,-.0163034,.0590992,.098429,-.0107179,-.00587169,.17561,-.0118538,.0742819,.0852963,-.00127132,-.0192515,.155034,-.0250544,-.0224566,.149835,-.0183931,.0627812,.0531615,.00152335,-.0627706,.0737821,.0223619,.0683158,.0834555,.0234499,-.0637232,.145684,.00589135,.0243414,.0834654,-.0344662,-.0524467,.104891,.00844315,-.0996104,.158916,.0113295,-.0279978,.169082,-.0379469,.0117694,.146596,-.0334197,-.0247541,.138366,-.0136531,.0484774,.0792123,-.00473724,-.0841308,.0869962,-.016172,-.0822368,.170758,.0165059,-.0432404,.160809,.0022724,.0449107,.0630747,-.0324627,-.046101,.0583093,.0269976,-.0422993,.174466,.00180113,-.0905015,.180387,.0125142,-.0391443,.195381,-.0224515,.00214278,.143328,-.0308433,.0448549,.0881756,-.0276023,.0494738,.0946045,-.0258803,.0547087,.108287,-.0297387,.00167257,.197195,-.0324933,.0478305,.0599889,.022587,-.0495274,.0678622,-.0353489,-.0239873,.0683848,-.0403125,-.032767,.167757,-.00104523,-.0435609,.169618,.00168231,.0538413,.131888,-.00383368,-.0503654,.0533418,.0304907,-.0488412,.130463,.00143247,.0191295,.123399,-.027259,-.0664847,.0936089,-.0306482,-.0760578,.0904375,.0137171,-.0623534,.0713968,.0424101,.0354434,.0683002,.0172057,-.0221997,.0573698,.00605002,-.0695964,.17867,-.010979,-.0282801,.0738304,-.030996,-.0402735,.184501,-.0378312,.054252,.0542926,-.00868795,-.0357894,.145057,-.0376359,-.0471203,.176364,-.0263216,-.0194834,.164111,-.0430311,.0156648,.121165,-.0106455,.036382,.152916,-.00795652,-.0116167,.0566696,.0103648,-.0371216,.0921818,-.014717,-.0844804,.065224,-.0325625,.0349497,.094141,.0144379,-.0173742,.0700936,-.0288431,-.0697923,.161741,-.0222235,.0553412,.0695587,-.0102463,.0184016,.0812426,-.00471615,.0257502,.0839293,-.00144615,.0298206,.0548515,-.050413,.0372508,.1214,.00480788,-.0332861,.0552553,-.0141268,.0442144,.0730084,-.0320362,-.0222181,.0558664,-.021673,-.0306727,.186731,-.00432422,.020032,.0660222,.00912777,.0497418,.143128,-.00544748,.0351848,.06574,-.0326306,-.0123946,.0594056,-.0062418,-.00687516,.187577,-.0284756,-.0163265,.0722468,.0218911,.0697667,.129863,-.0109897,.0698424,.0630581,-.0109212,.086554,.138573,-.00667084,.0413713,.0683496,-.0390622,.0330636,.148995,-.0342198,-.0164583,.123919,-.00959711,-.0143083,.138472,-.019645,-.018238,.123953,-.0139095,-.0780515,.175336,-.00306513,.0297968,.157181,-.0248561,-.0480428,.0564092,.0115388,-.00632084,.162195,-.0115165,.0775153,.0817486,.0218794,-.012875,.0958609,.0050119,.0535284,.139962,-.0301257,.0453968,.11548,-.0341264,.0387947,.113453,-.0327472,-.0263375,.164212,-.0133057,.0395765,.161564,-.020955,.0188084,.0627321,-.0457113,-.0434019,.0958544,-.00592293,-.00153905,.133587,-.00261633,-.0749723,.166489,-.016365,-.0254635,.151006,-.0264766,.0529759,.147241,-.0243283,.0634267,.127896,-.0212972,-.0221274,.148886,-.0443983,-.00587187,.0888192,-.0310285,.0320422,.133463,-.0332508,-.0667748,.143372,-.00731207,-.0823117,.0853301,.0103894,-.0804015,.0725085,.0111142,-.0826549,.0706457,-.0142777,.0660468,.11797,-.00591077,.0149619,.0630724,210264e-9,-.0440524,.0790132,.0217703,.072693,.124528,-.0206523,-.0520097,.0921765,-.019511,.0236447,.063055,.0183181,.0694051,.0833951,.00178489,.00832288,.0593965,.0173743,-.0804935,.109397,-.0105874,-.0457024,.181168,-.0131784,-.0632422,.108368,-.0225572,-.0748949,.165007,.00522743,-.0624486,.0724051,.032772,-.0860737,.0685317,-.0290267,.0340734,.161667,-.0201989,-.039801,.0985948,-.0104847,.00406594,.135101,-.0346132,-.041344,.142164,-.00157071,.0216818,.157658,-.0180769,.0552386,.074451,.0235999,-.0403874,.0558939,.0317501,.0429448,.110488,.0126487,-.0611902,.0971578,.0135968,-.0726854,.120053,-.0016792,-.0710998,.123067,-.00813995,-.0191396,.174864,-.00700603,-.0761695,.159791,-.0208349,-.051102,.0533362,.021,-.0810821,.16566,-.0139854,.0140685,.137521,-.00231132,-.0545285,.145817,-.0215934,-.0615773,.169412,-.0269431,.0127884,.151352,-.00806384,.0700518,.121658,-.00516577,-.0216725,.165223,-.044818,-.0382845,.143869,-.0314635,.00399078,.0545692,.00148643,-.0239069,.168406,-.023275,.0262102,.0532905,-.0123105,-.08242,.142363,.0147235,-.019019,.055113,-.0159964,-.0434425,.0940705,.00489396,-.053241,.0975152,.0116736,-.0818973,.166961,.0150513,.0550784,.104038,-.00988868,-.0825864,.09259,.00895484,-.00303414,.0741708,-.00407485,.0562649,.101319,-.0161355,-.031067,.058098,.0115864,.0209869,.131461,-.0334569,-.0436378,.078209,-.0283294,-.0434731,.0708131,-.0361881,-.0780019,.0588954,-.0366256,.0726669,.133093,-.0208307,-.0757519,.163257,.0131354,-.0141385,.0761844,.0160176,.0390479,.0579351,-.00493607,-.0526763,.143999,.00897978,-.0432079,.143028,.00404231,.0046476,.112684,-.00155795,-.0033239,.112911,.00153139,.054832,.0547728,-.0232759,-.069859,.0768813,.0161949,-.0377029,.0664352,-.0369433,-.0302202,.181784,-.0264747,-.0524487,.0850743,-.0325778,-.0782521,.147568,-.00605035,-.0405966,.0558096,.0017422,-.0120115,.10712,-.033558,-.0130063,.0965289,-.0334402,-.0391226,.103616,-.0118513,-.0497035,.152203,-.0295475,.0402528,.0875073,-.0355968,-.0870062,.0923877,-424634e-9,-.0869329,.157342,-.00614214,.0647056,.0527339,.00911522,.0465652,.0976449,.0150017,-.0279439,.0846819,-.0311034,-.0312763,.173234,-.0113461,-.0801438,.157013,-.0132203,-.0539784,.155064,-.0295604,.0373079,.124938,-.00403811,-.0565552,.141253,-.0270852,-.0224896,.0635494,.0246198,-.085406,.0989501,-.00294082,.0461335,.0826883,.026632,.071028,.141775,-.0164006,-.0281854,.0994676,-.0107983,-.0308292,.13468,-.00540502,-.0633223,.063091,-.0239437,.0455101,.0752868,-.00287765,-.0913963,.179368,726985e-10,.00175037,.0552592,.0244973,.0106675,.0598125,.0267554,.0181535,.0639692,.0119054,-.0701303,.173795,-.00203555,-.0342141,.182721,.00207384,-.0762184,.116481,-.00355043,.0560977,.0806224,.00226029,-.0659581,.063672,-.0332159,.0746304,.142381,-.00704826,-.0328979,.0616668,-.0406026,.0368595,.0672857,.0164947,-.0473309,.0621342,.0342681,.0859578,.128933,-.0136894,.0634605,.0893332,.00369846,-.0648132,.0535942,.0243305,.0343131,.118652,-.0289079,.0309246,.118235,-.0193565,-.0360461,.17414,-.0386259,.0355189,.0910326,.0275419,-.0180446,.0569412,.00147645,-.0614659,.145703,-.0183353,-.0806277,.141543,-.0132806,.0142548,.0853897,-.0237043,-.0245497,.109707,-.017728,-.110993,.160134,.01353,.0286937,.0550512,.0228318,-.0107462,.107914,.002814,.0999768,.136463,-.0080611,.0571028,.123402,-.00464669,.074458,.0638286,344316e-9,-.0359756,.166654,-.0424118,-.0244898,.148172,-.00344266,-.0370429,.152797,132405e-9,-.0253596,.145692,-.00938066,.0526362,.0742055,-.0252447,.0610925,.0700469,.0260123,.016189,.13096,-.00367544,.0461821,.149132,-.0298685,-.0496716,.171771,.00322546,.0586348,.151684,-.0193476,.0470561,.152553,-.0158488,.0341822,.0570131,.0129324,.0517718,.112354,-.0327328,-.022936,.0606811,-.0361938,-.064853,.0976381,-.0229117,-.0280873,.1844,-.0064893,-.0372266,.187486,-.0198306,-.0585795,.180679,-.0147648,.0223439,.0561571,.0211709,.0338015,.14182,-.0353351,-.0860453,.0784674,.00247093,-.0877125,.0839131,-.00720178,-.0353365,.067001,.0266054,-.0609428,.0773253,-.0361366,.0229768,.0628878,-.0289016,-.0357124,.149199,-.0373367,-.076436,.0888047,-.022569,-.0351966,.0529159,-.041327,.0302255,.07074,-.0419408,-.0352272,.155993,-.0406993,-.0679862,.138818,-.0199895,-.0406209,.0858082,.020834,-.0274831,.155759,-.0347259,.0305069,.0525248,.00528665,-.0174823,.053453,.0259827,-.0828135,.166763,.00918693,.035751,.123924,.00630764,.0401382,.123106,.00776488,-.0544877,.0531522,.00681163,.0503853,.0892269,-.00926277,-.0983959,.144349,-.00463482,-.0897,.153628,.0156702,-.0742957,.141614,.014042,.0656288,.11358,-.0152155,.0316237,.0804651,.00208557,.0717082,.0627027,.021475,.0722628,.0603551,.011876,-.0246504,.0898225,.00669238,.0723191,.0711514,-.00124886,.0673907,.0731148,-.00851643,-.0498708,.159359,-.0295206,.0407226,.127197,-.0342018,.0790496,.116833,-.00829483,.044186,.155284,-.0231222,.0140835,.0621772,-.0132659,-.0730138,.174409,-.00657978,-.0707102,.166318,-.0168767,.0223764,.161452,-.0215277,.0150461,.157012,-.0236377,-.0477755,.0573489,-.0250718,-.0561884,.0542062,-.0193367,-.0818926,.146558,-.00997262,-.0829149,.140189,.00614931,.0599375,.0680786,-.00650023,-.0927018,.149264,-.00528643,-.0284331,.0530951,.0165177,.0418799,.0926304,-.00478889,.0130282,.112189,-.0185018,-.0756197,.063498,.0105821,.0382918,.0789673,.0233787,-.0475262,.0560586,-.00823928,.00244139,.150752,-.0170895,.00373973,.156154,-.0209063,-.0904696,.171795,.0072346])},Kg.prototype.getArrayEdges=function(){return new Uint32Array([797,643,795,406,609,1092,549,1225,1118,762,1223,749,98,79,255,207,733,1165,804,696,1237,1203,1204,587,611,1089,699,715,107,1007,805,438,529,492,88,73,549,331,1225,1176,909,799,1250,675,148,61,1,827,612,1149,947,317,1038,1221,769,9,11,31,773,1250,681,959,958,783,1050,659,1179,362,881,471,1021,1198,237,420,1113,563,1018,421,395,657,656,809,301,509,473,617,407,967,718,774,682,683,1135,859,1060,213,1041,284,740,365,626,625,877,1229,1182,236,410,1118,1214,924,393,1082,627,1017,245,1e3,884,366,241,1199,446,400,931,437,766,1034,131,1011,1196,768,1018,120,1251,869,618,938,628,882,838,624,306,928,705,726,397,1119,963,337,993,666,1252,918,600,149,66,194,327,691,813,40,250,128,654,734,1073,143,181,46,524,973,628,130,33,862,928,726,827,1125,818,198,543,851,513,1200,1003,451,57,124,110,1109,1038,317,747,619,1221,627,1137,1010,835,1086,373,384,947,1149,318,190,358,837,1241,1255,655,462,702,1241,467,240,678,1255,1254,966,745,827,115,239,443,493,437,1034,1150,348,1242,83,1091,324,350,648,789,1121,1179,680,504,944,444,538,644,262,883,844,1197,279,1176,787,681,391,1098,65,1,61,1238,685,783,1055,899,1130,672,122,136,1176,534,787,109,461,49,147,683,682,482,989,1181,152,843,305,853,1216,1194,1165,951,265,150,1067,1231,679,902,1010,653,286,877,304,913,857,116,61,38,343,1154,1153,909,1035,219,970,860,861,1069,686,1158,500,1117,172,883,1197,1071,31,41,773,509,203,1066,612,969,1149,274,655,702,361,1016,214,499,141,806,652,1061,1028,859,355,840,1158,805,1069,705,599,50,697,1142,656,1175,893,742,919,1019,246,215,796,795,151,1221,619,79,98,110,1004,761,1215,771,976,319,1067,304,957,1141,755,1244,753,1163,984,1143,248,1091,1227,591,133,37,120,1018,325,827,401,760,231,761,627,154,1017,1122,974,593,24,122,99,366,620,312,222,1145,1106,1236,1052,1190,542,1020,426,1023,630,695,706,860,970,667,782,356,424,610,629,1014,336,404,221,1198,238,374,722,267,464,1247,175,1191,503,252,165,611,699,478,1125,212,205,223,1183,513,665,514,988,155,987,713,962,1040,1087,1233,555,479,266,873,1194,864,13,1172,658,856,109,806,842,102,107,73,143,250,441,345,607,1009,1158,1084,561,281,701,1090,574,850,1039,806,841,49,443,673,477,1232,224,1029,824,903,1069,1211,1031,206,519,346,121,1190,1052,1042,1106,546,311,957,174,1231,1006,630,565,966,923,745,1059,1058,1203,67,84,143,1247,1244,1174,1216,305,10,444,944,1156,732,1193,372,672,99,591,185,1144,1217,177,1029,246,74,56,113,35,1128,1253,833,910,429,307,770,1256,1127,599,876,1119,433,377,906,1042,459,334,138,520,1120,1121,680,429,235,329,792,569,371,1035,493,1034,988,758,155,548,1128,123,841,104,27,725,521,269,262,1152,538,610,803,187,478,212,1026,1083,283,546,122,24,197,865,150,466,1225,1119,1118,392,871,748,544,382,830,497,819,821,305,308,1252,824,529,337,1049,616,700,1110,291,300,1167,869,663,1108,703,981,1077,800,979,1205,855,394,183,378,653,1e3,939,638,991,544,808,349,132,674,371,1177,193,1068,922,585,1023,810,565,1140,105,71,1040,746,249,969,796,215,169,777,556,81,197,34,740,881,256,203,509,510,991,808,454,1052,897,1042,1063,629,430,1133,347,669,460,1195,1043,327,408,739,848,502,816,1186,579,1149,281,831,630,1248,855,470,421,1128,563,602,455,980,968,448,778,816,661,1249,313,738,957,1110,781,592,764,434,396,1158,561,805,829,1212,435,1098,354,769,892,336,657,1054,1002,59,306,624,1111,865,913,304,628,519,705,480,972,647,975,948,545,149,671,672,415,881,596,411,486,201,389,879,544,144,751,1244,846,424,847,701,1093,522,730,199,954,575,1176,279,556,1064,169,587,867,840,114,757,937,122,51,99,518,1245,825,445,914,752,789,1156,1036,1030,263,863,1223,523,1247,261,725,53,797,798,447,781,782,592,1158,946,490,398,953,293,936,1198,771,1096,512,1002,1167,604,869,451,794,1092,571,914,446,95,133,136,20,443,1062,677,332,836,741,1132,512,1163,268,167,350,480,647,885,848,816,936,771,319,1145,496,903,99,136,118,167,45,26,431,905,293,986,1124,878,117,32,53,494,750,890,531,407,792,757,1011,1055,725,269,1146,950,1228,746,573,564,655,811,876,599,444,503,1191,858,1115,314,1180,208,772,22,120,1253,196,1186,942,700,1033,362,1250,64,41,492,124,88,307,1256,147,904,932,913,861,860,290,28,330,181,108,6,153,1224,617,331,1224,569,617,810,949,834,648,243,789,1162,986,409,335,649,535,479,1103,924,659,1238,783,1198,936,238,965,1083,1103,70,82,63,853,387,554,282,1116,708,984,156,1194,42,15,117,157,941,326,989,1023,695,1229,960,173,802,883,1071,11,449,769,1023,989,482,918,168,845,1095,550,163,287,872,641,127,280,60,867,450,1060,358,190,1136,12,904,1061,1068,585,476,790,536,1216,809,1154,343,230,543,990,1213,89,1173,330,157,861,705,519,599,867,1204,971,250,671,916,31,1250,992,1103,873,1102,1209,729,450,471,374,1021,1051,676,958,271,550,1212,750,1169,1168,1210,217,828,676,498,231,1004,316,1212,1034,799,385,1202,778,448,1040,962,1188,343,1153,871,233,719,593,591,68,39,717,419,224,101,99,94,97,1173,1091,1187,1019,347,830,1091,242,628,938,519,812,817,1064,441,117,15,776,990,1081,1055,1011,899,280,75,16,648,647,276,1215,1054,316,1193,1046,920,866,1131,135,994,1106,1058,1145,903,744,202,508,1195,891,472,578,254,874,978,121,105,44,534,1129,320,53,1146,117,713,247,564,276,647,858,882,1072,289,248,506,933,767,835,349,340,733,1114,321,282,1041,433,159,377,914,571,412,939,1e3,272,818,576,769,243,276,252,193,1177,325,106,499,1151,133,29,33,537,463,1120,303,584,365,494,893,1175,168,790,845,779,778,592,841,453,613,1219,1220,1017,687,1166,865,19,563,1253,693,1226,1064,716,580,266,9,769,576,845,1216,10,672,1010,1137,265,1064,207,912,472,891,817,396,434,315,1242,200,346,555,631,477,476,585,199,730,690,196,942,850,630,1006,701,827,1,751,72,8,62,78,915,75,671,194,96,1031,557,416,541,405,1173,992,148,782,1164,776,759,234,898,586,924,220,393,932,70,12,471,1070,722,662,390,126,384,582,947,331,549,822,1079,921,1240,85,113,2,117,1146,261,244,1243,1242,1007,98,856,213,597,819,809,343,1201,1017,1220,1082,941,157,330,1195,982,839,592,667,779,530,793,668,457,1218,1072,489,988,276,197,94,118,111,136,133,373,238,936,987,155,574,363,14,277,422,1172,997,794,272,245,554,864,178,723,485,625,630,701,281,1151,613,106,733,772,1165,1012,1092,884,191,1028,952,921,1075,1037,198,694,1003,840,867,1060,1151,141,843,333,493,436,1137,1082,916,324,1091,103,1018,646,421,291,439,300,686,903,496,689,1243,533,893,1044,526,317,380,422,597,721,821,416,637,1031,968,979,467,559,1016,361,255,4,85,675,937,148,1094,359,495,1174,888,889,590,1190,1032,989,848,1181,834,1052,1192,277,868,363,1146,170,302,278,1002,1054,629,610,1205,1122,593,388,108,527,6,994,546,1106,492,102,715,45,330,268,254,620,1199,1010,672,146,975,1081,990,449,481,769,326,970,157,1132,435,707,78,75,280,1090,522,645,624,895,896,890,750,1168,119,31,64,829,1012,908,847,424,1063,1146,302,864,864,386,178,275,1207,623,27,1151,843,788,896,895,5,146,21,400,446,679,791,698,756,499,806,1099,1175,892,494,282,898,234,933,737,258,851,803,296,597,633,515,1134,1145,744,465,634,552,314,973,858,458,897,1053,796,798,795,637,416,1016,987,936,988,1137,671,146,803,610,424,264,108,153,169,1226,777,275,1024,974,964,137,668,1196,217,409,1105,706,1222,401,523,193,263,1030,176,811,288,1141,738,313,693,666,736,930,1159,468,970,489,858,129,120,563,1128,856,658,898,354,818,769,714,182,1152,808,199,690,1151,842,613,161,449,576,66,672,194,853,153,285,45,28,26,141,27,1117,677,211,822,323,210,1028,243,252,503,766,801,799,92,121,69,82,1061,652,971,450,867,629,1144,430,35,563,120,917,1227,1015,1173,1057,888,142,1161,632,1253,548,123,122,68,25,856,113,997,818,11,576,764,378,183,380,1221,1128,269,166,357,308,305,843,605,961,635,903,651,744,675,363,114,801,820,800,870,1251,747,679,446,902,108,285,392,983,1026,212,1065,306,844,531,792,383,298,127,91,912,1001,472,1015,1014,400,138,581,763,398,266,580,425,803,424,487,794,451,977,833,765,1216,854,926,149,146,917,8,72,918,835,936,987,172,613,453,47,519,71,209,655,274,36,1061,82,696,539,1237,1021,771,1198,1119,1078,433,1004,1095,967,353,375,823,402,1074,691,22,1018,80,773,1005,119,968,778,1077,980,455,1133,118,24,99,1122,912,974,588,949,652,904,274,702,1228,1136,1229,857,780,1226,142,632,340,294,185,583,199,879,954,346,631,288,1009,791,345,841,27,141,850,570,196,61,827,1247,859,840,1060,576,11,478,820,979,800,560,649,335,1151,55,842,864,302,386,87,1173,382,1145,222,496,516,956,664,712,926,615,595,1255,240,622,724,505,971,651,1209,7,18,21,32,117,725,723,907,485,1107,898,658,1045,942,959,817,174,738,407,427,473,939,272,794,588,556,897,719,388,593,269,357,1146,306,1111,1126,582,568,1048,964,526,927,1190,1042,906,261,181,117,16,75,403,406,1092,685,389,544,830,799,534,1176,821,721,1243,259,375,1138,39,68,130,1169,439,1168,83,1173,1143,130,181,167,170,486,302,961,846,635,1016,557,214,166,720,1171,1170,589,158,230,1164,851,541,397,405,403,915,78,48,113,3,400,679,1015,845,305,918,1077,778,779,933,506,934,512,1132,707,92,938,121,392,748,527,1067,957,1231,663,869,870,146,7,1137,886,643,442,502,365,1142,290,661,491,934,442,622,847,220,635,874,1199,241,1091,1173,103,103,1213,324,123,1221,151,972,1104,1115,719,919,880,558,727,244,382,1173,830,510,752,203,669,1019,668,1254,731,1093,758,1185,1184,1249,1105,428,796,866,798,143,197,250,476,871,1068,1123,994,618,1244,811,1141,112,92,47,184,943,1047,679,1010,917,62,500,72,864,554,387,816,697,661,258,954,248,723,1189,1005,596,909,1148,1020,646,533,1121,423,645,945,1031,1211,144,1244,310,990,572,1167,96,1010,671,956,767,664,444,1156,639,764,183,434,1127,1244,827,756,420,338,352,384,784,1074,402,791,857,693,313,87,830,541,620,1070,161,990,1167,1088,1172,422,688,872,642,641,893,494,890,1057,397,963,1130,356,1055,678,180,1079,209,687,413,998,1238,511,330,28,1163,569,923,371,586,537,1120,1063,430,1214,621,1135,594,397,935,1119,1250,463,868,832,758,1184,887,772,208,1179,740,284,320,1129,1130,676,391,958,591,111,133,420,1160,1113,250,34,118,165,538,611,1236,1046,732,93,33,29,1171,201,166,281,1090,626,1011,217,1196,320,650,788,43,84,197,366,1199,620,124,77,113,881,415,256,416,557,1016,611,659,1089,267,722,390,466,598,1246,8,500,318,412,931,298,290,706,1249,1103,1102,568,577,312,576,1183,163,550,173,717,1182,910,977,1152,821,819,597,769,481,1098,530,945,1211,549,189,410,131,823,899,634,597,1060,1088,870,484,41,992,773,1233,1132,631,1001,1122,880,275,974,912,635,728,1123,258,438,954,278,1208,59,1078,544,991,574,674,360,1200,1070,875,501,1092,609,822,211,836,675,868,14,1118,410,189,934,622,505,327,739,402,922,1068,309,1246,177,517,1085,730,438,6,527,853,591,862,111,364,1112,1206,1014,280,127,81,122,43,192,489,973,1064,1226,169,111,95,101,1139,516,1045,732,372,1236,897,834,588,158,638,1003,122,81,84,268,862,100,837,1240,1241,1059,1203,355,292,877,1182,1177,966,325,1249,661,290,288,69,44,1209,666,930,1037,590,369,624,999,1111,1053,897,556,470,948,1038,96,917,672,205,528,1170,1159,466,468,302,486,509,932,904,63,114,363,757,1066,809,509,842,152,109,253,1047,225,703,1108,488,643,566,795,1245,888,825,1137,7,149,52,76,705,660,975,545,510,486,411,973,524,547,950,984,670,395,584,295,201,1171,411,1051,368,566,29,167,268,916,521,725,461,845,10,709,299,579,189,549,1118,396,812,1235,330,1163,1080,225,1047,943,191,1161,323,71,852,121,35,19,1128,924,1103,1083,1069,805,824,41,119,1250,702,1061,904,943,184,1024,139,107,88,813,1009,607,470,1038,1109,745,677,928,133,268,1227,431,321,905,95,111,862,761,774,270,1116,452,708,975,660,759,519,1140,71,14,0,114,981,703,980,843,152,842,52,705,30,1014,404,280,1144,294,603,948,1088,484,888,204,889,959,969,215,1147,323,432,551,1002,278,414,1015,697,446,931,571,834,949,588,250,46,128,232,570,850,797,442,643,1237,539,915,692,991,454,1058,1134,456,117,181,143,980,488,140,482,1181,949,1108,955,1222,534,801,379,519,92,288,288,631,1141,794,245,1092,653,249,286,462,1094,702,804,412,696,270,694,761,112,938,92,908,528,205,763,342,1171,287,894,1048,29,268,93,287,1148,894,468,1013,970,363,426,757,1070,471,161,506,1143,741,179,925,714,474,606,815,390,662,267,301,1201,1178,220,728,635,262,644,910,786,333,807,392,153,6,1138,650,259,408,327,515,353,986,878,744,651,1204,667,592,782,367,1008,838,1224,836,332,1217,394,1248,854,804,1237,410,822,549,792,567,383,882,289,938,508,507,982,812,1064,265,958,959,368,952,495,1235,153,853,527,1194,387,853,1119,236,1118,428,1105,932,1241,1240,1037,685,1050,783,1123,605,635,435,316,1208,194,591,1227,188,309,1068,799,1034,766,0,14,868,369,448,968,407,531,427,1044,927,526,341,770,1104,1201,343,871,1139,221,238,59,1208,1054,1182,1229,173,842,106,104,1256,833,329,623,943,1024,288,112,121,846,425,424,649,447,1131,577,983,351,82,652,63,135,1131,447,535,911,1065,181,261,42,922,1155,328,737,438,258,760,694,818,274,904,1166,1022,1155,216,554,1201,392,316,435,1212,1051,498,676,335,535,724,695,831,502,626,1090,1189,1101,688,646,1216,806,461,566,368,215,58,121,44,815,179,474,885,1249,428,529,802,1071,569,1224,923,354,1098,676,999,353,878,559,1024,184,933,258,248,719,233,919,1061,70,932,87,382,97,511,1156,944,616,608,436,309,1066,922,1045,681,481,1184,1185,709,500,172,1151,220,847,393,300,992,1110,636,1112,1111,0,868,277,35,37,19,484,870,1038,862,133,100,114,0,675,943,297,553,47,938,105,586,898,1107,856,110,77,1193,1006,565,43,197,81,945,1019,532,46,40,143,577,1026,983,977,474,1152,694,198,818,647,972,1115,745,923,332,662,374,267,156,1163,387,1116,1027,452,918,843,62,1151,172,453,559,184,1047,1146,53,725,647,1115,858,452,376,708,47,71,121,1183,223,171,930,736,1206,1181,885,428,47,92,519,372,1192,1052,883,802,505,42,117,143,1184,579,1186,856,997,1172,946,1158,686,45,268,1163,572,513,514,418,524,705,399,1125,241,595,1254,1255,934,741,273,793,530,943,47,105,112,74,255,85,760,761,694,842,499,27,144,61,751,1001,260,960,661,697,491,52,30,1127,630,1023,565,967,171,718,280,86,298,949,1181,640,908,205,271,1044,1043,927,594,683,329,1211,225,943,1136,960,1229,729,1209,930,716,603,1027,984,1163,156,701,1006,601,167,181,45,403,78,16,247,378,764,950,1188,753,219,385,799,232,832,570,681,1045,959,1089,659,1050,900,747,1251,1067,150,865,685,1092,1239,1190,906,1032,76,52,599,1079,1075,921,682,1135,195,311,496,222,358,918,318,493,227,437,884,589,908,825,963,518,186,1076,1131,858,489,276,602,1013,517,772,887,1165,168,358,1136,995,513,296,937,782,148,354,231,760,1247,827,65,86,60,91,39,25,591,961,605,604,1013,602,160,944,126,390,86,280,23,182,659,611,573,713,564,200,1242,348,377,236,1119,995,654,513,708,376,1007,229,762,749,326,1159,970,115,264,153,532,1019,233,147,682,684,1037,1236,590,884,1e3,589,810,1192,1193,1012,1087,1239,942,1186,969,1244,755,775,73,88,715,61,116,310,591,95,136,1155,228,328,1033,881,362,711,138,710,1185,440,299,182,611,538,364,1126,1112,478,9,818,6,853,392,82,640,36,445,446,914,40,128,143,640,70,652,977,765,972,215,795,566,967,1183,171,114,277,14,1099,926,578,5,18,7,715,1217,492,414,336,1014,1202,1110,778,514,665,604,36,63,652,30,50,726,329,235,594,15,42,261,954,242,248,938,47,121,355,1203,840,102,1007,17,846,1073,734,589,1e3,158,244,533,1243,1232,598,1231,592,778,1110,1140,594,235,390,722,826,1200,451,501,1015,491,697,891,469,912,81,34,250,1250,1005,463,782,937,1055,671,1010,146,938,71,105,812,952,1235,752,914,525,1128,1221,123,886,1096,551,789,1036,925,246,1187,517,512,273,741,79,77,997,767,349,664,269,720,166,175,401,464,51,128,130,363,868,475,48,124,79,194,672,591,2,74,85,1170,774,718,775,1143,324,122,143,43,120,22,80,439,1169,907,1108,981,507,754,524,418,1162,409,1210,848,885,1181,1136,790,168,1254,595,807,711,1082,1220,813,607,940,1041,740,905,91,127,931,780,1105,955,668,1133,669,996,441,864,1170,171,223,1214,393,1063,472,960,190,662,126,504,288,811,519,132,349,835,1230,642,872,296,513,851,370,557,901,1106,311,222,581,334,1010,715,583,1217,487,638,939,479,924,1214,90,65,827,98,715,110,1093,731,608,344,689,533,179,714,1152,1169,303,907,365,485,303,1064,738,693,492,77,110,311,546,946,752,525,203,640,12,63,629,1205,1144,1131,866,186,568,1102,1048,666,993,736,615,614,712,721,597,814,689,619,821,441,40,46,477,922,328,220,924,728,419,1029,224,816,502,1142,1060,450,634,122,25,39,432,1161,142,177,735,1232,1181,428,640,1066,1155,922,266,1214,716,1040,653,378,469,1207,275,1253,120,19,936,976,988,440,1185,377,155,758,574,723,1005,773,44,105,288,443,264,115,1104,765,341,1066,188,540,1087,829,1233,18,672,21,403,1175,915,684,852,289,823,131,1196,666,1209,337,101,51,118,564,359,1094,873,266,398,94,54,34,842,27,843,1195,460,202,498,1208,278,1114,207,1064,118,122,672,232,574,758,797,795,798,779,667,1129,462,564,1094,328,228,477,634,633,597,642,415,641,38,751,1,257,176,218,1001,912,1122,137,1133,668,1251,859,900,739,791,402,807,595,240,698,985,743,359,764,1235,1234,1168,291,632,863,339,138,763,710,77,79,856,380,317,1221,69,519,112,663,1088,1167,673,443,1097,1165,265,207,460,1042,458,1151,104,55,634,739,633,116,38,65,908,271,829,1084,1158,490,326,941,687,1223,889,749,168,918,358,535,649,911,253,206,637,85,4,124,176,1180,218,962,573,413,191,704,863,675,277,937,894,575,1008,952,812,265,1132,1143,755,799,801,534,498,59,1002,1234,1043,1044,107,17,1007,621,594,1140,72,843,918,72,500,308,941,413,687,999,878,636,580,1116,953,32,1146,441,78,280,404,994,1058,1059,810,482,949,1002,1208,498,1042,897,458,984,1194,536,962,1080,1188,1170,158,270,842,49,461,282,708,898,943,553,793,535,844,883,1222,488,1108,950,753,984,191,323,1028,360,835,987,1146,357,170,582,483,947,644,235,429,18,149,672,436,493,1033,785,440,159,1163,181,996,944,504,126,1078,382,544,948,975,1088,995,803,425,1133,137,839,990,543,572,116,65,90,1154,540,1153,856,898,708,324,1143,89,707,1208,1002,777,1226,251,122,197,143,560,724,622,652,70,36,228,412,1062,838,895,624,442,560,622,1244,90,827,228,443,477,394,855,1248,1083,546,728,327,402,691,46,117,441,1140,346,105,389,242,954,121,112,105,285,854,853,160,140,970,650,1130,899,1104,457,1115,803,851,1164,1178,178,386,470,1109,1248,8,918,500,1163,996,13,293,953,431,721,814,1113,76,30,726,620,254,164,935,541,382,219,799,909,637,559,253,1093,180,1254,640,428,932,145,763,581,132,835,360,1173,888,1213,420,237,338,312,577,351,158,1e3,638,122,130,68,944,390,826,71,938,852,675,1250,868,935,397,541,1096,886,442,311,946,496,963,825,1057,333,786,227,475,542,363,27,499,1117,67,94,122,149,194,671,946,546,283,1142,395,656,631,1132,1141,1207,469,891,455,602,1187,1102,872,287,554,392,853,975,990,1088,1109,492,1248,334,520,154,1210,1160,743,299,785,579,401,827,464,962,413,1080,236,754,410,1193,732,1046,1148,415,596,466,150,1231,568,965,1103,164,978,562,1032,1202,448,209,1166,687,869,604,1123,56,2,113,146,672,917,115,20,239,481,681,1098,1164,990,776,618,994,1059,225,206,253,775,1213,1174,788,650,1138,1086,238,373,651,903,824,770,307,1218,213,1060,597,248,1143,506,632,417,340,696,280,539,149,917,1010,439,907,300,452,1027,322,1138,999,624,432,142,340,1105,1222,955,1076,1048,894,54,67,128,1172,1025,658,323,1147,210,974,901,593,1072,307,684,345,756,338,1180,176,1030,568,582,965,916,671,1137,614,742,1207,849,900,497,83,1143,1091,1084,454,690,174,1182,1231,221,1139,161,208,704,887,632,1161,863,1100,1225,427,1110,992,781,931,1014,91,840,1203,587,271,1212,829,1011,426,1020,286,1228,1229,32,441,53,369,1032,448,124,2,56,550,271,1183,900,849,747,505,802,933,619,747,849,471,221,161,1202,906,1234,265,951,952,471,722,374,264,285,108,678,1240,837,788,1138,896,841,843,104,107,715,98,91,1014,23,733,1180,772,985,1162,743,107,98,57,122,84,67,773,907,723,1215,278,1054,79,997,48,2,124,4,572,514,1167,1013,1246,517,916,1082,521,125,461,806,227,766,437,298,23,1014,465,791,739,880,1122,388,625,485,365,784,991,352,1193,1192,372,627,334,154,1136,1228,226,375,259,823,606,977,972,1003,694,158,118,51,122,24,51,130,1045,850,942,1170,223,205,247,1040,378,1045,664,1039,1203,456,1204,1238,609,685,156,13,996,691,1074,813,949,640,652,193,325,401,695,848,989,556,588,1114,1241,369,467,890,1044,893,830,242,389,653,877,434,194,1227,917,228,1155,412,842,806,49,1205,610,660,644,538,165,284,1041,680,639,503,444,601,180,701,608,731,436,499,104,141,614,1237,915,285,153,392,280,298,60,101,118,136,1106,1134,1058,1143,1132,741,436,731,333,656,657,414,674,1039,664,294,1144,185,900,859,819,564,247,359,942,969,959,798,135,447,1011,131,899,1245,1100,383,555,346,1140,1213,888,1174,1178,1201,554,882,628,314,1152,474,179,1218,1104,770,277,114,937,897,1052,834,1232,1029,177,997,317,422,279,788,895,1157,1021,374,1235,764,396,330,861,862,817,738,1064,500,578,318,986,353,1196,346,69,58,96,149,1010,686,1069,903,219,1035,385,246,1019,1187,993,364,736,454,1084,490,814,327,813,427,1225,331,905,740,1230,260,1001,880,911,894,367,89,83,324,620,161,312,491,861,290,18,1137,149,1246,1013,468,961,1073,846,257,218,733,1125,198,874,937,757,1055,403,892,1175,1066,525,216,1111,1112,1126,833,341,765,64,992,41,1151,453,841,1246,735,177,522,1090,701,856,255,110,1105,1249,706,763,720,710,81,94,67,106,1117,499,264,1062,412,739,634,465,242,1091,248,461,841,842,130,93,133,1102,287,1048,851,543,230,728,546,994,999,636,1111,1127,30,76,983,212,399,107,139,73,515,327,814,675,0,277,69,121,58,894,1148,575,910,833,977,768,120,80,940,237,1113,413,573,655,521,710,720,144,310,116,367,894,1008,1049,700,1121,712,1207,891,578,190,318,274,1166,209,255,79,57,411,752,510,283,692,454,52,50,599,893,964,742,520,1017,154,735,598,1232,811,599,519,1041,282,234,655,209,413,632,339,417,329,683,1256,373,936,835,857,313,304,13,387,1194,28,181,26,736,364,1206,247,713,1040,542,1101,1020,517,177,246,39,136,122,159,433,1078,403,75,539,133,33,130,107,57,110,1039,674,574,532,233,593,285,264,804,81,54,84,298,86,696,38,90,751,1225,1100,518,446,445,902,688,421,646,1132,755,1141,1077,779,800,709,579,1184,299,440,785,1061,63,12,1250,148,992,427,331,617,102,492,139,225,1211,206,351,399,241,848,695,502,956,516,1086,414,1014,1015,1056,1110,1202,934,505,933,855,948,470,384,352,965,831,626,365,724,560,335,677,745,332,190,578,472,381,586,1107,458,202,460,90,1244,751,234,680,1041,1038,870,747,557,1031,901,286,1229,877,798,866,135,501,609,998,1096,442,934,235,644,165,899,823,650,138,711,520,931,60,23,514,604,1167,295,584,1169,699,1089,1087,363,542,426,637,206,1031,1161,191,863,481,1139,1045,227,820,766,966,1177,923,53,441,261,943,623,297,774,1170,270,228,1062,443,707,1002,512,162,781,992,59,551,278,1150,1242,1243,250,84,54,539,75,915,1008,279,895,1007,102,139,826,722,1200,24,94,51,357,166,201,1004,1215,316,742,297,1207,1253,563,35,1204,867,587,1129,667,356,370,214,557,966,827,325,425,846,734,1100,1245,518,1104,1218,457,483,1076,186,489,192,758,1160,348,1150,722,1070,1200,48,997,113,1086,835,767,357,201,486,863,263,339,426,1011,757,758,192,1185,815,350,789,1252,308,918,1188,950,746,244,1242,315,1029,419,880,250,40,441,929,418,928,121,852,1140,259,650,823,205,1183,271,129,858,973,91,23,696,87,1091,830,20,527,264,759,776,1081,576,1026,577,1065,367,306,965,692,1083,924,1083,728,435,1233,829,1123,604,605,958,368,1051,37,1253,80,586,381,537,139,255,1007,375,353,999,1193,920,1006,461,10,152,660,855,1205,61,144,38,1139,1086,516,1110,1056,291,98,255,856,383,889,204,270,158,694,720,763,1171,575,909,1176,1093,701,180,195,621,852,128,34,197,970,1013,160,822,1224,331,649,1076,911,1140,699,1087,1028,210,652,321,1116,282,477,673,748,594,1135,683,3,124,48,895,838,1008,210,588,652,101,94,128,500,918,308,944,826,511,432,323,1161,749,567,229,684,195,852,807,820,786,1095,163,967,1241,240,1255,843,841,806,874,241,1125,657,395,295,1140,852,621,614,1207,712,38,1,65,1219,711,1220,1247,1174,1223,613,172,1117,955,251,780,779,1129,800,875,198,1003,1185,299,709,881,1033,596,484,1038,948,37,1018,22,690,1085,1084,1134,744,1204,1107,658,1025,423,1120,1005,1092,245,884,777,508,1053,445,411,1171,417,339,263,508,202,1053,522,1093,608,591,136,68,649,1131,1076,525,1066,203,1234,1056,1202,147,1256,683,132,360,674,936,319,976,1061,932,63,1187,602,517,761,231,1215,51,101,128,447,649,560,466,1231,598,107,102,255,301,809,1201,115,153,527,379,801,800,982,981,839,688,422,421,756,1160,420,754,418,929,941,1080,413,425,734,995,581,902,145,295,750,657,714,925,659,928,827,745,567,792,371,62,843,500,1217,1144,1205,1175,742,915,762,371,523,641,415,1148,660,545,855,1136,190,960,875,562,978,1103,479,873,927,1195,839,167,26,1163,338,237,940,618,1059,1251,1228,950,670,901,532,593,697,656,414,1191,504,444,804,264,412,756,743,1160,690,730,1085,292,1182,174,700,362,1121,1046,1037,1075,49,125,109,717,260,880,902,581,1010,63,904,70,710,1082,711,262,910,1152,591,25,130,1043,1195,927,1089,1050,1087,859,1251,355,981,980,839,743,1162,1210,891,578,926,822,929,677,350,647,648,676,1098,391,1035,909,596,826,1200,998,81,67,54,1148,909,575,1163,26,181,1205,394,1217,124,102,17,88,124,139,704,191,952,847,635,846,334,627,1010,542,1025,1101,491,1015,1227,95,862,1227,885,816,1249,1042,460,459,553,297,793,1085,438,561,17,139,124,478,818,1125,1137,5,21,255,57,1007,832,1184,1186,90,144,116,968,1077,979,77,492,113,986,1196,409,970,140,488,10,109,152,1191,374,662,329,833,429,1216,926,1099,680,234,586,707,435,1208,1170,718,171,643,1051,566,9,449,818,957,738,174,1075,920,1046,1033,616,436,461,109,305,77,3,997,827,726,1127,143,128,67,1150,1113,1160,55,613,1117,255,56,4,841,613,842,1128,421,380,751,61,1247,1230,873,398,1178,386,301,398,293,905,680,586,1120,164,562,620,21,149,7,438,805,561,814,813,1113,934,273,1096,458,1053,202,992,907,773,1018,344,646,384,965,582,312,351,366,1207,297,623,181,330,45,991,784,1078,64,773,119,9,576,449,535,1065,844,1150,721,1113,584,1142,365,725,250,916,731,1254,333,279,787,788,167,29,862,576,478,1026,633,739,408,73,715,102,596,1033,1035,442,797,560,1212,1095,1004,79,110,113,1024,275,623,41,31,119,740,256,1230,283,454,490,765,1104,972,94,81,250,400,1014,931,686,496,946,315,200,828,714,659,182,547,236,1185,794,487,939,1139,481,449,181,42,441,933,802,737,383,1100,531,498,278,1215,151,619,689,139,492,73,908,589,528,645,1049,1121,464,751,1247,619,849,821,938,289,852,653,1040,249,974,1024,361,185,1217,583,992,782,162,646,344,533,1062,527,239,569,792,407,509,486,510,69,288,92,684,682,195,1049,608,616,929,822,754,1e3,245,272,1194,156,996,696,86,91,20,1062,239,376,294,583,476,477,748,292,434,877,89,103,83,519,69,346,255,139,17,20,264,443,333,1254,807,729,634,450,352,991,692,37,80,563,528,589,1170,892,750,494,125,49,841,395,1142,584,239,1097,443,140,602,980,269,521,720,603,716,430,347,1019,669,108,392,527,305,600,918,1151,499,500,11,818,449,1019,919,233,32,725,261,675,14,363,967,163,1183,1127,50,52,1076,894,911,525,914,1022,951,704,952,180,678,1254,1201,871,392,861,1227,862,906,459,1234,1117,842,55,862,268,330,820,240,979,113,856,79,351,983,399,508,982,1195,802,529,737,522,608,1049,1112,1124,985,756,698,743,1003,487,451,113,110,255,489,758,988,926,712,891,503,789,243,1191,252,988,370,901,974,551,59,498,174,817,292,460,1043,459,18,5,1137,165,699,1140,1219,520,711,529,1071,337,1173,89,1143,1135,621,195,1182,717,224,1050,1239,1087,1129,356,1130,1008,575,279,1236,1190,590,759,660,187,824,337,1209,1224,332,923,815,925,179,21,146,149,143,84,43,1238,1036,1156,117,46,250,200,1160,828,467,369,968,5,7,146,1185,236,377,107,110,88,1071,1197,337,662,504,1191,183,653,434,136,130,25,1025,688,1101,1215,231,498,685,609,406,875,978,874,843,806,1117,941,330,1080,483,582,1048,893,526,964,336,403,404,844,306,1197,1138,624,896,913,865,1166,256,415,642,981,982,507,316,1054,1208,1078,784,785,74,113,255,37,22,1253,42,143,441,417,263,257,445,342,902,1139,238,1086,404,16,78,457,1072,1115,1217,1248,492,423,1005,1189,187,803,1164,1179,1121,362,1107,1025,475,370,974,361,889,383,749,695,630,831,89,1213,103,960,260,173,298,696,412,1059,355,1251,926,1237,615,431,953,1116,1206,985,698,36,70,1061,806,109,125,1196,353,823,584,303,1169,386,302,301,535,883,724,754,236,547,13,156,387,678,1079,1240,1007,583,715,811,1244,876,1156,511,1238,727,558,217,250,672,671,1023,482,810,692,965,352,1083,692,283,536,1194,1216,777,251,507,160,602,140,543,513,572,1006,920,601,869,1123,618,1188,1080,753,1094,1028,1061,276,243,648,564,462,655,752,411,445,830,97,541,544,879,808,1070,620,562,1239,1050,685,1204,651,971,1090,423,1189,889,1223,1174,1082,1137,627,850,574,232,1116,580,1027,113,85,124,91,60,298,1120,463,1005,224,1232,1231,890,1168,1044,696,23,280,157,970,861,1030,863,704,1075,1079,920,367,838,306,759,187,1164,283,490,946,1040,1188,746,1021,1157,771,725,117,250,1057,1173,405,498,1051,886,958,391,681,677,929,928,253,559,1047,761,967,774,728,994,1123,567,762,229,678,837,1255,430,1144,603,212,1125,399,1095,1212,134,563,80,1018,790,226,536,1146,864,441,188,1153,540,1087,1012,829,558,244,315,239,673,1097,3,77,124,255,17,107,788,787,320,16,539,280,1173,83,103,908,1012,884,834,1192,810,875,1003,1200,69,112,44,449,161,1139,710,521,1082,101,136,111,314,1115,882,1080,1163,753,679,917,1015,337,1197,993,188,1066,309,347,1133,455,1108,251,955,558,315,828,1058,456,1203,118,94,24,250,54,94,868,381,475,12,70,904,342,445,1171,959,215,368,996,864,1194,780,857,913,768,689,344,1064,556,1114,58,288,105,300,907,992,489,129,973,854,1237,926,980,1133,839,654,1073,513,570,832,1186,1094,1061,702,571,931,412,918,62,318,1236,372,1052,533,244,727,750,295,1169,2,4,74,194,917,96,704,951,1165,550,1095,134,1253,151,689,1113,813,940,910,644,429,15,261,441,440,377,159,322,376,452,1045,1039,850,962,713,573,822,836,1224,463,537,868,995,734,654,4,56,74,459,1043,1234,221,471,1198,919,246,1029,1076,483,1048,345,791,756,1225,518,963,1109,997,492,997,1109,317,495,359,1235,777,1053,556,919,1029,880,813,1074,1009,558,828,217,698,729,930,421,422,380,906,1202,1032,498,886,551,749,383,567,639,1156,789,940,607,338,359,247,764,50,30,705,935,382,1078,922,477,585,733,207,1114,310,1244,1247,1072,684,289,806,1216,1099,93,862,33,1240,921,1037,875,874,198,55,104,106,354,676,231,547,524,754,197,118,128,297,742,964,1067,865,304,320,1130,650,404,539,16,548,1253,1128,590,1032,369,365,502,831,21,672,1137,927,137,964,1101,646,1020,1094,952,1028,291,1056,1234,121,346,288,1117,806,141,192,547,1185,800,1129,379,456,1134,1204,257,263,176,607,345,338,670,984,536,196,570,1186,727,217,1011,628,705,524,706,290,860,674,664,349,200,348,1160,925,1036,659,230,990,1164,855,545,948,13,864,1163,562,875,1070,927,839,137,698,930,1206,887,704,1165,99,101,591,10,305,109,357,486,170,1011,1020,727,149,96,66,1068,871,1153,588,210,1147,1055,356,782,651,824,1209,1019,945,668,336,892,403,102,124,255,721,1150,1243,175,1247,523,923,1177,371,1062,264,527,672,250,118,525,1022,216,670,536,226,512,1096,273,987,574,360,748,871,476,500,843,1117,261,1146,32,763,145,342,775,755,1143,347,455,1187,555,1233,631,961,604,665,1197,1126,993,1014,127,298,664,1045,516,1127,726,50,1086,767,956,626,1189,625,726,705,76,232,758,832,361,1024,559,56,255,124,1209,450,971,307,1072,1218,249,746,1228,717,880,419,1151,841,141,1157,976,771,408,515,633,136,25,68,57,98,1007,1163,28,45,1243,689,821,276,988,252,128,46,181,423,1121,1120,831,281,626,165,1140,235,614,915,742,1033,493,1035,130,197,24,513,1073,665,1112,985,1206,534,379,1129,797,447,560,1020,533,727,579,785,1149,532,1031,945,127,60,931,1088,663,870,523,371,193,748,673,527,466,1246,468,97,382,541,673,239,527,780,251,1226,812,396,817,250,197,84,1166,904,913,791,1009,1074,495,952,1094,1159,326,687,93,167,862,554,178,1178,1159,687,865,478,11,9,87,541,1173,1222,706,970,1239,1092,1012,1244,775,1174,322,603,294,501,451,1092,1025,1172,688,1038,747,1221,768,1253,689,367,1065,911,538,1152,182,1132,1233,435,1180,1030,208,766,820,801,637,1016,559,1230,872,873,1134,1106,1145,1227,861,491,307,147,684,972,480,606,531,1100,427,1027,603,322,1159,865,466,467,979,240,1036,1238,659,488,1222,970,912,469,275,836,211,677,1140,1087,555,547,192,973,412,1022,914,404,403,539,1147,340,1114,412,1155,1022,1245,204,888,888,1057,825,1138,375,999,180,601,1079,527,20,115,717,173,260,601,920,1079,130,136,39,976,1191,988,826,998,511,1244,1127,876,506,741,934,226,1228,670,1225,963,1119,381,1107,475,1216,853,854,86,23,60,821,849,497,807,240,820,638,487,1003,500,499,578,501,998,1200,303,485,907,854,285,804,552,698,791,181,441,996,947,483,186,986,1162,1124,427,617,473,878,1124,636,1066,540,809,703,488,980,57,79,124,565,810,1193,815,606,350,985,1124,1162,552,634,729,393,847,1063,175,523,401,136,99,672,461,152,1216,227,786,820,366,351,241,537,381,868,1160,1210,828,830,1173,97,251,1108,507,997,3,492,819,859,213,824,805,529,768,80,1253,873,872,1102,398,580,953,409,217,1210,857,1226,693,227,493,333,314,628,973,341,1256,770,417,257,733,197,130,94,583,1007,376,254,1199,874,672,66,96,1116,321,431,1051,643,886,1231,1182,224,609,1238,998,761,1004,967,95,591,101,925,815,789,61,310,65,902,342,145,785,159,1078,65,310,1247,1197,306,1126,123,151,1253,308,843,72,497,900,819,879,389,954,130,122,94,301,302,509,130,128,181,133,862,29,1115,1072,882,976,1157,374,617,569,407,932,1105,780,76,599,1127,856,708,1007,1147,1114,588,124,492,110,612,866,796,1027,580,716,1252,600,305,733,218,1180,507,508,777,340,417,733,503,639,789,34,54,118,152,305,1216,1117,106,842,947,186,866,1091,87,97,808,879,199,816,1142,697,931,23,298,657,336,414,125,841,461,668,945,530,954,438,730,1191,976,374,615,1237,614,424,629,1063,1149,784,384,773,64,1250,645,522,1049,1241,1037,369,312,161,576,1245,383,204,121,1140,519,768,344,1018,88,110,715,35,120,37,698,552,729,960,472,1001,640,82,70,561,1084,1085,814,597,515,104,843,141,1228,286,249,520,1219,1017,883,505,724,680,1179,284,1168,439,291,1189,723,625,354,760,818,809,540,1154,1168,1234,1044,320,787,534,1096,1002,551,318,62,8,1246,598,735,100,95,1227,58,44,112,475,1025,542,341,833,1256,881,740,1179,208,1030,704,133,93,268,610,187,660,361,214,370,34,128,94,19,120,1128,340,1147,432,817,434,292,1136,226,790,19,37,563,128,118,54,304,313,957,943,530,1211,668,793,297,775,324,1213,1149,785,784,977,606,474,869,1251,870,55,106,613,808,690,454,716,1214,430,1214,266,479,27,104,1151,993,1126,364,188,1068,1153,995,296,803,1163,864,387,759,1081,975,100,1227,268,932,780,913,550,134,1212,519,938,112,58,105,346,438,737,529,350,606,480,969,612,796,523,1223,762,287,641,1148,1031,532,901,36,640,63,791,465,552,700,616,1033,822,410,754,133,95,100,932,12,640,371,762,567,827,751,464,297,964,668,376,322,294,93,130,167,880,388,719,657,750,892,591,130,862,216,1155,1066,254,978,164,398,905,1230,305,845,461,113,492,3,499,842,104,119,1005,1250,790,1216,845,51,94,99,1090,645,423,90,38,144,928,418,705,1112,636,1124,1119,935,1078,1057,405,397,992,64,31,256,642,1230,334,581,138,1073,961,665,905,321,1041,1046,1236,1037,58,112,288,162,782,781,612,947,866,1034,385,1035,1149,969,1186,499,1099,578])};const $g=Kg;var tf=["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"],ef=new Gg.CubeTextureLoader;ef.setPath("./assets/images/Yokohama3/");var nf=ef.load(tf);nf.isCubeTexture=!0;const rf={FLOOR_WIDTH:1e3,SKYBOX_WIDTH:5e3,FLOOR_TEXTURE_PATH:"./assets/images/wood1.jpg",BASE_TEXTURE_PATH:"./assets/images/granito1.jpg",AXIS_TEXTURE_PATH:"./assets/images/metal2.jpg",HUMERUS_TEXTURE_PATH:"./assets/images/metal1.jpg",DISC_TEXTURE_PATH:"./assets/images/bump1.jpg",NERVE_TEXTURE_PATH:"./assets/images/bump2.jpg",WRIST_TEXTURE_PATH:"./assets/images/bump1.jpg",SKYBOX_TEXTURE_PATH:"./assets/images/Yokohama3/",SKYBOX_TEXTURE_IMAGES_NAMES:tf,SKYBOX_CUBE_TEXTURE:nf,TRAJECTORY_ANGLE_DECAY:.5,TRAJECTORY_SPLINE_NUM_SEGMENTS:30,TRAJECTORY_DIST_MAX:1e3,TRAJECTORY_DIST_MIN:200,TRAJECTORY_DIST_STEP:200,BULLET_STEP_DURATION_MS:75,FSM_DURATION_LOADING_BULLET_MS:1e3,FSM_DURATION_BULLET_TRAVELLING_MS:2250,FSM_DURATION_RESTART_MS:1e3};function sf(t,e){this.is_static=t,void 0!==this.is_static?(this.obj_mesh=e,null!=this.obj_mesh?(this.aabb=(new Gg.Box3).setFromObject(this.obj_mesh),console.debug("ModelCollider: aabb: "+JSON.stringify(this.aabb)),this.aabb_helper=new Gg.BoxHelper(this.obj_mesh,65280)):console.error("Collider: 'inner_mesh' is undefined")):console.error("Collider: 'is_static' is undefined")}sf.prototype.update_aabb=function(){this.is_static||this.obj_mesh.geometry.computeBoundingBox(),this.aabb.copy(this.obj_mesh.geometry.boundingBox).applyMatrix4(this.obj_mesh.matrixWorld),this.update_aabb_helper()},sf.prototype.update_aabb_helper=function(){this.aabb_helper.update()},sf.prototype.dispose_buffers=function(){this.aabb_helper.geometry.dispose(),this.aabb_helper.material.dispose(),this.aabb_helper.geometry=null,this.aabb_helper.material=null,this.aabb_helper=null,this.aabb=null},sf.prototype.is_colliding_with=function(t){return this.aabb.intersectsBox(t)};const of=sf,af=["BodySprite","Texture"],lf=3.142,cf=500,hf=lf/180,uf="euler",df=()=>!!process&&(process.env,!1),pf={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*(lf/2))},easeOutSine:function(t){return Math.sin(t*(lf/2))},easeInOutSine:function(t){return-.5*(Math.cos(lf*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}},{easeLinear:gf,easeInQuad:ff,easeOutQuad:mf,easeInOutQuad:Af,easeInCubic:Cf,easeOutCubic:vf,easeInOutCubic:yf,easeInQuart:If,easeOutQuart:xf,easeInOutQuart:bf,easeInSine:_f,easeOutSine:wf,easeInOutSine:Mf,easeInExpo:Sf,easeOutExpo:Ef,easeInOutExpo:Tf,easeInCirc:Lf,easeOutCirc:Pf,easeInOutCirc:Rf,easeInBack:Df,easeOutBack:Of,easeInOutBack:zf}=pf,Bf=t=>pf[t]?pf[t]:pf.easeLinear,Hf=gf,Nf=["Position","Life","Radius","Mass","Body","BodySprite","Texture","PolarVelocity","RadialVelocity","VectorVelocity"],Ff=["Alpha","Attraction","Color","CrossZone","Force","Gravity","RandomDrift","Repulsion","Rotate","Scale","Spring"],Uf=["BoxZone","LineZone","MeshZone","PointZone","SphereZone"];function Gf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const kf=function(t){var e={};if("number"==typeof t)i=Math.floor(t),e.r=(t>>16&255)/255,e.g=(t>>8&255)/255,e.b=(255&t)/255;else if("string"==typeof t){var n;if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t))e.r=Math.min(255,parseInt(n[1],10))/255,e.g=Math.min(255,parseInt(n[2],10))/255,e.b=Math.min(255,parseInt(n[3],10))/255;else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var i=n[1];e.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,e.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,e.b=parseInt(i.charAt(4)+i.charAt(5),16)/255}}else e.r=t.r,e.g=t.g,e.b=t.b;return e},Wf={_id:0,_uids:new Map,getNewId:function(){return"PUID_"+ ++this._id},id:function(t){if(this._uids.has(t))return this._uids.get(t);const e=this.getNewId();return this._uids.set(t,e),e}};var Vf,jf,Yf,Xf,Qf,Zf,qf,Jf,Kf,$f={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*$f.DEG2RAD},radToDeg:function(t){return t*$f.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function tm(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function em(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function nm(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function im(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||im.DefaultOrder}Object.assign(tm,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,o){var a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],p=r[s+2],g=r[s+3];if(h!==g||a!==u||l!==d||c!==p){var f=1-o,m=a*u+l*d+c*p+h*g,A=m>=0?1:-1,C=1-m*m;if(C>Number.EPSILON){var v=Math.sqrt(C),y=Math.atan2(v,m*A);f=Math.sin(f*y)/v,o=Math.sin(o*y)/v}var I=o*A;if(a=a*f+u*I,l=l*f+d*I,c=c*f+p*I,h=h*f+g*I,f===1-o){var x=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=x,l*=x,c*=x,h*=x}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(tm.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(tm.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),p=a(r/2);return"XYZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"YXZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"ZXY"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"ZYX"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"YZX"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p):"XZY"===s&&(this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(h-l)*e,this._y=(s-c)*e,this._z=(o-r)*e):i>a&&i>u?(e=2*Math.sqrt(1+i-a-u),this._w=(h-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+c)/e):a>u?(e=2*Math.sqrt(1+a-i-u),this._w=(s-c)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+h)/e):(e=2*Math.sqrt(1+u-i-a),this._w=(o-r)/e,this._x=(s+c)/e,this._y=(l+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs($f.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),h=Math.atan2(c,o),u=Math.sin((1-e)*h)/c,d=Math.sin(e*h)/c;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(em.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(Vf=new tm,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Vf.setFromEuler(t))}),applyAxisAngle:function(){var t=new tm;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new em;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new em;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos($f.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(nm.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,s,o,a,l,c,h,u,d,p,g,f){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=s,m[9]=o,m[13]=a,m[2]=l,m[6]=c,m[10]=h,m[14]=u,m[3]=d,m[7]=p,m[11]=g,m[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new nm).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new em;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),s=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=s*c,d=s*h,p=o*c,g=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=d+p*l,e[5]=u-g*l,e[9]=-o*a,e[2]=g-u*l,e[6]=p+d*l,e[10]=s*a}else if("YXZ"===t.order){var f=a*c,m=a*h,A=l*c,C=l*h;e[0]=f+C*o,e[4]=A*o-m,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=m*o-A,e[6]=C+f*o,e[10]=s*a}else if("ZXY"===t.order){f=a*c,m=a*h,A=l*c,C=l*h;e[0]=f-C*o,e[4]=-s*h,e[8]=A+m*o,e[1]=m+A*o,e[5]=s*c,e[9]=C-f*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){u=s*c,d=s*h,p=o*c,g=o*h;e[0]=a*c,e[4]=p*l-d,e[8]=u*l+g,e[1]=a*h,e[5]=g*l+u,e[9]=d*l-p,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var v=s*a,y=s*l,I=o*a,x=o*l;e[0]=a*c,e[4]=x-v*h,e[8]=I*h+y,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=y*h+I,e[10]=v-x*h}else if("XZY"===t.order){v=s*a,y=s*l,I=o*a,x=o*l;e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=v*h+x,e[5]=s*c,e[9]=y*h-I,e[2]=I*h-y,e[6]=o*c,e[10]=x*h+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(qf=new em(0,0,0),Jf=new em(1,1,1),function(t){return this.compose(qf,t,Jf)}),lookAt:(Xf=new em,Qf=new em,Zf=new em,function(t,e,n){var i=this.elements;return Zf.subVectors(t,e),0===Zf.lengthSq()&&(Zf.z=1),Zf.normalize(),Xf.crossVectors(n,Zf),0===Xf.lengthSq()&&(1===Math.abs(n.z)?Zf.x+=1e-4:Zf.z+=1e-4,Zf.normalize(),Xf.crossVectors(n,Zf)),Xf.normalize(),Qf.crossVectors(Zf,Xf),i[0]=Xf.x,i[4]=Qf.x,i[8]=Zf.x,i[1]=Xf.y,i[5]=Qf.y,i[9]=Zf.y,i[2]=Xf.z,i[6]=Qf.z,i[10]=Zf.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],g=n[6],f=n[10],m=n[14],A=n[3],C=n[7],v=n[11],y=n[15],I=i[0],x=i[4],b=i[8],_=i[12],w=i[1],M=i[5],S=i[9],E=i[13],T=i[2],L=i[6],P=i[10],R=i[14],D=i[3],O=i[7],z=i[11],B=i[15];return r[0]=s*I+o*w+a*T+l*D,r[4]=s*x+o*M+a*L+l*O,r[8]=s*b+o*S+a*P+l*z,r[12]=s*_+o*E+a*R+l*B,r[1]=c*I+h*w+u*T+d*D,r[5]=c*x+h*M+u*L+d*O,r[9]=c*b+h*S+u*P+d*z,r[13]=c*_+h*E+u*R+d*B,r[2]=p*I+g*w+f*T+m*D,r[6]=p*x+g*M+f*L+m*O,r[10]=p*b+g*S+f*P+m*z,r[14]=p*_+g*E+f*R+m*B,r[3]=A*I+C*w+v*T+y*D,r[7]=A*x+C*M+v*L+y*O,r[11]=A*b+C*S+v*P+y*z,r[15]=A*_+C*E+v*R+y*B,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new em;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+t[11]*(+e*l*h-e*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*a*h+e*o*u+i*s*h-n*s*u+n*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],g=i[10],f=i[11],m=i[12],A=i[13],C=i[14],v=i[15],y=p*C*u-A*g*u+A*h*f-c*C*f-p*h*v+c*g*v,I=m*g*u-d*C*u-m*h*f+l*C*f+d*h*v-l*g*v,x=d*A*u-m*p*u+m*c*f-l*A*f-d*c*v+l*p*v,b=m*p*h-d*A*h-m*c*g+l*A*g+d*c*C-l*p*C,_=r*y+s*I+o*x+a*b;if(0===_){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(w);return console.warn(w),this.identity()}var M=1/_;return n[0]=y*M,n[1]=(A*g*a-p*C*a-A*o*f+s*C*f+p*o*v-s*g*v)*M,n[2]=(c*C*a-A*h*a+A*o*u-s*C*u-c*o*v+s*h*v)*M,n[3]=(p*h*a-c*g*a-p*o*u+s*g*u+c*o*f-s*h*f)*M,n[4]=I*M,n[5]=(d*C*a-m*g*a+m*o*f-r*C*f-d*o*v+r*g*v)*M,n[6]=(m*h*a-l*C*a-m*o*u+r*C*u+l*o*v-r*h*v)*M,n[7]=(l*g*a-d*h*a+d*o*u-r*g*u-l*o*f+r*h*f)*M,n[8]=x*M,n[9]=(m*p*a-d*A*a-m*s*f+r*A*f+d*s*v-r*p*v)*M,n[10]=(l*A*a-m*c*a+m*s*u-r*A*u-l*s*v+r*c*v)*M,n[11]=(d*c*a-l*p*a-d*s*u+r*p*u+l*s*f-r*c*f)*M,n[12]=b*M,n[13]=(d*A*o-m*p*o+m*s*g-r*A*g-d*s*C+r*p*C)*M,n[14]=(m*c*o-l*A*o-m*s*h+r*A*h+l*s*C-r*c*C)*M,n[15]=(l*p*o-d*c*o+d*s*h-r*p*h-l*s*g+r*c*g)*M,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,p=r*h,g=s*c,f=s*h,m=o*h,A=a*l,C=a*c,v=a*h,y=n.x,I=n.y,x=n.z;return i[0]=(1-(g+m))*y,i[1]=(d+v)*y,i[2]=(p-C)*y,i[3]=0,i[4]=(d-v)*I,i[5]=(1-(u+m))*I,i[6]=(f+A)*I,i[7]=0,i[8]=(p+C)*x,i[9]=(f-A)*x,i[10]=(1-(u+g))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:(jf=new em,Yf=new nm,function(t,e,n){var i=this.elements,r=jf.set(i[0],i[1],i[2]).length(),s=jf.set(i[4],i[5],i[6]).length(),o=jf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Yf.copy(this);var a=1/r,l=1/s,c=1/o;return Yf.elements[0]*=a,Yf.elements[1]*=a,Yf.elements[2]*=a,Yf.elements[4]*=l,Yf.elements[5]*=l,Yf.elements[6]*=l,Yf.elements[8]*=c,Yf.elements[9]*=c,Yf.elements[10]*=c,e.setFromRotationMatrix(Yf),n.x=r,n.y=s,n.z=o,this}),makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),h=(e+t)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),im.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],im.DefaultOrder="XYZ",Object.defineProperties(im.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(im.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=$f.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===e?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(){var t=new nm;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(Kf=new tm,function(t){return Kf.setFromEuler(this),this.setFromQuaternion(Kf,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new em(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});const rm={toScreenPos:function(){var t=new em;return function(e,n,i){return t.copy(e),t.project(n),t.x=Math.round((t.x+1)*i.width/2),t.y=Math.round((1-t.y)*i.height/2),t.z=0,t}}(),toSpacePos:function(){var t,e=new em,n=new em;return function(i,r,s){return e.set(i.x/s.width*2-1,-i.y/s.height*2+1,.5),e.unproject(r),n.copy(e.sub(r.position).normalize()),t=-r.position.z/n.z,e.copy(r.position),e.add(n.multiplyScalar(t)),e}}()},sm={initValue:function(t,e){return null!=t&&null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},destroyArray:function(t){t.length=0},destroyObject:function(t){for(var e in t)delete t[e]},isUndefined:function(){for(var t in arguments){var e=arguments[t];if(void 0!==e)return!1}return!0},setVectorByObj:function(t,e){void 0!==e.x&&(t.position.x=e.x),void 0!==e.y&&(t.position.y=e.y),void 0!==e.z&&(t.position.z=e.z),void 0!==e.vx&&(t.velocity.x=e.vx),void 0!==e.vy&&(t.velocity.y=e.vy),void 0!==e.vz&&(t.velocity.z=e.vz),void 0!==e.ax&&(t.acceleration.x=e.ax),void 0!==e.ay&&(t.acceleration.y=e.ay),void 0!==e.az&&(t.acceleration.z=e.az),void 0!==e.p&&t.position.copy(e.p),void 0!==e.v&&t.velocity.copy(e.v),void 0!==e.a&&t.acceleration.copy(e.a),void 0!==e.position&&t.position.copy(e.position),void 0!==e.velocity&&t.velocity.copy(e.velocity),void 0!==e.accelerate&&t.acceleration.copy(e.accelerate)},setPrototypeByObj:function(t,e,n){for(var i in e)t.hasOwnProperty(i)&&(n?n.indexOf(i)<0&&(t[i]=this._getValue(e[i])):t[i]=this._getValue(e[i]));return t},_getValue:function(t){return"Span"===t.constructor.type?t.getValue():t}};var om=n(596);const am=n.n(om)();function lm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function cm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lm(Object(n),!0).forEach((function(e){Gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const hm=(t,e)=>cm(cm({},t),e),um={randomAToB:function(t,e,n){return n?(Math.random()*(e-t)>>0)+t:t+Math.random()*(e-t)},randomFloating:function(t,e,n){return this.randomAToB(t-e,t+e,n)},randomZone:function(t){},degreeTransform:function(t){return t*lf/180},toColor16:function(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},lerp:function(t,e,n){return e+(t-e)*n},getNormal:function(t,e){return 0==t.x&&0==t.y?0==t.z?e.set(1,0,1):e.set(1,1,-t.y/t.z):0==t.x?e.set(1,0,1):e.set(-t.y/t.x,1,1),e.normalize()},axisRotate:function(t,e,n,i){var r=Math.cos(i),s=Math.sin(i),o=n.dot(e)*(1-r);t.copy(n),t.cross(e).scalar(s),t.addValue(e.x*r,e.y*r,e.z*r),t.addValue(n.x*o,n.y*o,n.z*o)}};class dm{constructor(t,e,n){this._isArray=!1,this.type="Span",sm.isArray(t)?(this._isArray=!0,this.a=t):(this.a=sm.initValue(t,1),this.b=sm.initValue(e,this.a),this._center=sm.initValue(n,!1))}getValue(t){return this._isArray?this.a[this.a.length*Math.random()>>0]:this._center?um.randomFloating(this.a,this.b,t):um.randomAToB(this.a,this.b,t)}}const pm=(t,e,n)=>t instanceof dm?t:void 0===e?new dm(t):void 0===n?new dm(t,e):new dm(t,e,n);var gm=n(534),fm=n.n(gm);class mm extends dm{constructor(t){super(),this.type="ArraySpan",this.items=Array.isArray(t)?t:[t]}getValue(){return fm()(this.items)}}class Am extends dm{constructor(t){super(),this.type="ColorSpan",this.shouldRandomize="random"===t,this.colors=Array.isArray(t)?t:[t]}getValue(){return this.shouldRandomize?um.randomColor():fm()(this.colors)}}const Cm=t=>(t||(console.warn(`Invalid colors argument ${t} passed to createColorSpan. Defaulting to 'random'.`),t="random"),t instanceof Am?t:new Am(t)),vm=(t,e,n)=>{t.sleep||(t.old.position.copy(t.position),t.old.velocity.copy(t.velocity),t.acceleration.scalar(1/t.mass),t.velocity.add(t.acceleration.scalar(e)),t.position.add(t.old.velocity.scalar(e)),n&&t.velocity.scalar(Math.pow(n,e/.0167)),t.acceleration.clear())},ym=(t,e,n,i="EULER")=>{switch(i){case"EULER":vm(t,e,n);break;default:vm(t,e,n)}};class Im extends em{clear(){return this.x=0,this.y=0,this.z=0,this}scalar(t){return this.x*=t,this.y*=t,this.z*=t,this}addValue(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this}toString(){return"x:"+this.x+"y:"+this.y+"z:"+this.z}eulerFromDir(t){return(new im).setFromVector3(t)}}class xm{constructor(t,e,n){this.type="Polar3D",this.radius=t||1,this.phi=n||0,this.theta=e||0}set(t,e,n){return this.radius=t||1,this.phi=n||0,this.theta=e||0,this}setRadius(t){return this.radius=t,this}setPhi(t){return this.phi=t,this}setTheta(t){return this.theta=t,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}toVector3D(){return new Im(this.getX(),this.getY(),this.getZ())}getX(){return this.radius*Math.sin(this.theta)*Math.cos(this.phi)}getY(){return-this.radius*Math.sin(this.theta)*Math.sin(this.phi)}getZ(){return this.radius*Math.cos(this.theta)}normalize(){return this.radius=1,this}equals(t){return t.radius===this.radius&&t.phi===this.phi&&t.theta===this.theta}clear(){return this.radius=0,this.phi=0,this.theta=0,this}clone(){return new xm(this.radius,this.phi,this.theta)}}class bm{constructor(t){this.id="particle-"+am(),this.type="Particle",this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.useColor=!1,this.useAlpha=!1,this.easing=Hf,this.position=new Im,this.velocity=new Im,this.acceleration=new Im,this.old={},this.old.position=this.position.clone(),this.old.velocity=this.velocity.clone(),this.old.acceleration=this.acceleration.clone(),this.behaviours=[],this.transform={},this.color={r:0,g:0,b:0},this.rotation=new Im,this.distanceToCamera=0,sm.setPrototypeByObj(this,t)}getDirection(){return Math.atan2(this.velocity.x,-this.velocity.y)*(180/lf)}reset(){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.useColor=!1,this.useAlpha=!1,this.easing=Hf,this.position.set(0,0,0),this.velocity.set(0,0,0),this.acceleration.set(0,0,0),this.old.position.set(0,0,0),this.old.velocity.set(0,0,0),this.old.acceleration.set(0,0,0),this.color.r=0,this.color.g=0,this.color.b=0,this.rotation.clear(),sm.destroyObject(this.transform),this.removeAllBehaviours(),this}update(t,e){if(!this.sleep){this.age+=t;let n=this.behaviours.length;for(;n--;){this.behaviours[n].applyBehaviour(this,t,e)}}if(this.age>=this.life)this.destroy();else{const t=this.easing(this.age/this.life);this.energy=Math.max(1-t,0)}}addBehaviour(t){this.behaviours.push(t),t.initialize(this)}addBehaviours(t){let e=t.length;for(;e--;)this.addBehaviour(t[e])}removeBehaviour(t){const e=this.behaviours.indexOf(t);e>-1&&this.behaviours.splice(e,1)}removeAllBehaviours(){sm.destroyArray(this.behaviours)}destroy(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}class _m{constructor(){this.type="Pool",this.cID=0,this.list={}}create(t,...e){if(!this.canCreateNewObject(t))throw new Error("The pool is unable to create or clone the object supplied");return this.cID++,this.canInstantiateObject(t)?new t(...e):this.canCloneObject(t)?t.clone():void 0}canInstantiateObject(t){return"function"==typeof t}canCloneObject(t){return t.clone&&"function"==typeof t.clone}canCreateNewObject(t){return!(!this.canInstantiateObject(t)&&!this.canCloneObject(t))}getCount(){var t=0;for(var e in this.list)t+=this.list[e].length;return t++}get(t,...e){var n,i=t.__puid||Wf.id(t);return(n=this.list[i]&&this.list[i].length>0?this.list[i].pop():this.create(t,...e)).__puid=t.__puid||i,n}expire(t){return this._getList(t.__puid).push(t)}destroy(){for(var t in this.list)this.list[t].length=0,delete this.list[t]}_getList(t){return t=t||"default",this.list[t]||(this.list[t]=[]),this.list[t]}}const wm=class{constructor(){this.listeners=null}set listeners(t){this._listeners=t}get listeners(){return this._listeners}addEventListener(t,e){return this.listeners?this.removeEventListener(t,e):this.listeners={},this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),e}removeEventListener(t,e){if(this.listeners&&this.listeners[t])for(var n=this.listeners[t],i=0,r=n.length;i<r;i++)if(n[i]==e){1==r?delete this.listeners[t]:n.splice(i,1);break}}removeAllEventListeners(t){t?this.listeners&&delete this.listeners[t]:this.listeners=null}dispatchEvent(t,e){var n=!1,i=this.listeners;if(t&&i){var r=i[t];if(!r)return n;for(var s,o=(r=r.slice()).length;o--;)s=r[o],n=n||s(e)}return!!n}hasEventListener(t){var e=this.listeners;return!(!e||!e[t])}};class Mm{constructor(t="Initializer",e=!0){this.type=t,this.isEnabled=e}init(t,e){this.isEnabled&&(e?(this.initialize(e),e.hasBeenInitialized=!0):(this.initialize(t),t.hasBeenInitialized=!0))}reset(){}initialize(t){}static requiresWebGlApi(){return!1}static fromJSON(t){}}class Sm extends Mm{constructor(t,e,n,i=!0){var r;super("Body",i),this.body=(r=t)?r instanceof mm?r:new mm(r):null,this.w=e,this.h=n||e}initialize(t){var e=this.body.getValue();this.w?t.body={width:this.w,height:this.h,body:e}:t.body=e}static fromJSON(t){const{body:e,width:n,height:i,isEnabled:r=!0}=t;return new Sm(e,n,i,r)}}function Em(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Em(Object(n),!0).forEach((function(e){Gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Em(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Lm={AdditiveBlending:2,CustomBlending:5,MultiplyBlending:4,NoBlending:0,NormalBlending:1,SubtractiveBlending:3},Pm={color:16711680,blending:2,fog:!0},Rm=Tm(Tm({},Pm),{},{blending:"AdditiveBlending"});function Dm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Om(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dm(Object(n),!0).forEach((function(e){Gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}class zm extends Mm{constructor(t,e,n=Pm,i=!0){super("BodySprite",i);const{Sprite:r,SpriteMaterial:s,TextureLoader:o}=t;this.materialProperties=hm(Pm,n),(new o).load(e,t=>{this.texture=t,this.material=new s(Om(Om({},{map:t}),this.materialProperties)),this.sprite=new r(this.material)},void 0,t=>{throw new Error(t)})}initialize(t){t.body=this.sprite}static fromJSON(t,e){const{texture:n,materialProperties:i=Rm,isEnabled:r=!0}=t;return new zm(e,n,hm(Rm,(t=>{const{blending:e}=t;return Om(Om({},t),{},{blending:e?Lm[e]:Lm[Rm.blending]})})(i)),r)}}const Bm=new im,Hm={particleEuler:null,initialize:function(t,e,n){let i=n.length;for(;i--;)n[i].init(t,e);t.bindEmitter&&this.bindEmitter(t,e)},bindEmitter:function(t,e){const{rotation:{x:n,y:i,z:r}}=t;e.position.add(t.position),e.velocity.add(t.velocity),e.acceleration.add(t.acceleration),e.velocity.applyEuler(Bm.set(n,i,r))}};class Nm extends Mm{constructor(t,e,n,i=!0){super("Life",i),this.lifePan=pm(t,e,n)}initialize(t){this.lifePan.a==1/0||"infi"==this.lifePan.a?t.life=1/0:t.life=this.lifePan.getValue()}static fromJSON(t){const{min:e,max:n,center:i=!1,isEnabled:r=!0}=t;return new Nm(e,n,i,r)}}class Fm extends Mm{constructor(t,e,n=!1,i=!0){super("Mass",i),this.massPan=pm(t,e,n)}initialize(t){t.mass=this.massPan.getValue()}static fromJSON(t){const{min:e,max:n,center:i=!1,isEnabled:r=!0}=t;return new Fm(e,n,i,r)}}function Um(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}class Gm{constructor(t="Zone"){this.type=t,this.vector=new Im(0,0,0),this.random=0,this.crossType="dead",this.log=!0,this.supportsCrossing=!0}getPosition(){return null}crossing(t){if(!this.supportsCrossing)return console.warn(this.constructor.name+" does not support the crossing method");switch(this.crossType){case"bound":this._bound(t);break;case"cross":this._cross(t);break;case"dead":this._dead(t)}}isBoxZone(){return!1}isLineZone(){return!1}isMeshZone(){return!1}isPointZone(){return!1}isScreenZone(){return!1}isSphereZone(){return!1}_dead(t){}_bound(t){}_cross(t){}}class km extends Gm{constructor(t,e,n,i,r,s){var o,a,l,c,h;super("BoxZone"),sm.isUndefined(e,n,i,r,s)?(o=a=l=0,c=h=i=t||100):sm.isUndefined(i,r,s)?(o=a=l=0,c=t,h=e,i=n):(o=t,a=e,l=n,c=i,h=r,i=s),this.x=o,this.y=a,this.z=l,this.width=c,this.height=h,this.depth=i,this.friction=.85,this.max=6}isBoxZone(){return!0}getPosition(){return this.vector.x=this.x+um.randomAToB(-.5,.5)*this.width,this.vector.y=this.y+um.randomAToB(-.5,.5)*this.height,this.vector.z=this.z+um.randomAToB(-.5,.5)*this.depth,this.vector}_dead(t){(t.position.x+t.radius<this.x-this.width/2||t.position.x-t.radius>this.x+this.width/2)&&(t.dead=!0),(t.position.y+t.radius<this.y-this.height/2||t.position.y-t.radius>this.y+this.height/2)&&(t.dead=!0),(t.position.z+t.radius<this.z-this.depth/2||t.position.z-t.radius>this.z+this.depth/2)&&(t.dead=!0)}_bound(t){t.position.x-t.radius<this.x-this.width/2?(t.position.x=this.x-this.width/2+t.radius,t.velocity.x*=-this.friction,this._static(t,"x")):t.position.x+t.radius>this.x+this.width/2&&(t.position.x=this.x+this.width/2-t.radius,t.velocity.x*=-this.friction,this._static(t,"x")),t.position.y-t.radius<this.y-this.height/2?(t.position.y=this.y-this.height/2+t.radius,t.velocity.y*=-this.friction,this._static(t,"y")):t.position.y+t.radius>this.y+this.height/2&&(t.position.y=this.y+this.height/2-t.radius,t.velocity.y*=-this.friction,this._static(t,"y")),t.position.z-t.radius<this.z-this.depth/2?(t.position.z=this.z-this.depth/2+t.radius,t.velocity.z*=-this.friction,this._static(t,"z")):t.position.z+t.radius>this.z+this.depth/2&&(t.position.z=this.z+this.depth/2-t.radius,t.velocity.z*=-this.friction,this._static(t,"z"))}_static(t,e){t.velocity[e]*t.acceleration[e]>0||Math.abs(t.velocity[e])<.0167*Math.abs(t.acceleration[e])*this.max&&(t.velocity[e]=0,t.acceleration[e]=0)}_cross(t){t.position.x+t.radius<this.x-this.width/2&&t.velocity.x<=0?t.position.x=this.x+this.width/2+t.radius:t.position.x-t.radius>this.x+this.width/2&&t.velocity.x>=0&&(t.position.x=this.x-this.width/2-t.radius),t.position.y+t.radius<this.y-this.height/2&&t.velocity.y<=0?t.position.y=this.y+this.height/2+t.radius:t.position.y-t.radius>this.y+this.height/2&&t.velocity.y>=0&&(t.position.y=this.y-this.height/2-t.radius),t.position.z+t.radius<this.z-this.depth/2&&t.velocity.z<=0?t.position.z=this.z+this.depth/2+t.radius:t.position.z-t.radius>this.z+this.depth/2&&t.velocity.z>=0&&(t.position.z=this.z-this.depth/2-t.radius)}}class Wm extends Gm{constructor(t,e,n,i,r,s){super("LineZone"),t instanceof Im?(this.x1=t.x,this.y1=t.y,this.z1=t.z,this.x2=i.x,this.y2=i.y,this.z2=i.z):(this.x1=t,this.y1=e,this.z1=n,this.x2=i,this.y2=r,this.z2=s),this.supportsCrossing=!1}isLineZone(){return!0}getPosition(){return this.random=Math.random(),this.vector.x=this.x1+this.random*(this.x2-this.x1),this.vector.y=this.y1+this.random*(this.y2-this.y1),this.vector.z=this.z1+this.random*(this.z2-this.z1),this.vector}}class Vm extends Gm{constructor(t,e=1,n){if(super("MeshZone"),this.geometry=null,this.scale=e,this.supportsCrossing=!1,t.type&&"Geometry"===t.type&&(this.geometry=t),t.geometry&&(this.geometry=t.geometry),!this.geometry)throw new Error("MeshZone unable to set geometry from the supplied bounds");this.geometry.isBufferGeometry&&(this.geometry=(new n).fromBufferGeometry(this.geometry))}isMeshZone(){return!0}getPosition(){const t=this.geometry.vertices,e=t[t.length*Math.random()>>0];return this.vector.x=e.x*this.scale,this.vector.y=e.y*this.scale,this.vector.z=e.z*this.scale,this.vector}}class jm extends Gm{constructor(t,e,n){var i;super("PointZone"),sm.isUndefined(t,e,n)?i=0:(i=t,e),this.x=i,this.y=i,this.z=i,this.supportsCrossing=!1}isPointZone(){return!0}getPosition(){return this.vector.x=this.x,this.vector.y=this.y,this.vector.z=this.z,this.vector}}class Ym extends Gm{constructor(t,e,n,i){super("ScreenZone"),this.camera=t,this.renderer=e,this.dis=n||20,i=i||"1234";for(var r=1;r<5;r++)this["d"+r]=i.indexOf(r+"")>=0}isScreenZone(){return!0}_dead(t){var e=rm.toScreenPos(t.position,this.camera,this.renderer.domElement),n=this.renderer.domElement;(e.y+t.radius<-this.dis&&this.d1||e.y-t.radius>n.height+this.dis&&this.d3)&&(t.dead=!0),(e.x+t.radius<-this.dis&&this.d4||e.x-t.radius>n.width+this.dis&&this.d2)&&(t.dead=!0)}_bound(t){var e=rm.toScreenPos(t.position,this.camera,this.renderer.domElement),n=this.renderer.domElement;(e.y+t.radius<-this.dis||e.y-t.radius>n.height+this.dis)&&(t.velocity.y*=-1),(e.x+t.radius<-this.dis||e.x-t.radius>n.width+this.dis)&&(t.velocity.y*=-1)}}var Xm,Qm,Zm,qm,Jm,Km,$m,tA;Ym.prototype.getPosition=(Qm=new Im,function(){return Xm=this.renderer.domElement,Qm.x=Math.random()*Xm.width,Qm.y=Math.random()*Xm.height,this.vector.copy(rm.toSpacePos(Qm,this.camera,Xm)),this.vector}),Ym.prototype._cross=function(){var t=new Im;return function(e){var n=rm.toScreenPos(e.position,this.camera,this.renderer.domElement),i=this.renderer.domElement;n.y+e.radius<-this.dis?(t.x=n.x,t.y=i.height+this.dis+e.radius,e.position.y=rm.toSpacePos(t,this.camera,i).y):n.y-e.radius>i.height+this.dis&&(t.x=n.x,t.y=-this.dis-e.radius,e.position.y=rm.toSpacePos(t,this.camera,i).y),n.x+e.radius<-this.dis?(t.y=n.y,t.x=i.width+this.dis+e.radius,e.position.x=rm.toSpacePos(t,this.camera,i).x):n.x-e.radius>i.width+this.dis&&(t.y=n.y,t.x=-this.dis-e.radius,e.position.x=rm.toSpacePos(t,this.camera,i).x)}}();class eA extends Gm{constructor(t,e,n,i){let r,s,o,a;super("SphereZone"),sm.isUndefined(e,n,i)?(r=s=o=0,a=t||100):(r=t,s=e,o=n,a=i),this.x=r,this.y=r,this.z=r,this.radius=a,this.the=this.phi=0}isSphereZone(){return!0}_dead(t){t.position.distanceTo(this)-t.radius>this.radius&&(t.dead=!0)}_cross(){console.warn(this.constructor.name+" does not support the _cross method")}}eA.prototype.getPosition=function(){return this.random=Math.random(),Jm=this.random*this.radius,Zm=lf*Math.random(),qm=2*lf*Math.random(),this.vector.x=this.x+Jm*Math.sin(Zm)*Math.cos(qm),this.vector.y=this.y+Jm*Math.sin(qm)*Math.sin(Zm),this.vector.z=this.z+Jm*Math.cos(Zm),this.vector},eA.prototype._bound=($m=new Im,tA=new Im,function(t){t.position.distanceTo(this)+t.radius>=this.radius&&($m.copy(t.position).sub(this).normalize(),tA.copy(t.velocity),Km=2*tA.dot($m),t.velocity.sub($m.scalar(Km)))});const nA=["zoneType"];class iA extends Mm{constructor(){super("Position"),this.reset.apply(this,arguments)}reset(){this.zones?this.zones.length=0:this.zones=[],this.zones=this.zones.concat(Array.prototype.slice.call(arguments))}addZone(){this.zones=this.zones.concat(Array.prototype.slice.call(arguments))}static fromJSON(t){const{zoneType:e}=t,n=Um(t,nA);if(!Uf.includes(e))throw new Error(`The zone type ${e} is invalid or not yet supported`);return new iA(new r[e](...Object.values(n)))}}iA.prototype.initialize=function(){let t;return function(e){t=this.zones[Math.random()*this.zones.length>>0],t.getPosition(),e.position.x=t.vector.x,e.position.y=t.vector.y,e.position.z=t.vector.z}}();class rA extends Mm{constructor(t,e,n=!1,i=!0){super("Radius",i),this.radius=pm(t,e,n)}reset(t,e,n=!1){this.radius=pm(t,e,n)}initialize(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius}static fromJSON(t){const{width:e,height:n,center:i=!1,isEnabled:r=!0}=t;return new rA(e,n,i,r)}}class sA extends Mm{constructor(t=1,e=1){super("Rate"),this.numPan=pm(t),this.timePan=pm(e),this.startTime=0,this.nextTime=0,this.init()}init(){this.startTime=0,this.nextTime=this.timePan.getValue()}getValue(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.init(),1==this.numPan.b?this.numPan.getValue("Float")>.5?1:0:this.numPan.getValue("Int")):0}static fromJSON(t){const{particlesMin:e,particlesMax:n,perSecondMin:i,perSecondMax:r}=t;return new sA(new dm(e,n),new dm(i,r))}}function oA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function aA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oA(Object(n),!0).forEach((function(e){Gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}class lA extends Mm{constructor(t,e,n=Pm,i=!0){super("Texture",i);const{Sprite:r,SpriteMaterial:s}=t;this.materialProperties=hm(Pm,n),this.texture=e,this.material=new s(aA(aA({},{map:e}),this.materialProperties)),this.sprite=new r(this.material)}initialize(t){t.body=this.sprite}static fromJSON(t,e){const{loadedTexture:n,materialProperties:i=Rm,isEnabled:r=!0}=t;return new lA(e,n,hm(Rm,(t=>{const{blending:e}=t;return aA(aA({},t),{},{blending:e?Lm[e]:Lm[Rm.blending]})})(i)),r)}}class cA extends Mm{constructor(t,e=!0){super(t,e),this.dirVec=new Im(0,0,0)}normalize(t){return 100*t}}cA.prototype.initialize=function(){var t,e=new Im(0,0,1),n=new Im(0,0,0);return function(i){return t=this.tha*Math.random(),this._useV&&this.dirVec.copy(this.dir).scalar(this.radiusPan.getValue()),um.getNormal(this.dirVec,e),n.copy(this.dirVec).applyAxisAngle(e,t),n.applyAxisAngle(this.dirVec.normalize(),Math.random()*lf*2),i.velocity.copy(n),this}}();class hA extends cA{constructor(t,e,n=!0){super("PolarVelocity",n),this.tha=e*hf,this.dirVec=t.toVector3D(),this._useV=!1}static fromJSON(t){const{polarRadius:e,polarTheta:n,polarPhi:i,velocityTheta:r,isEnabled:s=!0}=t;return new hA(new xm(e,n,i),r,s)}}class uA extends cA{constructor(t,e,n,i=!0){super("RadialVelocity",i),this.radiusPan=pm(t),this.dir=e.clone().normalize(),this.tha=n*hf,this._useV=!0}static fromJSON(t){const{radius:e,x:n,y:i,z:r,theta:s,isEnabled:o=!0}=t;return new uA(e,new Im(n,i,r),s,o)}}class dA extends cA{constructor(t,e,n=!0){super("VectorVelocity",n),this.radiusPan=pm(1),this.dir=t.clone(),this.tha=e*hf,this._useV=!0}static fromJSON(t){const{x:e,y:n,z:i,theta:r,isEnabled:s=!0}=t;return new dA(new Im(e,n,i),r,s)}}const pA=new sA(1,.1);var gA=n(763),fA=n.n(gA);class mA extends bm{constructor(t){super(t),this.type="Emitter",this.particles=[],this.initializers=[],this.behaviours=[],this.emitterBehaviours=[],this.currentEmitTime=0,this.totalEmitTimes=-1,this.damping=.006,this.bindEmitter=!0,this.bindEmitterEvent=!1,this.rate=pA,this.isEmitting=!1,this.id="emitter-"+am(),this.cID=0,this.name="Emitter",this.index=void 0,this.eventDispatcher=new wm}dispatch(t,e=this){this.eventDispatcher.dispatchEvent(t,e)}setRate(t){return this.rate=t,this}setPosition(t={}){const{position:e}=this,{x:n=e.x,y:i=e.y,z:r=e.z}=t;return this.position.set(n,i,r),this}setRotation(t={}){const{rotation:e}=this,{x:n=e.x,y:i=e.y,z:r=e.z}=t;return this.rotation.set(n,i,r),this}emit(t=1/0,e=1/0){return this.currentEmitTime=0,this.totalEmitTimes=fA()(t)?t:1/0,this.life=1===t?t:fA()(e)?e:1/0,this.rate.init(),this.isEmitting=!0,this}experimental_emit(){const{isEmitting:t,totalEmitTimes:e,life:n}=this;return t||(this.currentEmitTime=0,e||this.setTotalEmitTimes(1/0),n||this.setLife(1/0),this.rate.init(),this.isEmitting=!0),this}setTotalEmitTimes(t=1/0){return this.totalEmitTimes=fA()(t)?t:1/0,this}setLife(t=1/0){return 1===this.totalEmitTimes?this.life=this.totalEmitTimes:this.life=fA()(t)?t:1/0,this}stopEmit(){this.totalEmitTimes=-1,this.currentEmitTime=0,this.isEmitting=!1}removeAllParticles(){let t=this.particles.length;for(;t--;)this.particles[t].dead=!0}addInitializer(t){return this.initializers.push(t),this}addInitializers(t){let e=t.length;for(;e--;)this.addInitializer(t[e]);return this}setInitializers(t){return this.initializers=t,this}removeInitializer(t){const e=this.initializers.indexOf(t);return e>-1&&this.initializers.splice(e,1),this}removeAllInitializers(){return sm.destroyArray(this.initializers),this}addBehaviour(t){return this.behaviours.push(t),this}addBehaviours(t){let e=t.length;for(;e--;)this.addBehaviour(t[e]);return this}setBehaviours(t){return this.behaviours=t,this}removeBehaviour(t){const e=this.behaviours.indexOf(t);return e>-1&&this.behaviours.splice(e,1),this}removeAllBehaviours(){return sm.destroyArray(this.behaviours),this}addEmitterBehaviour(t){return this.emitterBehaviours.push(t),t.initialize(this),this}addEmitterBehaviours(t){let e=t.length;for(;e--;)this.addEmitterBehaviour(t[e]);return this}setEmitterBehaviours(t){const e=t.length;this.emitterBehaviours=t;for(let t=0;t<e;t++)this.emitterBehaviours[t].initialize(this);return this}removeEmitterBehaviour(t){const e=this.emitterBehaviours.indexOf(t);return e>-1&&this.emitterBehaviours.splice(e,1),this}removeAllEmitterBehaviours(){return sm.destroyArray(this.emitterBehaviours),this}addOnEmitterDeadEventListener(t){return this.eventDispatcher.addEventListener(this.id+"_EMITTER_DEAD",()=>t()),this}createParticle(){const t=this.parent.pool.get(bm),e=this.particles.length;return this.setupParticle(t,e),this.parent&&this.parent.dispatch("PARTICLE_CREATED",t),this.bindEmitterEvent&&this.dispatch("PARTICLE_CREATED",t),t}setupParticle(t,e){const{initializers:n,behaviours:i}=this;Hm.initialize(this,t,n),t.addBehaviours(i),t.parent=this,t.index=e,this.particles.push(t)}update(t){if(!this.isEmitting)return;this.age+=t,(this.dead||this.age>=this.life)&&this.destroy(),this.generate(t),this.integrate(t);let e=this.particles.length;for(;e--;){const t=this.particles[e];t.dead&&(this.parent&&this.parent.dispatch("PARTICLE_DEAD",t),this.bindEmitterEvent&&this.dispatch("PARTICLE_DEAD",t),this.parent.pool.expire(t.reset()),this.particles.splice(e,1))}this.updateEmitterBehaviours(t)}updateEmitterBehaviours(t){if(this.sleep)return;const e=this.emitterBehaviours.length;for(let n=0;n<e;n++)this.emitterBehaviours[n].applyBehaviour(this,t,n)}integrate(t){const e=this.parent?this.parent.integrationType:"EULER",n=1-this.damping;ym(this,t,n,e);let i=this.particles.length;for(;i--;){const r=this.particles[i];r.update(t,i),ym(r,t,n,e),this.parent&&this.parent.dispatch("PARTICLE_UPDATE",r),this.bindEmitterEvent&&this.dispatch("PARTICLE_UPDATE",r)}}generate(t){if(1!==this.totalEmitTimes){if(this.currentEmitTime+=t,this.currentEmitTime<this.totalEmitTimes){let e=this.rate.getValue(t);for(e>0&&(this.cID=e);e--;)this.createParticle()}}else{let t=this.rate.getValue(99999);for(t>0&&(this.cID=t);t--;)this.createParticle();this.totalEmitTimes=0}}destroy(){this.dead=!0,this.energy=0,this.totalEmitTimes=-1,0==this.particles.length&&(this.isEmitting=!1,this.removeAllInitializers(),this.removeAllBehaviours(),this.dispatch(this.id+"_EMITTER_DEAD"),this.parent&&this.parent.removeEmitter(this))}}const AA=gf;class CA{constructor(t=1/0,e=AA,n="Behaviour",i=!0){this.type=n,this.isEnabled=i,this.id="behaviour-"+am(),this.life=t,this.easing=e,this.age=0,this.energy=1,this.dead=!1}reset(t=1/0,e=AA){this.life=t,this.easing=e||AA}set life(t){this._life=fA()(t)?t:1/0}get life(){return this._life}normalizeForce(t){return t.scalar(100)}normalizeValue(t){return 100*t}initialize(t){}applyBehaviour(t,e,n){this.isEnabled&&this.mutate(t,e,n)}mutate(t,e,n){}energize(t,e){if(this.dead)return;if(this.age+=e,this.age>=this.life)return this.energy=0,void(this.dead=!0);const n=this.easing(t.age/t.life);this.energy=Math.max(1-n,0)}destroy(){}fromJSON(t){}}class vA extends CA{constructor(t=1,e=null,n,i,r=!0){super(n,i,"Alpha",r),this.alphaA=t,this.alphaB=e,this.reset(t,e)}get same(){return this._same}set same(t){this._same=t}reset(t=1,e=null,n,i){this.same=null==e,this.alphaA=pm(t),this.alphaB=pm(e),n&&super.reset(n,i)}initialize(t){t.useAlpha=!0,t.transform.alphaA=this.alphaA.getValue(),t.transform.alphaB=this.same?t.transform.alphaA:this.alphaB.getValue()}mutate(t,e,n){this.energize(t,e,n),t.alpha=um.lerp(t.transform.alphaA,t.transform.alphaB,this.energy),t.alpha<.002&&(t.alpha=0)}static fromJSON(t){const{alphaA:e,alphaB:n,life:i,easing:r,isEnabled:s=!0}=t;return new vA(e,n,i,Bf(r),s)}}class yA extends CA{constructor(t=new Im,e=100,n=1e3,i=1/0,r=AA,s=!0){super(i,r,"Attraction",s),this.targetPosition=t,this.radius=n,this.force=this.normalizeValue(e),this.radiusSq=this.radius*this.radius,this.attractionForce=new Im,this.lengthSq=0}reset(t=new Im,e=100,n=1e3,i,r){this.targetPosition=t,this.radius=n,this.force=this.normalizeValue(e),this.radiusSq=this.radius*this.radius,this.attractionForce=new Im,this.lengthSq=0,i&&super.reset(i,r)}mutate(t,e,n){this.energize(t,e,n),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.position),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.scalar(1-this.lengthSq/this.radiusSq),this.attractionForce.scalar(this.force),t.acceleration.add(this.attractionForce))}static fromJSON(t){const{x:e,y:n,z:i,force:r,radius:s,life:o,easing:a,isEnabled:l=!0}=t;return new yA(new Im(e,n,i),r,s,o,Bf(a),l)}}class IA extends CA{constructor(t,e,n,i,r,s=!0){super(i,r,"Collision",s),this.reset(t,e,n)}reset(t,e,n,i,r){this.emitter=t,this.useMass=e,this.onCollide=n,this.particles=[],this.delta=new Im,i&&super.reset(i,r)}mutate(t,e,n){const i=this.emitter?this.emitter.particles.slice(n):this.particles.slice(n);let r,s,o,a,l,c,h=i.length;for(;h--;)r=i[h],r!=t&&(this.delta.copy(r.position).sub(t.position),s=this.delta.lengthSq(),a=t.radius+r.radius,s<=a*a&&(o=a-Math.sqrt(s),o+=.5,l=this._getAverageMass(t,r),c=this._getAverageMass(r,t),t.position.add(this.delta.clone().normalize().scalar(o*-l)),r.position.add(this.delta.normalize().scalar(o*c)),this.onCollide&&this.onCollide(t,r)))}_getAverageMass(t,e){return this.useMass?e.mass/(t.mass+e.mass):.5}fromJSON(t){}}class xA extends CA{constructor(t,e,n,i,r=!0){super(n,i,"Color",r),this.reset(t,e)}get same(){return this._same}set same(t){this._same=t}reset(t,e,n,i){this.same=null==e,this.colorA=Cm(t),this.colorB=Cm(e),n&&super.reset(n,i)}initialize(t){t.transform.colorA=kf(this.colorA.getValue()),t.useColor=!0,t.transform.colorB=this.same?t.transform.colorA:kf(this.colorB.getValue())}mutate(t,e,n){this.energize(t,e,n),this._same?(t.color.r=t.transform.colorA.r,t.color.g=t.transform.colorA.g,t.color.b=t.transform.colorA.b):(t.color.r=um.lerp(t.transform.colorA.r,t.transform.colorB.r,this.energy),t.color.g=um.lerp(t.transform.colorA.g,t.transform.colorB.g,this.energy),t.color.b=um.lerp(t.transform.colorA.b,t.transform.colorB.b,this.energy))}static fromJSON(t){const{colorA:e,colorB:n,life:i,easing:r,isEnabled:s=!0}=t;return new xA(e,n,i,Bf(r),s)}}class bA extends CA{constructor(t,e,n,i,r){super(n,i,"CrossZone",r),this.reset(t,e)}reset(t,e="dead",n,i){this.zone=t,this.zone.crossType=e,n&&super.reset(n,i)}mutate(t,e,n){this.energize(t,e,n),this.zone.crossing.call(this.zone,t)}static fromJSON(t){const{zoneType:e,zoneParams:n,crossType:i,life:s,easing:o,isEnabled:a=!0}=t,l=new r[e](...Object.values(n));return new bA(l,i,s,Bf(o),a)}}class _A extends CA{constructor(t,e,n,i,r,s=!0){super(i,r,"Force",s),this.reset(t,e,n)}reset(t,e,n){this.force=this.normalizeForce(new Im(t,e,n)),this.force.id=Math.random()}mutate(t,e,n){this.energize(t,e,n),t.acceleration.add(this.force)}static fromJSON(t){const{fx:e,fy:n,fz:i,life:r,easing:s,isEnabled:o=!0}=t;return new _A(e,n,i,r,Bf(s),o)}}class wA extends _A{constructor(t,e,n,i=!0){super(0,-t,0,e,n,i),this.type="Gravity"}static fromJSON(t){const{gravity:e,life:n,easing:i,isEnabled:r=!0}=t;return new wA(e,n,Bf(i),r)}}class MA extends CA{constructor(t,e,n,i=.03,r,s,o=!0){super(r,s,"RandomDrift",o),this.reset(t,e,n,i),this.time=0}reset(t,e,n,i=.03,r,s){this.randomForce=this.normalizeForce(new Im(t,e,n)),this.delayPan=pm(i),this.time=0,r&&super.reset(r,s)}mutate(t,e,n){if(this.energize(t,e,n),this.time+=e,this.time>=this.delayPan.getValue()){const e=um.randomAToB(-this.randomForce.x,this.randomForce.x),n=um.randomAToB(-this.randomForce.y,this.randomForce.y),i=um.randomAToB(-this.randomForce.z,this.randomForce.z);t.acceleration.addValue(e,n,i),this.time=0}}static fromJSON(t){const{x:e,y:n,z:i,delay:r,life:s,easing:o,isEnabled:a=!0}=t;return new MA(e,n,i,r,s,Bf(o),a)}}class SA extends yA{constructor(t,e,n,i,r,s=!0){super(t,e,n,i,r,s),this.force*=-1,this.type="Repulsion"}reset(t,e,n,i,r){super.reset(t,e,n,i,r),this.force*=-1}static fromJSON(t){const{x:e,y:n,z:i,force:r,radius:s,life:o,easing:a,isEnabled:l=!0}=t;return new SA(new Im(e,n,i),r,s,o,Bf(a),l)}}class EA extends CA{constructor(t,e,n,i,r,s=!0){super(i,r,"Rotate",s),this.reset(t,e,n)}get rotationType(){return this._rotationType}set rotationType(t){this._rotationType=t}reset(t,e,n,i,r){this.x=t||0,this.y=e||0,this.z=n||0,void 0===t||"same"==t?this.rotationType="same":null==e?this.rotationType="set":void 0===n?this.rotationType="to":(this.rotationType="add",this.x=pm(this.x*hf),this.y=pm(this.y*hf),this.z=pm(this.z*hf)),i&&super.reset(i,r)}initialize(t){switch(this.rotationType){case"same":break;case"set":this._setRotation(t.rotation,this.x);break;case"to":t.transform.fR=t.transform.fR||new Im,t.transform.tR=t.transform.tR||new Im,this._setRotation(t.transform.fR,this.x),this._setRotation(t.transform.tR,this.y);break;case"add":t.transform.addR=new Im(this.x.getValue(),this.y.getValue(),this.z.getValue())}}_setRotation(t,e){if(t=t||new Im,"random"==e){var n=um.randomAToB(-lf,lf),i=um.randomAToB(-lf,lf),r=um.randomAToB(-lf,lf);t.set(n,i,r)}else e instanceof Im&&t.copy(e)}mutate(t,e,n){switch(this.energize(t,e,n),this.rotationType){case"same":t.rotation||(t.rotation=new Im),t.rotation.eulerFromDir(t.velocity);break;case"set":break;case"to":t.rotation.x=um.lerp(t.transform.fR.x,t.transform.tR.x,this.energy),t.rotation.y=um.lerp(t.transform.fR.y,t.transform.tR.y,this.energy),t.rotation.z=um.lerp(t.transform.fR.z,t.transform.tR.z,this.energy);break;case"add":t.rotation.add(t.transform.addR)}}static fromJSON(t){const{x:e,y:n,z:i,life:r,easing:s,isEnabled:o=!0}=t;return new EA(e,n,i,r,Bf(s),o)}}class TA extends CA{constructor(t,e,n,i,r=!0){super(n,i,"Scale",r),this.reset(t,e)}get same(){return this._same}set same(t){this._same=t}reset(t,e,n,i){this.same=null==e,this.scaleA=pm(t||1),this.scaleB=pm(e),n&&super.reset(n,i)}initialize(t){t.transform.scaleA=this.scaleA.getValue(),t.transform.oldRadius=t.radius,t.transform.scaleB=this.same?t.transform.scaleA:this.scaleB.getValue()}mutate(t,e,n){this.energize(t,e,n),t.scale=um.lerp(t.transform.scaleA,t.transform.scaleB,this.energy),t.scale<5e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale}static fromJSON(t){const{scaleA:e,scaleB:n,life:i,easing:r,isEnabled:s=!0}=t;return new TA(e,n,i,Bf(r),s)}}class LA extends CA{constructor(t,e,n,i,r,s,o,a=!0){super(s,o,"Spring",a),this.reset(t,e,n,i,r)}reset(t,e,n,i,r){this.pos?this.pos.set(t,e,n):this.pos=new Im(t,e,n),this.spring=i||.1,this.friction=r||.98}mutate(t,e,n){this.energize(t,e,n),t.velocity.x+=(this.pos.x-t.position.x)*this.spring,t.velocity.y+=(this.pos.y-t.position.y)*this.spring,t.velocity.z+=(this.pos.z-t.position.z)*this.spring}static fromJSON(t){const{x:e,y:n,z:i,spring:r,friction:s,life:o,easing:a,isEnabled:l=!0}=t;return new LA(e,n,i,r,s,o,Bf(a),l)}}const PA=t=>{const e=[];return t.forEach(t=>{const{type:n,properties:i}=t;if(!Ff.includes(n))throw new Error(`The behaviour type ${n} is invalid or not yet supported`);e.push(o[n].fromJSON(i))}),e},RA=(t,e,n,i)=>{const{preParticles:r=cf,integrationType:o=uf,emitters:a=[]}=t,l=new n(e,r,o);return a.forEach(t=>{const n=new i,{rate:r,rotation:o,initializers:a,behaviours:c,emitterBehaviours:h=[],position:u,totalEmitTimes:d=1/0,life:p=1/0}=t;n.setRate((t=>sA.fromJSON(t))(r)).setRotation(o).setInitializers(((t,e)=>{const n=[];return t.forEach(t=>{const{type:i,properties:r}=t;if(!Nf.includes(i))throw new Error(`The initializer type ${i} is invalid or not yet supported`);af.includes(i)?n.push(s[i].fromJSON(r,e)):n.push(s[i].fromJSON(r))}),n})(a,e)).setBehaviours(PA(c)).setEmitterBehaviours(PA(h)).setPosition(u).emit(d,p),l.addEmitter(n)}),l};function DA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function OA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?DA(Object(n),!0).forEach((function(e){Gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const zA={shouldAutoEmit:!0},BA=t=>new Promise((e,n)=>{if(!t.length)return e([]);const i=t.length,r=[];t.forEach(t=>{const{type:s,properties:a}=t;return Ff.includes(s)?(r.push(o[s].fromJSON(a)),r.length===i?e(r):void 0):n(`The behaviour type ${s} is invalid or not yet supported`)})}),HA=(t,e,n,i)=>new Promise((r,o)=>{if(!t.length)return r([]);const a=[],l=t.length;if(!l)return r(a);t.forEach(t=>{const c=new e,{rate:h,rotation:u,initializers:d,behaviours:p,emitterBehaviours:g=[],position:f,totalEmitTimes:m=1/0,life:A=1/0}=t;var C;c.setRate((C=h,sA.fromJSON(C))).setRotation(u).setPosition(f),((t,e)=>new Promise((n,i)=>{if(!t.length)return n([]);const r=t.length,o=[],a=t.filter(({properties:t})=>!t.texture),l=t.filter(({properties:t})=>t.texture);a.forEach(t=>{const{type:a,properties:l}=t;return Nf.includes(a)?(af.includes(a)?o.push(s[a].fromJSON(l,e)):o.push(s[a].fromJSON(l)),o.length===r?n(o):void 0):i(`The initializer type ${a} is invalid or not yet supported`)}),l.forEach(t=>{const{type:s,properties:a,properties:{texture:l}}=t,c=new e.TextureLoader;if(!Nf.includes(s))return i(`The initializer type ${s} is invalid or not yet supported`);c.load(l,t=>{if(o.push(lA.fromJSON(OA(OA({},a),{},{loadedTexture:t}),e)),o.length===r)return n(o)},void 0,i)})}))(d,n).then(t=>(c.setInitializers(t),BA(p))).then(t=>(c.setBehaviours(t),BA(g))).then(t=>(c.setEmitterBehaviours(t),Promise.resolve(c))).then(t=>{if(a.push(i?t.emit(m,A):t.setTotalEmitTimes(m).setLife(A)),a.length===l)return r(a)}).catch(o)})});class NA{constructor(t=cf,e="EULER"){this.type="System",this.canUpdate=!0,this.preParticles=t,this.integrationType=e,this.emitters=[],this.renderers=[],this.pool=new _m,this.eventDispatcher=new wm}static fromJSON(t,e){return RA(t,e,NA,mA)}static fromJSONAsync(t,e,n){return((t,e,n,i,r={})=>new Promise((s,o)=>{const{preParticles:a=cf,integrationType:l=uf,emitters:c=[]}=t,h=new n(a,l),{shouldAutoEmit:u}=OA(OA({},zA),r);HA(c,i,e,u).then(t=>{const e=t.length;if(!e)return s(h);t.forEach(t=>{h.addEmitter(t),h.emitters.length===e&&s(h)})}).catch(o)}))(t,e,NA,mA,n)}dispatch(t,e=this){this.eventDispatcher.dispatchEvent(t,e)}addRenderer(t){return this.renderers.push(t),t.init(this),this}removeRenderer(t){return this.renderers.splice(this.renderers.indexOf(t),1),t.remove(this),this}addEmitter(t){const e=this.emitters.length;return t.parent=this,t.index=e,this.emitters.push(t),this.dispatch("EMITTER_ADDED",t),this}removeEmitter(t){return t.parent!==this||(t.parent=null,t.index=void 0,this.emitters.splice(this.emitters.indexOf(t),1),this.dispatch("EMITTER_REMOVED",t)),this}emit({onStart:t,onUpdate:e,onEnd:n}){t&&t(),e&&this.eventDispatcher.addEventListener("SYSTEM_UPDATE",e);const i=this.emitters.map(t=>{const{life:e}=t;return e===1/0?(n&&n(),t.experimental_emit(),Promise.resolve()):new Promise(e=>{t.addOnEmitterDeadEventListener(()=>{n&&n(),e()}),t.experimental_emit()})});try{return Promise.all(i)}catch(t){console.warn(t)}}update(t=.0167){const e=t||.0167;if(this.canUpdate){if(e>0){let t=this.emitters.length;for(;t--;){const n=this.emitters[t];n.update(e),n.isEmitting&&this.dispatch("SYSTEM_UPDATE")}}this.dispatch("SYSTEM_UPDATE_AFTER")}return Promise.resolve()}getCount(){const t=this.emitters.length;let e,n=0;for(e=0;e<t;e++)n+=this.emitters[e].particles.length;return n}destroy(){const t=this.emitters.length;this.canUpdate=!1;for(let e=0;e<t;e++)this.emitters[e]&&this.emitters[e].destroy(),delete this.emitters[e];for(let e=0;e<t;e++)this.renderers[e]&&this.renderers[e].destroy&&(this.renderers[e].destroy(),delete this.renderers[e]);this.emitters.length=0,this.pool.destroy(),this.canUpdate=!0}}!function(){function t(t,e){var n="material"==t?"_materialPool":"_targetPool";return e.renderers[0][n].cID}}();class FA extends class extends class{constructor(t="BaseRenderer"){this.type=t}init(t){var e=this;this.system=t,this.system.eventDispatcher.addEventListener("SYSTEM_UPDATE",(function(t){e.onSystemUpdate.call(e,t)})),this.system.eventDispatcher.addEventListener("PARTICLE_CREATED",(function(t){e.onParticleCreated.call(e,t)})),this.system.eventDispatcher.addEventListener("PARTICLE_UPDATE",(function(t){e.onParticleUpdate.call(e,t)})),this.system.eventDispatcher.addEventListener("PARTICLE_DEAD",(function(t){e.onParticleDead.call(e,t)})),this.logRendererType()}remove(){this.system=null}onParticleCreated(t){}onParticleUpdate(t){}onParticleDead(t){}onSystemUpdate(t){}logRendererType(){df&&console.log(""+this.type)}}{constructor(t,e){super("MeshRenderer"),this.container=t,this._targetPool=new _m,this._materialPool=new _m,this._body=new e.Mesh(new e.BoxGeometry(50,50,50),new e.MeshLambertMaterial({color:"#ff0000"}))}isThreeSprite(t){return t.target.isSprite}onSystemUpdate(){}onParticleCreated(t){t.target||(t.body||(t.body=this._body),t.target=this._targetPool.get(t.body),(t.useAlpha||t.useColor)&&(t.target.material.__puid=Wf.id(t.body.material),t.target.material=this._materialPool.get(t.target.material))),t.target&&(t.target.position.copy(t.position),this.container.add(t.target))}onParticleUpdate(t){const{target:e,useAlpha:n,useColor:i,rotation:r}=t;e&&(e.position.copy(t.position),this.isThreeSprite(t)||e.rotation.set(r.x,r.y,r.z),this.scale(t),n&&(e.material.opacity=t.alpha,e.material.transparent=!0),i&&e.material.color.copy(t.color))}scale(t){t.target.scale.set(t.scale,t.scale,t.scale)}onParticleDead(t){t.target&&((t.useAlpha||t.useColor)&&this._materialPool.expire(t.target.material),this._targetPool.expire(t.target),this.container.remove(t.target),t.target=null)}}{constructor(t,e){super(t,e),this.type="SpriteRenderer",this._body=new e.Sprite(new e.SpriteMaterial({color:16777215}))}scale(t){t.target.scale.set(t.scale*t.radius,t.scale*t.radius,1)}}const UA=["x","y","z"].length,GA=["r","g","b","a"].length,kA=([4*UA,4,4*GA].reduce((t,e)=>t+e),1),WA=1,VA=2;[UA,kA,GA,WA,VA].reduce((t,e)=>t+e);const jA=NA,YA=JSON.parse('{"K":{"preParticles":500,"integrationType":"EULER","emitters":[{"id":"c6e9d2f0-33a0-11ed-9266-858aed5b80dc","totalEmitTimes":null,"life":null,"cache":{"totalEmitTimes":0,"life":0},"rate":{"particlesMin":1,"particlesMax":10,"perSecondMin":0.01,"perSecondMax":0.03},"position":{"x":0,"y":0,"z":0},"rotation":{"x":0,"y":0,"z":0},"initializers":[{"id":"c6e9d2f1-33a0-11ed-9266-858aed5b80dc","type":"Mass","properties":{"min":30,"max":10,"isEnabled":true}},{"id":"c6e9d2f2-33a0-11ed-9266-858aed5b80dc","type":"Life","properties":{"min":0.5,"max":1,"isEnabled":true,"center":false}},{"id":"c6e9d2f3-33a0-11ed-9266-858aed5b80dc","type":"BodySprite","properties":{"texture":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAA4JmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTgtMDYtMjlUMTU6MTQ6NDErMDI6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOC0wNi0yOVQxNToxNzowMyswMjowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTgtMDYtMjlUMTU6MTc6MDMrMDI6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6ZTBkNDA0NjMtYjE0My1mMDRkLThhMDItZTE2NGUyZjYzYjY4PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOmUwZDQwNDYzLWIxNDMtZjA0ZC04YTAyLWUxNjRlMmY2M2I2ODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOmUwZDQwNDYzLWIxNDMtZjA0ZC04YTAyLWUxNjRlMmY2M2I2ODwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDplMGQ0MDQ2My1iMTQzLWYwNGQtOGEwMi1lMTY0ZTJmNjNiNjg8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTgtMDYtMjlUMTU6MTQ6NDErMDI6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+NTEyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjUxMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg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","isEnabled":true}},{"id":"c6e9d2f4-33a0-11ed-9266-858aed5b80dc","type":"Radius","properties":{"width":20,"height":80,"isEnabled":true}},{"id":"c6e9d2f5-33a0-11ed-9266-858aed5b80dc","type":"RadialVelocity","properties":{"radius":400,"x":0,"y":0,"z":1,"theta":10,"isEnabled":true}}],"behaviours":[{"id":"c6e9d2f6-33a0-11ed-9266-858aed5b80dc","type":"Alpha","properties":{"alphaA":0.5,"alphaB":0,"life":null,"easing":"easeLinear","isEnabled":true}},{"id":"c6e9d2f7-33a0-11ed-9266-858aed5b80dc","type":"Color","properties":{"colorA":"#ffbe0b","colorB":"#581e09","life":null,"easing":"easeInOutCirc","isEnabled":true}},{"id":"c6e9d2f8-33a0-11ed-9266-858aed5b80dc","type":"Scale","properties":{"scaleA":0.5,"scaleB":1,"life":null,"easing":"easeLinear"}},{"id":"c6e9d2f9-33a0-11ed-9266-858aed5b80dc","type":"Force","properties":{"fx":0,"fy":0,"fz":0,"life":null,"easing":"easeLinear","isEnabled":true}},{"id":"c6e9d2fa-33a0-11ed-9266-858aed5b80dc","type":"Rotate","properties":{"x":0,"y":0,"z":0,"life":null,"easing":"easeLinear"}},{"id":"c6e9d2fb-33a0-11ed-9266-858aed5b80dc","type":"RandomDrift","properties":{"driftX":1,"driftY":23,"driftZ":4,"delay":1,"life":null,"easing":"easeLinear"}}],"emitterBehaviours":[{"id":"c6e9d2fd-33a0-11ed-9266-858aed5b80dc","type":"Rotate","properties":{"x":0,"y":0,"z":0,"life":null,"easing":"easeLinear"}}]}]}}');function XA(t){var e=this;void 0!==t?(this.nebula_renderer=void 0,this.nebula=void 0,jA.fromJSONAsync(YA.K,Gg).then((function(n){e.nebula_renderer=new FA(t,Gg),e.nebula=n.addRenderer(e.nebula_renderer)}))):console.error("DragonFire: scene is undefined")}XA.prototype.update_to_dragon_mouth=function(t,e){void 0!==this.nebula&&(this.nebula.emitters.forEach((function(n){var i=new Gg.Vector3(-t.x,-t.y,-t.z),r=(new Gg.Vector3).copy(i).applyAxisAngle(new Gg.Vector3(0,1,0),-e.y),s=new Gg.Vector3(r.x-120,r.y+240,r.z),o=(new Gg.Vector3).copy(s).applyAxisAngle(new Gg.Vector3(0,1,0),e.y),a=new Gg.Vector3(o.x+2*t.x,o.y+2*t.y,o.z+2*t.z);n.position=a,n.rotation.x=e.x,n.rotation.y=e.y-1.5707963267948966,n.rotation.z=e.z})),this.nebula.update())};const QA=XA;function ZA(t,e){void 0!==t?(this.coords=new $g,Zg.call(this),this.mesh.position.set(t.x,t.y,t.z),this.collider=new of(!1,this.mesh),this.fire=new QA(e)):console.error("ModelDragon: 'start_pos' is undefined")}ZA.prototype=Object.create(Zg.prototype),ZA.prototype.constructor=ZA,ZA.prototype.get_geometry=function(){var t=new Gg.BufferGeometry;t.setAttribute("position",new Gg.BufferAttribute(this.coords.vertices_coordinates,3)),t.setAttribute("normal",new Gg.BufferAttribute(this.coords.normals,3)),t.setIndex(new Gg.BufferAttribute(this.coords.edges_indices,1));var e=this.coords.getUVs(t);return t.setAttribute("uv",new Gg.BufferAttribute(e,2)),t.needsUpdate=!0,t},ZA.prototype.get_material=function(){var t=new Gg.MeshPhongMaterial({color:15073253,emissive:11857726,flatShading:!0,specular:13056,shininess:70,side:Gg.FrontSide,transparent:!0,opacity:.75,envMap:rf.SKYBOX_CUBE_TEXTURE});return t.needsUpdate=!0,t},ZA.prototype.update_collider=function(){this.collider.update_aabb()},ZA.prototype.update_fire=function(){this.fire.update_to_dragon_mouth(this.mesh.position,this.mesh.rotation)};const qA=ZA;function JA(){Zg.call(this)}JA.prototype=Object.create(Zg.prototype),JA.prototype.constructor=JA,JA.prototype.get_geometry=function(){var t=new Gg.BoxGeometry(rf.SKYBOX_WIDTH,rf.SKYBOX_WIDTH,rf.SKYBOX_WIDTH);return t.needsUpdate=!0,t},JA.prototype.get_material=function(){for(var t=[],e=new Gg.TextureLoader,n=0;n<rf.SKYBOX_TEXTURE_IMAGES_NAMES.length;n++){var i=rf.SKYBOX_TEXTURE_PATH+rf.SKYBOX_TEXTURE_IMAGES_NAMES[n];t.push(new Gg.MeshBasicMaterial({map:e.load(i),color:16777215,side:Gg.BackSide}))}return t};const KA=JA;function $A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(t,e)||tC(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tC(t,e){if(t){if("string"==typeof t)return eC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eC(t,e):void 0}}function eC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function nC(){this.links=new Map}nC.prototype.pushLink=function(t,e){this.links.set(t,e)},nC.prototype.createLinksHierarchy=function(){var t,e=void 0,n=void 0,i=0,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=tC(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(this.links);try{for(r.s();!(t=r.n()).done;){var s=$A(t.value,2),o=s[0],a=s[1];if(0!=i)n.add(a),console.debug("GPT_LinkedModel.createLinksHierarchy: linked "+o+" to "+e),e=o,n=a,i++;else{if("root"!=o)return void console.error("GPT_LinkedModel.createLinksHierarchy: first key is not 'root'. Found: "+o);e=o,n=a,i++}}}catch(t){r.e(t)}finally{r.f()}return console.debug("GPT_LinkedModel.createLinksHierarchy: total nodes: "+this.links.size+", total links: "+(this.links.size-1)),this.links.get("root")};const iC=nC;function rC(){Jg.call(this)}rC.prototype=Object.create(Jg.prototype),rC.prototype.constructor=rC,rC.prototype.getArrayVertices=function(){return new Float32Array([0,0,0,0,20,0,19,20,0,19,0,0,0,20,4,0,0,4,19,20,4,19,0,4,38,5,4,38,15,4,38,5,2,38,15,2])},rC.prototype.getArrayEdges=function(){return new Uint32Array([2,0,1,3,0,2,11,3,2,10,3,11,6,4,5,7,6,5,9,6,7,8,9,7,2,1,4,6,2,4,11,2,6,9,11,6,5,0,3,7,5,3,10,7,3,8,7,10,4,1,5,1,0,5,10,11,9,8,10,9])};const sC=rC;function oC(){this.coords=new sC,Zg.call(this)}oC.prototype=Object.create(Zg.prototype),oC.prototype.constructor=oC,oC.prototype.get_geometry=function(){var t=new Gg.BufferGeometry;t.setAttribute("position",new Gg.BufferAttribute(this.coords.vertices_coordinates,3)),t.setAttribute("normal",new Gg.BufferAttribute(this.coords.normals,3)),t.setIndex(new Gg.BufferAttribute(this.coords.edges_indices,1));var e=this.coords.getUVs(t);return t.setAttribute("uv",new Gg.BufferAttribute(e,2)),t.needsUpdate=!0,t},oC.prototype.get_material=function(){var t=new Gg.MeshPhongMaterial({color:16777189,emissive:16751001,flatShading:!0,specular:11796403,shininess:70,side:Gg.FrontSide,envMap:rf.SKYBOX_CUBE_TEXTURE});return t.needsUpdate=!0,t};const aC=oC;function lC(){return iC.call(this),this.getRobot()}lC.prototype=Object.create(iC.prototype),lC.prototype.constructor=lC,lC.prototype.getRobot=function(){var t=new Gg.Object3D,e=this.getGripperMesh();e.position.set(10,-10,-9),t.add(e);var n=this.getGripperMesh();n.position.set(10,10,9),n.rotation.set(-Math.PI,0,0),t.add(n),t.rotation.set(0,0,Math.PI/2);var i=new Gg.Object3D,r=this.getWristMesh();r.name="wrist",i.add(r),i.position.set(0,80,0);var s=new Gg.Object3D,o=this.getNerveMesh();o.position.set(8,40,8),s.add(o);var a=this.getNerveMesh();a.position.set(8,40,-8),s.add(a);var l=this.getNerveMesh();l.position.set(-8,40,8),s.add(l);var c=this.getNerveMesh();c.position.set(-8,40,-8),s.add(c);var h=this.getDiscMesh();s.add(h),s.position.set(0,110,0),s.rotation.set(0,0,-Math.PI/2);var u=new Gg.Object3D,d=this.getAxisMesh();d.rotation.set(Math.PI/2,0,0),u.add(d);var p=this.getHumerusMesh();p.position.set(0,50,0),u.add(p);var g=this.getBallJointMesh();g.position.set(0,110,0),u.add(g),u.rotation.set(0,0,Math.PI/4);var f=new Gg.Object3D,m=this.getBaseMesh();return f.add(m),f.position.set(-100,0,350),f.rotation.set(0,Math.PI/4,0),this.pushLink("root",f),this.pushLink("arm",u),this.pushLink("forearm",s),this.pushLink("hand",i),this.pushLink("gripper",t),this.createLinksHierarchy(),this},lC.prototype.getBaseMesh=function(){var t=new Gg.CylinderGeometry(50,50,15,18,1),e=(new Gg.TextureLoader).load(rf.BASE_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(5,1);var n=new Gg.MeshPhongMaterial({color:4210752,emissive:1052688,flatShading:!0,specular:1118481,shininess:0,map:e,side:Gg.FrontSide}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getAxisMesh=function(){var t=new Gg.CylinderGeometry(20,20,18,18,1),e=(new Gg.TextureLoader).load(rf.AXIS_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(2,.5);var n=new Gg.MeshPhongMaterial({color:16770533,emissive:1052688,flatShading:!1,specular:1118481,shininess:70,map:e,side:Gg.FrontSide}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getHumerusMesh=function(){var t=new Gg.BoxGeometry(18,120,12),e=(new Gg.TextureLoader).load(rf.HUMERUS_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(.1,1);var n=new Gg.MeshPhongMaterial({color:16770533,emissive:1052688,flatShading:!0,specular:1118481,shininess:50,map:e,side:Gg.FrontSide,bumpMap:e}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getBallJointMesh=function(){var t=new Gg.SphereGeometry(20,10,10);t.computeVertexNormals();var e=new Gg.MeshPhongMaterial({color:16770533,emissive:16751001,flatShading:!1,envMap:rf.SKYBOX_CUBE_TEXTURE,side:Gg.FrontSide}),n=new Gg.Mesh(t,e);return n.castShadow=!0,n.receiveShadow=!0,n},lC.prototype.getDiscMesh=function(){var t=new Gg.CylinderGeometry(22,22,6,18,1);t.computeVertexNormals();var e=(new Gg.TextureLoader).load(rf.DISC_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(5,.25);var n=new Gg.MeshPhongMaterial({color:16770533,emissive:1052688,flatShading:!1,specular:1118481,shininess:90,map:e,side:Gg.FrontSide,bumpMap:e}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getNerveMesh=function(){var t=new Gg.BoxGeometry(4,80,4),e=(new Gg.TextureLoader).load(rf.NERVE_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(.1,5);var n=new Gg.MeshPhongMaterial({color:16770533,emissive:8917008,flatShading:!0,specular:1118481,shininess:80,map:e,side:Gg.FrontSide,bumpMap:e}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getWristMesh=function(){var t=new Gg.CylinderGeometry(15,15,40,18,1);t.computeVertexNormals();var e=(new Gg.TextureLoader).load(rf.WRIST_TEXTURE_PATH);e.wrapS=e.wrapT=Gg.RepeatWrapping,e.magFilter=e.minFilter=Gg.LinearFilter,e.repeat.set(5,1);var n=new Gg.MeshPhongMaterial({color:16770533,emissive:0,flatShading:!1,specular:16716049,shininess:50,map:e,side:Gg.FrontSide,bumpMap:e}),i=new Gg.Mesh(t,n);return i.castShadow=!0,i.receiveShadow=!0,i},lC.prototype.getGripperMesh=function(){var t=new aC;return t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,t.mesh};const cC=lC;function hC(t,e,n){this.p1=t,void 0!==this.p1?(this.p2=e,void 0!==this.p2?(this.dist_end=n,null!=this.dist_end?(this.dist_middle=this.dist_end/2,this.trajectory_control_points=this.compute_control_points(),this.spline_points3D=[],Zg.call(this),this.mesh=new Gg.Line(this.geometry,this.material),this.mesh.computeLineDistances(),this.mesh.visible=!0):console.error("ModelTrajectory: 'dist_end' is undefined")):console.error("ModelTrajectory: 'p2' is undefined")):console.error("ModelTrajectory: 'p1' is undefined")}hC.prototype=Object.create(Zg.prototype),hC.prototype.constructor=hC,hC.prototype.compute_control_points=function(){var t=new Gg.Vector3(this.p2.x-this.p1.x,this.p2.y-this.p1.y,this.p2.z-this.p1.z),e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);t.normalize();var n=this.p2.clone().add(new Gg.Vector3(t.x*e,t.y*e,t.z*e)),i=new Gg.Vector3(0,1,0);i.normalize();var r=t.clone().angleTo(i)*rf.TRAJECTORY_ANGLE_DECAY,s=Math.tan(r)*this.dist_middle,o=new Gg.Vector3(t.x,0,t.z);o.normalize();var a=new Gg.Vector3(n.x,0,n.z),l=a.clone().add(new Gg.Vector3(o.x*this.dist_end,0,o.z*this.dist_end)),c=a.clone().add(new Gg.Vector3(o.x*this.dist_middle,n.y+s,o.z*this.dist_middle)),h=[];return h.push(this.p1),h.push(this.p2),h.push(n),h.push(c),h.push(l),h.push(l),h},hC.prototype.get_geometry=function(){var t=this.get_spline_points_and_colors(),e=t.positions,n=t.colors,i=new Gg.BufferGeometry;return i.setAttribute("position",new Gg.BufferAttribute(e,3)),i.setAttribute("color",new Gg.BufferAttribute(n,3)),i.verticesNeedUpdate=!0,i},hC.prototype.get_material=function(){return new Gg.LineBasicMaterial({vertexColors:!0,alphaToCoverage:!0,linewidth:5})},hC.prototype.get_spline_points_and_colors=function(){if(void 0!==this.trajectory_control_points){for(var t=new Gg.CatmullRomCurve3(this.trajectory_control_points),e=new Float32Array(3*rf.TRAJECTORY_SPLINE_NUM_SEGMENTS),n=new Float32Array(e),i=new Gg.Color,r=0,s=0;r<rf.TRAJECTORY_SPLINE_NUM_SEGMENTS;r++,s+=3){var o=r/rf.TRAJECTORY_SPLINE_NUM_SEGMENTS,a=new Gg.Vector3;t.getPoint(o,a),e[s]=a.x,e[s+1]=a.y,e[s+2]=a.z,this.spline_points3D.push(a),i.setHSL(o,1,.5),n[s]=i.r,n[s+1]=i.g,n[s+2]=i.b}return{positions:e,colors:n}}console.error("ModelTrajectory.get_spline_points_and_colors: 'trajectory_control_points' is undefined")},hC.prototype.dispose_buffers=function(){Zg.prototype.dispose_buffers.call(this),this.trajectory_control_points=null,this.p1=null,this.p2=null,console.log("ModelTrajectory: dispose_buffers()")};const uC=hC;function dC(t,e){var n=t.__state.conversionName.toString(),i=Math.round(t.r),r=Math.round(t.g),s=Math.round(t.b),o=t.a,a=Math.round(t.h),l=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var h=t.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===n?"rgb("+i+","+r+","+s+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+s+","+o+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+s+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+s+","+o+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+s+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+s+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+",a:"+o+"}":"unknown format"}var pC=Array.prototype.forEach,gC=Array.prototype.slice,fC={BREAK:{},extend:function(t){return this.each(gC.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(gC.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=gC.call(arguments);return function(){for(var e=gC.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(pC&&t.forEach&&t.forEach===pC)t.forEach(e,n);else if(t.length===t.length+0){var i,r=void 0;for(r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===this.BREAK)return}else for(var s in t)if(e.call(n,t[s],s)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i=void 0;return function(){var r=this,s=arguments;function o(){i=null,n||t.apply(r,s)}var a=n||!i;clearTimeout(i),i=setTimeout(o,e),a&&t.apply(r,s)}},toArray:function(t){return t.toArray?t.toArray():gC.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},mC=[{litmus:fC.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:dC},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:dC},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:dC},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:dC}}},{litmus:fC.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:fC.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:fC.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(fC.isNumber(t.r)&&fC.isNumber(t.g)&&fC.isNumber(t.b)&&fC.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(fC.isNumber(t.r)&&fC.isNumber(t.g)&&fC.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(fC.isNumber(t.h)&&fC.isNumber(t.s)&&fC.isNumber(t.v)&&fC.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(fC.isNumber(t.h)&&fC.isNumber(t.s)&&fC.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],AC=void 0,CC=void 0,vC=function(){CC=!1;var t=arguments.length>1?fC.toArray(arguments):arguments[0];return fC.each(mC,(function(e){if(e.litmus(t))return fC.each(e.conversions,(function(e,n){if(AC=e.read(t),!1===CC&&!1!==AC)return CC=AC,AC.conversionName=n,AC.conversion=e,fC.BREAK})),fC.BREAK})),CC},yC=void 0,IC={hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),s=n*(1-e),o=n*(1-r*e),a=n*(1-(1-r)*e),l=[[n,a,s],[o,n,s],[s,n,a],[s,o,n],[a,s,n],[n,s,o]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,n){var i=Math.min(t,e,n),r=Math.max(t,e,n),s=r-i,o=void 0;return 0===r?{h:NaN,s:0,v:0}:(o=t===r?(e-n)/s:e===r?2+(n-t)/s:4+(t-e)/s,(o/=6)<0&&(o+=1),{h:360*o,s:s/r,v:r/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(yC=8*e)|t&~(255<<yC)}},xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bC=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_C=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),wC=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},MC=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},SC=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},EC=function(){function t(){if(bC(this,t),this.__state=vC.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return _C(t,[{key:"toString",value:function(){return dC(this)}},{key:"toHexString",value:function(){return dC(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function TC(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||EC.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(EC.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function LC(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||EC.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(EC.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}EC.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=IC.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");fC.extend(t.__state,IC.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},EC.recalculateHSV=function(t){var e=IC.rgb_to_hsv(t.r,t.g,t.b);fC.extend(t.__state,{s:e.s,v:e.v}),fC.isNaN(e.h)?fC.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},EC.COMPONENTS=["r","g","b","h","s","v","hex","a"],TC(EC.prototype,"r",2),TC(EC.prototype,"g",1),TC(EC.prototype,"b",0),LC(EC.prototype,"h"),LC(EC.prototype,"s"),LC(EC.prototype,"v"),Object.defineProperty(EC.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(EC.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=IC.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var PC=function(){function t(e,n){bC(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return _C(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),RC={};fC.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){fC.each(t,(function(t){RC[t]=e}))}));var DC=/(\d+(\.\d+)?)px/;function OC(t){if("0"===t||fC.isUndefined(t))return 0;var e=t.match(DC);return fC.isNull(e)?0:parseFloat(e[1])}var zC={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var i=n,r=e;fC.isUndefined(r)&&(r=!0),fC.isUndefined(i)&&(i=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,i){var r=n||{},s=RC[e];if(!s)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(s);switch(s){case"MouseEvents":var a=r.x||r.clientX||0,l=r.y||r.clientY||0;o.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,a,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=o.initKeyboardEvent||o.initKeyEvent;fC.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:o.initEvent(e,r.bubbles||!1,r.cancelable||!0)}fC.defaults(o,i),t.dispatchEvent(o)},bind:function(t,e,n,i){var r=i||!1;return t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),zC},unbind:function(t,e,n,i){var r=i||!1;return t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),zC},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return zC},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!==i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return zC},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return OC(e["border-left-width"])+OC(e["border-right-width"])+OC(e["padding-left"])+OC(e["padding-right"])+OC(e.width)},getHeight:function(t){var e=getComputedStyle(t);return OC(e["border-top-width"])+OC(e["border-bottom-width"])+OC(e["padding-top"])+OC(e["padding-bottom"])+OC(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},BC=function(t){function e(t,n){bC(this,e);var i=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),zC.bind(i.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return MC(e,t),_C(e,[{key:"setValue",value:function(t){var n=wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(PC),HC=function(t){function e(t,n,i){bC(this,e);var r=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=i,o=r;if(r.__select=document.createElement("select"),fC.isArray(s)){var a={};fC.each(s,(function(t){a[t]=t})),s=a}return fC.each(s,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),o.__select.appendChild(n)})),r.updateDisplay(),zC.bind(r.__select,"change",(function(){var t=this.options[this.selectedIndex].value;o.setValue(t)})),r.domElement.appendChild(r.__select),r}return MC(e,t),_C(e,[{key:"setValue",value:function(t){var n=wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return zC.isActive(this.__select)?this:(this.__select.value=this.getValue(),wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(PC),NC=function(t){function e(t,n){bC(this,e);var i=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;function s(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),zC.bind(i.__input,"keyup",s),zC.bind(i.__input,"change",s),zC.bind(i.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),zC.bind(i.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return MC(e,t),_C(e,[{key:"updateDisplay",value:function(){return zC.isActive(this.__input)||(this.__input.value=this.getValue()),wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(PC);function FC(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var UC=function(t){function e(t,n,i){bC(this,e);var r=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=i||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,fC.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=FC(r.__impliedStep),r}return MC(e,t),_C(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=FC(t),this}}]),e}(PC);var GC=function(t){function e(t,n,i){bC(this,e);var r=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));r.__truncationSuspended=!1;var s=r,o=void 0;function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(t){var e=o-t.clientY;s.setValue(s.getValue()+e*s.__impliedStep),o=t.clientY}function c(){zC.unbind(window,"mousemove",l),zC.unbind(window,"mouseup",c),a()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),zC.bind(r.__input,"change",(function(){var t=parseFloat(s.__input.value);fC.isNaN(t)||s.setValue(t)})),zC.bind(r.__input,"blur",(function(){a()})),zC.bind(r.__input,"mousedown",(function(t){zC.bind(window,"mousemove",l),zC.bind(window,"mouseup",c),o=t.clientY})),zC.bind(r.__input,"keydown",(function(t){13===t.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,a())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return MC(e,t),_C(e,[{key:"updateDisplay",value:function(){var t,n,i;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,i=Math.pow(10,n),Math.round(t*i)/i),wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(UC);function kC(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}var WC=function(t){function e(t,n,i,r,s){bC(this,e);var o=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:i,max:r,step:s})),a=o;function l(t){t.preventDefault();var e=a.__background.getBoundingClientRect();return a.setValue(kC(t.clientX,e.left,e.right,a.__min,a.__max)),!1}function c(){zC.unbind(window,"mousemove",l),zC.unbind(window,"mouseup",c),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function h(t){var e=t.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(kC(e,n.left,n.right,a.__min,a.__max))}function u(){zC.unbind(window,"touchmove",h),zC.unbind(window,"touchend",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),zC.bind(o.__background,"mousedown",(function(t){document.activeElement.blur(),zC.bind(window,"mousemove",l),zC.bind(window,"mouseup",c),l(t)})),zC.bind(o.__background,"touchstart",(function(t){if(1!==t.touches.length)return;zC.bind(window,"touchmove",h),zC.bind(window,"touchend",u),h(t)})),zC.addClass(o.__background,"slider"),zC.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return MC(e,t),_C(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",wC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(UC),VC=function(t){function e(t,n,i){bC(this,e);var r=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,zC.bind(r.__button,"click",(function(t){return t.preventDefault(),s.fire(),!1})),zC.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return MC(e,t),_C(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(PC),jC=function(t){function e(t,n){bC(this,e);var i=SC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));i.__color=new EC(i.getValue()),i.__temp=new EC(0);var r=i;i.domElement=document.createElement("div"),zC.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",zC.bind(i.__input,"keydown",(function(t){13===t.keyCode&&u.call(this)})),zC.bind(i.__input,"blur",u),zC.bind(i.__selector,"mousedown",(function(){zC.addClass(this,"drag").bind(window,"mouseup",(function(){zC.removeClass(r.__selector,"drag")}))})),zC.bind(i.__selector,"touchstart",(function(){zC.addClass(this,"drag").bind(window,"touchend",(function(){zC.removeClass(r.__selector,"drag")}))}));var s,o=document.createElement("div");function a(t){p(t),zC.bind(window,"mousemove",p),zC.bind(window,"touchmove",p),zC.bind(window,"mouseup",c),zC.bind(window,"touchend",c)}function l(t){g(t),zC.bind(window,"mousemove",g),zC.bind(window,"touchmove",g),zC.bind(window,"mouseup",h),zC.bind(window,"touchend",h)}function c(){zC.unbind(window,"mousemove",p),zC.unbind(window,"touchmove",p),zC.unbind(window,"mouseup",c),zC.unbind(window,"touchend",c),d()}function h(){zC.unbind(window,"mousemove",g),zC.unbind(window,"touchmove",g),zC.unbind(window,"mouseup",h),zC.unbind(window,"touchend",h),d()}function u(){var t=vC(this.value);!1!==t?(r.__color.__state=t,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function d(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,i=n.clientX,s=n.clientY,o=(i-e.left)/(e.right-e.left),a=1-(s-e.top)/(e.bottom-e.top);return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),r.__color.v=a,r.__color.s=o,r.setValue(r.__color.toOriginal()),!1}function g(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return fC.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),fC.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),fC.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),fC.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),fC.extend(o.style,{width:"100%",height:"100%",background:"none"}),XC(o,"top","rgba(0,0,0,0)","#000"),fC.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=i.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",fC.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),zC.bind(i.__saturation_field,"mousedown",a),zC.bind(i.__saturation_field,"touchstart",a),zC.bind(i.__field_knob,"mousedown",a),zC.bind(i.__field_knob,"touchstart",a),zC.bind(i.__hue_field,"mousedown",l),zC.bind(i.__hue_field,"touchstart",l),i.__saturation_field.appendChild(o),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return MC(e,t),_C(e,[{key:"updateDisplay",value:function(){var t=vC(this.getValue());if(!1!==t){var e=!1;fC.each(EC.COMPONENTS,(function(n){if(!fC.isUndefined(t[n])&&!fC.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&fC.extend(this.__color.__state,t)}fC.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;fC.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,XC(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),fC.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),e}(PC),YC=["-moz-","-o-","-webkit-","-ms-",""];function XC(t,e,n,i){t.style.background="",fC.each(YC,(function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "}))}var QC=function(t,e){var n=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(t){}},ZC='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',qC=function(t,e){var n=t[e];return fC.isArray(arguments[2])||fC.isObject(arguments[2])?new HC(t,e,arguments[2]):fC.isNumber(n)?fC.isNumber(arguments[2])&&fC.isNumber(arguments[3])?fC.isNumber(arguments[4])?new WC(t,e,arguments[2],arguments[3],arguments[4]):new WC(t,e,arguments[2],arguments[3]):fC.isNumber(arguments[4])?new GC(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new GC(t,e,{min:arguments[2],max:arguments[3]}):fC.isString(n)?new NC(t,e):fC.isFunction(n)?new VC(t,e,""):fC.isBoolean(n)?new BC(t,e):null};var JC=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},KC=function(){function t(){bC(this,t),this.backgroundElement=document.createElement("div"),fC.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),zC.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),fC.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;zC.bind(this.backgroundElement,"click",(function(){e.hide()}))}return _C(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),fC.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",zC.unbind(t.domElement,"webkitTransitionEnd",e),zC.unbind(t.domElement,"transitionend",e),zC.unbind(t.domElement,"oTransitionEnd",e)};zC.bind(this.domElement,"webkitTransitionEnd",e),zC.bind(this.domElement,"transitionend",e),zC.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-zC.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-zC.getHeight(this.domElement)/2+"px"}}]),t}();QC(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var $C=function(){try{return!!window.localStorage}catch(t){return!1}}(),tv=void 0,ev=!0,nv=void 0,iv=!1,rv=[],sv=function t(e){var n=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),zC.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=fC.defaults(i,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),i=fC.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),fC.isUndefined(i.load)?i.load={preset:"Default"}:i.preset&&(i.load.preset=i.preset),fC.isUndefined(i.parent)&&i.hideable&&rv.push(this),i.resizable=fC.isUndefined(i.parent)&&i.resizable,i.autoPlace&&fC.isUndefined(i.scrollable)&&(i.scrollable=!0);var r,s=$C&&"true"===localStorage.getItem(uv(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(t){n.parent?n.getRoot().preset=t:i.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return i.width},set:function(t){i.width=t,mv(n,t)}},name:{get:function(){return i.name},set:function(t){i.name=t,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(e){i.closed=e,i.closed?zC.addClass(n.__ul,t.CLASS_CLOSED):zC.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return s},set:function(t){$C&&(s=t,t?zC.bind(window,"unload",o):zC.unbind(window,"unload",o),localStorage.setItem(uv(n,"isLocal"),t))}}}),fC.isUndefined(i.parent)){if(this.closed=i.closed||!1,zC.addClass(this.domElement,t.CLASS_MAIN),zC.makeSelectable(this.domElement,!1),$C&&s){n.useLocalStorage=!0;var l=localStorage.getItem(uv(this,"gui"));l&&(i.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,zC.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),i.closeOnTop?(zC.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(zC.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),zC.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var c=document.createTextNode(i.name);zC.addClass(c,"controller-name"),a=ov(n,c);zC.addClass(this.__ul,t.CLASS_CLOSED),zC.addClass(a,"title"),zC.bind(a,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(fC.isUndefined(i.parent)&&(ev&&(nv=document.createElement("div"),zC.addClass(nv,"dg"),zC.addClass(nv,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(nv),ev=!1),nv.appendChild(this.domElement),zC.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||mv(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},zC.bind(window,"resize",this.__resizeHandler),zC.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),zC.bind(this.__ul,"transitionend",this.__resizeHandler),zC.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&fv(this),o=function(){$C&&"true"===localStorage.getItem(uv(n,"isLocal"))&&localStorage.setItem(uv(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,i.parent||((r=n.getRoot()).width+=1,fC.defer((function(){r.width-=1})))};function ov(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,n):t.__ul.appendChild(i),t.onResize(),i}function av(t){zC.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&zC.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function lv(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function cv(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,n.load&&n.load.remembered){var s=n.load.remembered,o=void 0;if(s[t.preset])o=s[t.preset];else{if(!s.Default)return;o=s.Default}if(o[i]&&void 0!==o[i][e.property]){var a=o[i][e.property];e.initialValue=a,e.setValue(a)}}}}function hv(t,e,n,i){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new jC(e,n);else{var s=[e,n].concat(i.factoryArgs);r=qC.apply(t,s)}i.before instanceof PC&&(i.before=i.before.__li),cv(t,r),zC.addClass(r.domElement,"c");var o=document.createElement("span");zC.addClass(o,"property-name"),o.innerHTML=r.property;var a=document.createElement("div");a.appendChild(o),a.appendChild(r.domElement);var l=ov(t,a,i.before);return zC.addClass(l,sv.CLASS_CONTROLLER_ROW),r instanceof jC?zC.addClass(l,"color"):zC.addClass(l,xC(r.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,fC.extend(n,{options:function(e){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),hv(t,n.object,n.property,{before:i,factoryArgs:[fC.toArray(arguments)]})}if(fC.isArray(e)||fC.isObject(e)){var r=n.__li.nextElementSibling;return n.remove(),hv(t,n.object,n.property,{before:r,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof WC){var i=new GC(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});fC.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],r=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(i,t),e.apply(n,t)}})),zC.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof GC){var r=function(e){if(fC.isNumber(n.__min)&&fC.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=hv(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(i),r&&s.listen(),s}return e};n.min=fC.compose(r,n.min),n.max=fC.compose(r,n.max)}else n instanceof BC?(zC.bind(e,"click",(function(){zC.fakeEvent(n.__checkbox,"click")})),zC.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof VC?(zC.bind(e,"click",(function(){zC.fakeEvent(n.__button,"click")})),zC.bind(e,"mouseover",(function(){zC.addClass(n.__button,"hover")})),zC.bind(e,"mouseout",(function(){zC.removeClass(n.__button,"hover")}))):n instanceof jC&&(zC.addClass(e,"color"),n.updateDisplay=fC.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=fC.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&lv(t.getRoot(),!0),e}),n.setValue)}(t,l,r),t.__controllers.push(r),r}function uv(t,e){return document.location.href+"."+e}function dv(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function pv(t,e){e.style.display=t.useLocalStorage?"block":"none"}function gv(t){var e=t.__save_row=document.createElement("li");zC.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),zC.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",zC.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",zC.addClass(i,"button"),zC.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",zC.addClass(r,"button"),zC.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",zC.addClass(s,"button"),zC.addClass(s,"revert");var o=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?fC.each(t.load.remembered,(function(e,n){dv(t,n,n===t.preset)})):dv(t,"Default",!1),zC.bind(o,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(o),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(s),$C){var a=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(uv(0,"isLocal"))&&l.setAttribute("checked","checked"),pv(t,a),zC.bind(l,"change",(function(){t.useLocalStorage=!t.useLocalStorage,pv(t,a)}))}var c=document.getElementById("dg-new-constructor");zC.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||tv.hide()})),zC.bind(n,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),tv.show(),c.focus(),c.select()})),zC.bind(i,"click",(function(){t.save()})),zC.bind(r,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),zC.bind(s,"click",(function(){t.revert()}))}function fv(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function i(){zC.removeClass(t.__closeButton,sv.CLASS_DRAG),zC.unbind(window,"mousemove",n),zC.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),e=r.clientX,zC.addClass(t.__closeButton,sv.CLASS_DRAG),zC.bind(window,"mousemove",n),zC.bind(window,"mouseup",i),!1}t.__resize_handle=document.createElement("div"),fC.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),zC.bind(t.__resize_handle,"mousedown",r),zC.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function mv(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function Av(t,e){var n={};return fC.each(t.__rememberedObjects,(function(i,r){var s={},o=t.__rememberedObjectIndecesToControllers[r];fC.each(o,(function(t,n){s[n]=e?t.initialValue:t.getValue()})),n[r]=s})),n}sv.toggleHide=function(){iv=!iv,fC.each(rv,(function(t){t.domElement.style.display=iv?"none":""}))},sv.CLASS_AUTO_PLACE="a",sv.CLASS_AUTO_PLACE_CONTAINER="ac",sv.CLASS_MAIN="main",sv.CLASS_CONTROLLER_ROW="cr",sv.CLASS_TOO_TALL="taller-than-window",sv.CLASS_CLOSED="closed",sv.CLASS_CLOSE_BUTTON="close-button",sv.CLASS_CLOSE_TOP="close-top",sv.CLASS_CLOSE_BOTTOM="close-bottom",sv.CLASS_DRAG="drag",sv.DEFAULT_WIDTH=245,sv.TEXT_CLOSED="Close Controls",sv.TEXT_OPEN="Open Controls",sv._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||sv.toggleHide()},zC.bind(window,"keydown",sv._keydownHandler,!1),fC.extend(sv.prototype,{add:function(t,e){return hv(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return hv(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;fC.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&nv.removeChild(this.domElement);var t=this;fC.each(this.__folders,(function(e){t.removeFolder(e)})),zC.unbind(window,"keydown",sv._keydownHandler,!1),av(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new sv(e);this.__folders[t]=n;var i=ov(this,n.domElement);return zC.addClass(i,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],av(t);var e=this;fC.each(t.__folders,(function(e){t.removeFolder(e)})),fC.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=zC.getOffset(t.__ul).top,n=0;fC.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=zC.getHeight(e))})),window.innerHeight-e-20<n?(zC.addClass(t.domElement,sv.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(zC.removeClass(t.domElement,sv.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&fC.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:fC.debounce((function(){this.onResize()}),50),remember:function(){if(fC.isUndefined(tv)&&((tv=new KC).domElement.innerHTML=ZC),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;fC.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&gv(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&mv(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=Av(this)),t.folders={},fC.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Av(this),lv(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Av(this,!0)),this.load.remembered[t]=Av(this),this.preset=t,dv(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){fC.each(this.__controllers,(function(e){this.getRoot().load.remembered?cv(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),fC.each(this.__folders,(function(t){t.revert(t)})),t||lv(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&JC.call(window,(function(){t(e)}));fC.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){fC.each(this.__controllers,(function(t){t.updateDisplay()})),fC.each(this.__folders,(function(t){t.updateDisplay()}))}});var Cv=sv;var vv=function(){var t=0,e=document.createElement("div");function n(t){return e.appendChild(t.dom),t}function i(n){for(var i=0;i<e.children.length;i++)e.children[i].style.display=i===n?"block":"none";t=n}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",(function(n){n.preventDefault(),i(++t%e.children.length)}),!1);var r=(performance||Date).now(),s=r,o=0,a=n(new vv.Panel("FPS","#0ff","#002")),l=n(new vv.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new vv.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:n,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(l.update(t-r,200),t>=s+1e3&&(a.update(1e3*o/(t-s),100),s=t,o=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:e,setMode:i}};vv.Panel=function(t,e,n){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,h=2*o,u=3*o,d=15*o,p=74*o,g=30*o,f=document.createElement("canvas");f.width=a,f.height=l,f.style.cssText="width:80px;height:48px";var m=f.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,a,l),m.fillStyle=e,m.fillText(t,c,h),m.fillRect(u,d,p,g),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(u,d,p,g),{dom:f,update:function(l,A){i=Math.min(i,l),r=Math.max(r,l),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,a,d),m.fillStyle=e,m.fillText(s(l)+" "+t+" ("+s(i)+"-"+s(r)+")",c,h),m.drawImage(f,u+o,d,p-o,g,u,d,p-o,g),m.fillRect(u+p-o,d,o,g),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(u+p-o,d,o,s((1-l/A)*g))}}};const yv=vv;function Iv(t){this.cbs=t,void 0!==this.cbs?(this.is_mobile=this.check_is_mobile_device(),this.is_mobile||(this.keyboard=this.create_kb_controller()),this.gui=null,this.controllers=null,this.create_ui_controller()):console.error("InputManager: on_change_callbacks is undefined")}Iv.prototype.check_is_mobile_device=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},Iv.prototype.create_ui_controller=function(){this.gui=new Cv,this.controllers=new Map,Array.from(document.getElementsByClassName("dg")).forEach((function(t,e,n){t.style.opacity=.85}));var t={status:"rotating",rot_angle:0,smoothing:!1},e=this.gui.addFolder("dragon"),n=e.add(t,"status").name("Status");this.controllers.set("dragon_status",n),n=e.add(t,"rot_angle",-3,3,1).name("RotY Angle").onChange(this.cbs.on_change_dragon_rot_angle).setValue(1),this.controllers.set("dragon_rot_angle",n),n=e.add(t,"smoothing",!1).name("Smoothing").onChange(this.cbs.on_change_dragon_smoothing).setValue(!1),this.controllers.set("dragon_smoothing",n),t={status:"idle",power:500,aim_angle:0},n=(e=this.gui.addFolder("robot")).add(t,"status").name("Status"),this.controllers.set("robot_status",n),n=e.add(t,"power",rf.TRAJECTORY_DIST_MIN,rf.TRAJECTORY_DIST_MAX,rf.TRAJECTORY_DIST_STEP).name("Power").setValue(rf.TRAJECTORY_DIST_MIN),this.controllers.set("robot_power",n),n=e.add(t,"aim_angle",35,80,3).name("Aim Angle").onChange(this.cbs.on_change_robot_aim_rotation).setValue(45),this.controllers.set("robot_aim_angle",n),n=this.create_shoot_button_html(),this.controllers.set("robot_shoot",n),n=this.create_stats_widget(),this.controllers.set("stats",n)},Iv.prototype.create_shoot_button_html=function(){var t=document.createElement("button");return t.innerHTML="Shoot",t.id="shoot_button_id",t.onclick=this.cbs.on_change_robot_shoot,this.gui.getRoot().domElement.appendChild(t),t.style.position="relative",t.style.width="55px",t.style.height="45px",t.style.borderRadius="10px",t.style.borderWidth="5px",t.style.borderColor="white",t.style.fontSize="12px",t.style.fontWeight="bold",t.style.backgroundColor="#d18773",t.style.top="70px",t.style.left="190px",t},Iv.prototype.create_stats_widget=function(){var t=new yv;t.dom.style.position="absolute",t.dom.style.left="0px";var e=(window.innerHeight-50).toString()+"px";return t.dom.style.top=e,document.getElementById("container").appendChild(t.dom),t},Iv.prototype.create_kb_controller=function(){};const xv=Iv;function bv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _v=Object.freeze({IDLE:Symbol("idle"),LOADING_BULLET:Symbol("loading_bullet"),BULLET_TRAVELING:Symbol("bullet_traveling"),HIT:Symbol("hit"),NO_HIT:Symbol("no_hit")}),wv=Object.freeze({SHOOT_STARTED:Symbol("shoot_started"),SHOOT_ENDED:Symbol("shoot_ended"),BULLET_COLLIDED:Symbol("bullet_collided"),END_OF_TRAJECTORY:Symbol("end_of_trajectory"),RESTART:Symbol("restart")});function Mv(t){var e,n;this.cbs=t,void 0!==this.cbs?(this.transitions=(bv(n={},_v.IDLE,bv({},wv.SHOOT_STARTED,_v.LOADING_BULLET)),bv(n,_v.LOADING_BULLET,bv({},wv.SHOOT_ENDED,_v.BULLET_TRAVELING)),bv(n,_v.BULLET_TRAVELING,(bv(e={},wv.BULLET_COLLIDED,_v.HIT),bv(e,wv.END_OF_TRAJECTORY,_v.NO_HIT),e)),bv(n,_v.HIT,bv({},wv.RESTART,_v.IDLE)),bv(n,_v.NO_HIT,bv({},wv.RESTART,_v.IDLE)),n),this.state=_v.IDLE,this.prev_state=void 0):console.error("FSM_Robot: event_detection callbacks 'cbs' is undefined")}Mv.prototype.get_dest_state=function(t){var e=this.transitions[this.state];if(void 0!==e){var n=e[t];return void 0===n&&console.warn("Event not allowed: '"+t.description+"' in current state '"+this.state.description+"'"),n}console.error("Unhandled state: "+this.state.description)},Mv.prototype.transit=function(t){console.debug("input event: "+t.description);var e=this.get_dest_state(t);if(void 0!==e){switch(this.state=e,console.debug("current state: "+this.state.description),this.state){case _v.IDLE:this.restart_start=void 0;break;case _v.LOADING_BULLET:this.loading_bullet_start=performance.now();break;case _v.BULLET_TRAVELING:this.loading_bullet_start=void 0,this.bullet_traveling_start=performance.now();break;case _v.HIT:case _v.NO_HIT:this.bullet_traveling_start=void 0,this.restart_start=performance.now()}return!0}return!1},Mv.prototype.current_is_idle=function(){return _v.IDLE==this.state},Mv.prototype.current_is_loading_bullet=function(){return _v.LOADING_BULLET==this.state},Mv.prototype.current_is_bullet_traveling=function(){return _v.BULLET_TRAVELING==this.state},Mv.prototype.current_is_hit=function(){return _v.HIT==this.state},Mv.prototype.current_is_no_hit=function(){return _v.NO_HIT==this.state},Mv.prototype.state_has_changed=function(){return this.prev_state!=this.state},Mv.prototype.update_state=function(){switch(this.prev_state=this.state,this.state){case _v.IDLE:break;case _v.LOADING_BULLET:this.loading_bullet_expired()&&this.transit(wv.SHOOT_ENDED);break;case _v.BULLET_TRAVELING:this.bullet_traveling_expired()?this.transit(wv.END_OF_TRAJECTORY):this.cbs.bullet_collided()&&this.transit(wv.BULLET_COLLIDED);break;case _v.HIT:case _v.NO_HIT:this.restart_expired()&&this.transit(wv.RESTART)}},Mv.prototype.loading_bullet_expired=function(){return this.state==_v.LOADING_BULLET&&(void 0!==this.loading_bullet_start&&performance.now()-this.loading_bullet_start>=rf.FSM_DURATION_LOADING_BULLET_MS)},Mv.prototype.bullet_traveling_expired=function(){return this.state==_v.BULLET_TRAVELING&&(void 0!==this.bullet_traveling_start&&performance.now()-this.bullet_traveling_start>=rf.FSM_DURATION_BULLET_TRAVELLING_MS)},Mv.prototype.restart_expired=function(){return(this.state==_v.HIT||this.state==_v.NO_HIT)&&(void 0!==this.restart_start&&performance.now()-this.restart_start>=rf.FSM_DURATION_RESTART_MS)};const Sv={FSM_Robot:Mv,R_Events:wv,R_States:_v},Ev=[];for(let t=0;t<256;t++)Ev[t]=(t<16?"0":"")+t.toString(16);Math.PI,Math.PI;function Tv(t,e,n){return(1-n)*t+n*e}function Lv(t,e){this.trajectory_points3D=t,void 0!==this.trajectory_points3D?0!=this.trajectory_points3D.size?void 0!==e?(Zg.call(this),this.mesh.position.set(e.x,e.y,e.z),this.collider=new of(!1,this.mesh),this.current_point_index=0,this.prev_ts=performance.now()):console.error("ModelBullet: 'start_pos' is undefined"):console.error("ModelBullet: 'trajectory_points' has 0 elements"):console.error("ModelBullet: 'trajectory_points' is undefined")}Lv.prototype=Object.create(Zg.prototype),Lv.prototype.constructor=Lv,Lv.prototype.get_geometry=function(){return new Gg.SphereGeometry(22,8,8)},Lv.prototype.get_material=function(){return new Gg.MeshPhongMaterial({color:14114825,emissive:6823799,flatShading:!0,specular:16734003,shininess:50,side:Gg.FrontSide,transparent:!1})},Lv.prototype.dispose_buffers=function(){Zg.prototype.dispose_buffers.call(this),this.collider.dispose_buffers(),console.log("ModelBullet: dispose_buffers()")},Lv.prototype.move_to_next_point=function(){var t=this.trajectory_points3D.length-1;if(this.current_point_index>=t)return!1;this.current_point_index++;var e=this.trajectory_points3D[this.current_point_index];return this.mesh.position.set(e.x,e.y,e.z),this.collider.update_aabb(),!0},Lv.prototype.move_to_next_point_interpolated=function(){var t=this.trajectory_points3D.length-1;if(this.current_point_index>=t)return!1;var e=performance.now()-this.prev_ts;if(e<rf.BULLET_STEP_DURATION_MS){var n=e/rf.BULLET_STEP_DURATION_MS,i=this.trajectory_points3D[this.current_point_index],r=this.trajectory_points3D[this.current_point_index+1],s=Tv(i.x,r.x,n),o=Tv(i.y,r.y,n),a=Tv(i.z,r.z,n);return this.mesh.position.set(s,o,a),this.collider.update_aabb(),!0}return this.current_point_index++,this.prev_ts=performance.now(),!1};const Pv=Lv;function Rv(){Xg.call(this)}Rv.prototype=Object.create(Xg.prototype),Rv.prototype.constructor=Rv,Rv.prototype.createObjects=function(){this.createAxes(),this.createFloor(),this.createDragon(),this.createSkybox(),this.createRobot(),this.createInputManager()},Rv.prototype.createAxes=function(){var t=new Gg.AxesHelper(200);t.position.set(0,0,0),t.setColors(new Gg.Color(16711680),new Gg.Color(65280),new Gg.Color(255)),this.gpt_models.set("AxesHelper",t)},Rv.prototype.createFloor=function(){var t=new Gg.PlaneGeometry(rf.FLOOR_WIDTH,rf.FLOOR_WIDTH,2,2),e=(new Gg.TextureLoader).load(rf.FLOOR_TEXTURE_PATH);e.wrapS=Gg.RepeatWrapping,e.wrapT=Gg.RepeatWrapping,e.repeat.set(2,2);var n=new Gg.MeshPhongMaterial({color:11753728,emissive:1052688,flatShading:!1,specular:1120785,shininess:50,map:e,side:Gg.FrontSide}),i=new Gg.Mesh(t,n);i.rotation.set(-1.57079632679,0,0),i.castShadow=!1,i.receiveShadow=!0,this.gpt_models.set("floor",i)},Rv.prototype.createDragon=function(){var t=new Gg.Vector3(200,-75,-250);this.dragon_model=new qA(t,this.scene),this.dragon_model.mesh.scale.set(1500,1500,1500),this.dragon_model.mesh.castShadow=!0,this.dragon_model.mesh.receiveShadow=!0,this.gpt_models.set("dragon",this.dragon_model.mesh),this.gpt_models.set("dragon_collider",this.dragon_model.collider.aabb_helper),this.dragon_rot_angle_rads=0,this.dragon_model.geometry.computeVertexNormals()},Rv.prototype.createSkybox=function(){var t=new KA;t.mesh.castShadow=!1,t.mesh.receiveShadow=!1,this.gpt_models.set("skybox",t.mesh)},Rv.prototype.createRobot=function(){var t=this;this.robotLinked=new cC;var e={bullet_collided:function(){return t.bullet_model.collider.is_colliding_with(t.dragon_model.collider.aabb)}};this.fsm_r=new Sv.FSM_Robot(e);var n=this.robotLinked.links.get("root");this.gpt_models.set("robot",n)},Rv.prototype.createInputManager=function(){var t=this,e={on_change_dragon_rot_angle:function(e){t.dragon_rot_angle_rads=e*Math.PI/180},on_change_dragon_smoothing:function(e){var n=t.gpt_models.get("dragon");n.material.flatShading=!e,n.material.needsUpdate=!0},on_change_robot_aim_rotation:function(e){var n=t.robotLinked.links.get("root"),i=e*Math.PI/180;n.rotation.y=i},on_change_robot_shoot:function(){if(t.fsm_r.current_is_idle())t.fsm_r.transit(Sv.R_Events.SHOOT_STARTED),t.im.controllers.get("robot_status").setValue(t.fsm_r.state.description);else if(t.fsm_r.current_is_loading_bullet()){var e=t.im.controllers.get("robot_power"),n=e.getValue()+rf.TRAJECTORY_DIST_STEP;e.setValue(n);var i=t.robotLinked.links.get("hand").getObjectByName("wrist"),r=new Gg.Color(i.material.emissive.r+.25,i.material.emissive.g,i.material.emissive.b);i.material.emissive.set(r)}}};this.im=new xv(e)},Rv.prototype.updateObjects=function(t){this.updateDragon(t),this.updateRobot(t),this.updateBullet(),this.on_fsmr_changed(),this.im.controllers.get("stats").update()},Rv.prototype.updateDragon=function(t){this.fsm_r.current_is_hit()||(this.dragon_model.mesh.rotation.y+=this.dragon_rot_angle_rads,this.dragon_model.mesh.rotation.y=this.dragon_model.mesh.rotation.y>=2*Math.PI?0:this.dragon_model.mesh.rotation.y,this.dragon_model.update_collider()),this.dragon_model.update_fire()},Rv.prototype.updateRobot=function(t){if(this.fsm_r.current_is_loading_bullet()){var e=this.robotLinked.links.get("forearm");e.rotation.x+=.174533,e.rotation.x=e.rotation.x>=2*Math.PI?0:e.rotation.x}},Rv.prototype.on_fsmr_changed=function(){if(this.fsm_r.update_state(),this.fsm_r.state_has_changed())if(this.im.controllers.get("robot_status").setValue(this.fsm_r.state.description),this.fsm_r.current_is_bullet_traveling())this.createTrajectory(),this.createBullet();else if(this.fsm_r.current_is_hit())this.dragon_model.mesh.material.color.set(16711680),this.dragon_model.mesh.material.emissive.set(16711680),this.dragon_model.mesh.material.specular.set(16711680);else if(this.fsm_r.current_is_idle()){this.removeTrajectory(),this.removeBullet(),this.dragon_model.mesh.material.color.set(15073253),this.dragon_model.mesh.material.emissive.set(11857726),this.dragon_model.mesh.material.specular.set(13056),this.im.controllers.get("robot_power").setValue(rf.TRAJECTORY_DIST_MIN),this.robotLinked.links.get("hand").getObjectByName("wrist").material.emissive.set(0)}},Rv.prototype.createTrajectory=function(t){this.removeTrajectory();var e=this.robotLinked.links.get("forearm"),n=new Gg.Vector3;e.getWorldPosition(n);var i=this.robotLinked.links.get("hand"),r=new Gg.Vector3;i.getWorldPosition(r);var s=this.im.controllers.get("robot_power").getValue();this.tra_model=new uC(n,r,s),this.tra_model.mesh.castShadow=!1,this.tra_model.mesh.receiveShadow=!1,this.AddModelToScene("trajectory",this.tra_model.mesh)},Rv.prototype.removeTrajectory=function(){void 0!==this.tra_model&&(this.tra_model.dispose_buffers(),this.tra_model=void 0,this.removeModelFromScene("trajectory"))},Rv.prototype.createBullet=function(){this.removeBullet();var t=this.tra_model.spline_points3D,e=t[0];this.bullet_model=new Pv(t,e),this.bullet_model.mesh.castShadow=!0,this.bullet_model.mesh.receiveShadow=!1,this.AddModelToScene("bullet",this.bullet_model.mesh),this.AddModelToScene("bullet_collider",this.bullet_model.collider.aabb_helper)},Rv.prototype.removeBullet=function(){void 0!==this.bullet_model&&(this.bullet_model.dispose_buffers(),this.bullet_model=void 0,this.removeModelFromScene("bullet"),this.removeModelFromScene("bullet_collider"))},Rv.prototype.updateBullet=function(){this.fsm_r.current_is_bullet_traveling()?(this.bullet_model.move_to_next_point_interpolated(),this.bullet_model.mesh.rotation.x-=.174533):this.fsm_r.current_is_hit()&&(this.bullet_model.mesh.rotation.x-=.174533)},Rv.prototype.createLights=function(){var t=new Gg.AmbientLight(new Gg.Color(855309),1);this.gpt_lights.set("lAmbient",t);var e=new Gg.PointLight(new Gg.Color(12566463),1);e.position.set(0,100,50),this.gpt_lights.set("lPoint",e);var n=new Gg.PointLightHelper(e,10);this.gpt_lights.set("lPointHelper",n);var i=new Gg.DirectionalLight(new Gg.Color(12566463),1);i.position.set(-200,200,0),this.gpt_lights.set("lDirectional",i);var r=new Gg.DirectionalLightHelper(i,10);this.gpt_lights.set("lDirectionalHelper",r);var s=new Gg.SpotLight(new Gg.Color(12566463));s.position.set(200,330,-300),s.target.position.set(0,0,0),s.angle=Math.PI/8,s.distance=1e3,s.castShadow=!0,s.shadow.camera.near=5,s.shadow.camera.far=1e3,s.shadow.camera.fov=45,s.shadow.camera.visible=!0,s.intensity=10,s.decay=7.5,this.gpt_lights.set("lFocal",s);var o=new Gg.SpotLightHelper(s);this.gpt_lights.set("lFocalHelper",o)},Rv.prototype.updateLights=function(t){};const Dv=Rv;function Ov(t,e,n){void 0!==n?(this.w=t,this.h=e,this.gpt_scene=n,this.wglrenderer=new Gg.WebGLRenderer):console.error("GPT_Renderer: scene is undefined when creating GPT_Renderer")}console.warn("THREE.OrbitControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),Gg.OrbitControls=function(t,e){var n,i,r,s,o,a;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new Gg.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:Gg.MOUSE.ROTATE,MIDDLE:Gg.MOUSE.DOLLY,RIGHT:Gg.MOUSE.PAN},this.touches={ONE:Gg.TOUCH.ROTATE,TWO:Gg.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),p=d.NONE},this.update=(n=new Gg.Vector3,i=(new Gg.Quaternion).setFromUnitVectors(t.up,new Gg.Vector3(0,1,0)),r=i.clone().inverse(),s=new Gg.Vector3,o=new Gg.Quaternion,a=2*Math.PI,function(){var t=l.object.position;n.copy(t).sub(l.target),n.applyQuaternion(i),f.setFromVector3(n),l.autoRotate&&p===d.NONE&&L(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(f.theta+=m.theta*l.dampingFactor,f.phi+=m.phi*l.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);var e=l.minAzimuthAngle,h=l.maxAzimuthAngle;return isFinite(e)&&isFinite(h)&&(e<-Math.PI?e+=a:e>Math.PI&&(e-=a),h<-Math.PI?h+=a:h>Math.PI&&(h-=a),f.theta=e<h?Math.max(e,Math.min(h,f.theta)):f.theta>(e+h)/2?Math.max(e,f.theta):Math.min(h,f.theta)),f.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=A,f.radius=Math.max(l.minDistance,Math.min(l.maxDistance,f.radius)),!0===l.enableDamping?l.target.addScaledVector(C,l.dampingFactor):l.target.add(C),n.setFromSpherical(f),n.applyQuaternion(r),t.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(m.theta*=1-l.dampingFactor,m.phi*=1-l.dampingFactor,C.multiplyScalar(1-l.dampingFactor)):(m.set(0,0,0),C.set(0,0,0)),A=1,!!(v||s.distanceToSquared(l.object.position)>g||8*(1-o.dot(l.object.quaternion))>g)&&(l.dispatchEvent(c),s.copy(l.object.position),o.copy(l.object.quaternion),v=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",$,!1),l.domElement.removeEventListener("mousedown",j,!1),l.domElement.removeEventListener("wheel",Q,!1),l.domElement.removeEventListener("touchstart",q,!1),l.domElement.removeEventListener("touchend",K,!1),l.domElement.removeEventListener("touchmove",J,!1),l.domElement.ownerDocument.removeEventListener("mousemove",Y,!1),l.domElement.ownerDocument.removeEventListener("mouseup",X,!1),l.domElement.removeEventListener("keydown",Z,!1)};var l=this,c={type:"change"},h={type:"start"},u={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=d.NONE,g=1e-6,f=new Gg.Spherical,m=new Gg.Spherical,A=1,C=new Gg.Vector3,v=!1,y=new Gg.Vector2,I=new Gg.Vector2,x=new Gg.Vector2,b=new Gg.Vector2,_=new Gg.Vector2,w=new Gg.Vector2,M=new Gg.Vector2,S=new Gg.Vector2,E=new Gg.Vector2;function T(){return Math.pow(.95,l.zoomSpeed)}function L(t){m.theta-=t}function P(t){m.phi-=t}var R=function(){var t=new Gg.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),C.add(t)}}(),D=function(){var t=new Gg.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),C.add(t)}}(),O=function(){var t=new Gg.Vector3;return function(e,n){var i=l.domElement;if(l.object.isPerspectiveCamera){var r=l.object.position;t.copy(r).sub(l.target);var s=t.length();s*=Math.tan(l.object.fov/2*Math.PI/180),R(2*e*s/i.clientHeight,l.object.matrix),D(2*n*s/i.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(R(e*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),D(n*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function z(t){l.object.isPerspectiveCamera?A/=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function B(t){l.object.isPerspectiveCamera?A*=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function H(t){y.set(t.clientX,t.clientY)}function N(t){b.set(t.clientX,t.clientY)}function F(t){if(1==t.touches.length)y.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);y.set(e,n)}}function U(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,n)}}function G(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);M.set(0,i)}function k(t){if(1==t.touches.length)I.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);I.set(e,n)}x.subVectors(I,y).multiplyScalar(l.rotateSpeed);var i=l.domElement;L(2*Math.PI*x.x/i.clientHeight),P(2*Math.PI*x.y/i.clientHeight),y.copy(I)}function W(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}w.subVectors(_,b).multiplyScalar(l.panSpeed),O(w.x,w.y),b.copy(_)}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);S.set(0,i),E.set(0,Math.pow(S.y/M.y,l.zoomSpeed)),z(E.y),M.copy(S)}function j(t){if(!1!==l.enabled){var e;switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:e=l.mouseButtons.LEFT;break;case 1:e=l.mouseButtons.MIDDLE;break;case 2:e=l.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Gg.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(t){M.set(t.clientX,t.clientY)}(t),p=d.DOLLY;break;case Gg.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;N(t),p=d.PAN}else{if(!1===l.enableRotate)return;H(t),p=d.ROTATE}break;case Gg.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;H(t),p=d.ROTATE}else{if(!1===l.enablePan)return;N(t),p=d.PAN}break;default:p=d.NONE}p!==d.NONE&&(l.domElement.ownerDocument.addEventListener("mousemove",Y,!1),l.domElement.ownerDocument.addEventListener("mouseup",X,!1),l.dispatchEvent(h))}}function Y(t){if(!1!==l.enabled)switch(t.preventDefault(),p){case d.ROTATE:if(!1===l.enableRotate)return;!function(t){I.set(t.clientX,t.clientY),x.subVectors(I,y).multiplyScalar(l.rotateSpeed);var e=l.domElement;L(2*Math.PI*x.x/e.clientHeight),P(2*Math.PI*x.y/e.clientHeight),y.copy(I),l.update()}(t);break;case d.DOLLY:if(!1===l.enableZoom)return;!function(t){S.set(t.clientX,t.clientY),E.subVectors(S,M),E.y>0?z(T()):E.y<0&&B(T()),M.copy(S),l.update()}(t);break;case d.PAN:if(!1===l.enablePan)return;!function(t){_.set(t.clientX,t.clientY),w.subVectors(_,b).multiplyScalar(l.panSpeed),O(w.x,w.y),b.copy(_),l.update()}(t)}}function X(t){!1!==l.enabled&&(l.domElement.ownerDocument.removeEventListener("mousemove",Y,!1),l.domElement.ownerDocument.removeEventListener("mouseup",X,!1),l.dispatchEvent(u),p=d.NONE)}function Q(t){!1===l.enabled||!1===l.enableZoom||p!==d.NONE&&p!==d.ROTATE||(t.preventDefault(),t.stopPropagation(),l.dispatchEvent(h),function(t){t.deltaY<0?B(T()):t.deltaY>0&&z(T()),l.update()}(t),l.dispatchEvent(u))}function Z(t){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(t){var e=!1;switch(t.keyCode){case l.keys.UP:O(0,l.keyPanSpeed),e=!0;break;case l.keys.BOTTOM:O(0,-l.keyPanSpeed),e=!0;break;case l.keys.LEFT:O(l.keyPanSpeed,0),e=!0;break;case l.keys.RIGHT:O(-l.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),l.update())}(t)}function q(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case Gg.TOUCH.ROTATE:if(!1===l.enableRotate)return;F(t),p=d.TOUCH_ROTATE;break;case Gg.TOUCH.PAN:if(!1===l.enablePan)return;U(t),p=d.TOUCH_PAN;break;default:p=d.NONE}break;case 2:switch(l.touches.TWO){case Gg.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&G(t),l.enablePan&&U(t)}(t),p=d.TOUCH_DOLLY_PAN;break;case Gg.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&G(t),l.enableRotate&&F(t)}(t),p=d.TOUCH_DOLLY_ROTATE;break;default:p=d.NONE}break;default:p=d.NONE}p!==d.NONE&&l.dispatchEvent(h)}}function J(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),p){case d.TOUCH_ROTATE:if(!1===l.enableRotate)return;k(t),l.update();break;case d.TOUCH_PAN:if(!1===l.enablePan)return;W(t),l.update();break;case d.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&V(t),l.enablePan&&W(t)}(t),l.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&V(t),l.enableRotate&&k(t)}(t),l.update();break;default:p=d.NONE}}function K(t){!1!==l.enabled&&(l.dispatchEvent(u),p=d.NONE)}function $(t){!1!==l.enabled&&t.preventDefault()}l.domElement.addEventListener("contextmenu",$,!1),l.domElement.addEventListener("mousedown",j,!1),l.domElement.addEventListener("wheel",Q,!1),l.domElement.addEventListener("touchstart",q,!1),l.domElement.addEventListener("touchend",K,!1),l.domElement.addEventListener("touchmove",J,!1),l.domElement.addEventListener("keydown",Z,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()},Gg.OrbitControls.prototype=Object.create(Gg.EventDispatcher.prototype),Gg.OrbitControls.prototype.constructor=Gg.OrbitControls,Gg.MapControls=function(t,e){Gg.OrbitControls.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Gg.MOUSE.PAN,this.mouseButtons.RIGHT=Gg.MOUSE.ROTATE,this.touches.ONE=Gg.TOUCH.PAN,this.touches.TWO=Gg.TOUCH.DOLLY_ROTATE},Gg.MapControls.prototype=Object.create(Gg.EventDispatcher.prototype),Gg.MapControls.prototype.constructor=Gg.MapControls,Ov.prototype.setCameraForDragon=function(){this.camera=new Gg.PerspectiveCamera(75,this.w/this.h,.1,5e3),this.camera.position.set(0,275,700),this.camera.lookAt(new Gg.Vector3(0,80,0))},Ov.prototype.setCameraHandler=function(){this.cameraHandler=new Gg.OrbitControls(this.camera,this.wglrenderer.domElement),this.cameraHandler.target.set(0,100,0),this.cameraHandler.noKeys=!0},Ov.prototype.setup=function(t){this.wglrenderer.setSize(this.w,this.h),this.wglrenderer.setClearColor(new Gg.Color(8755),1),this.wglrenderer.shadowMap.enabled=!0,document.getElementById(t).appendChild(this.wglrenderer.domElement),console.info("GPT_Renderer.wglrenderer configured: clearColor and shadowMapEnabled"),this.setCameraForDragon(),this.setCameraHandler(),this.gpt_scene.setupScene()},Ov.prototype.update=function(t){this.gpt_scene.updateScene(t),this.cameraHandler.update()},Ov.prototype.renderFrame=function(){this.wglrenderer.render(this.gpt_scene.scene,this.camera)},Ov.prototype.reshape=function(){this.w=window.innerWidth,this.h=window.innerHeight,this.wglrenderer.setSize(this.w,this.h),this.camera.aspect=this.w/this.h,this.camera.updateProjectionMatrix(),console.log("Window Resized: "+this.w+" x "+this.h)};const zv=Ov;function Bv(t){this.done=!1,this.paused=!1,this.currentFrameNumber=0,this.lastTS=void 0,this.frameElapsedMS=0,this.requestAF=void 0,this.lastPeriodTS=void 0,this.MAX_PERIOD_MS=5e3,this.gpt_render=t,void 0===this.gpt_render&&console.error("GPT_Renderer is undefined. You must pass one valid")}Bv.prototype.init=function(){var t=this;console.debug("GPT_App.init"),this.gpt_render.setup("container"),window.addEventListener("resize",(function(){t.gpt_render.reshape()}))},Bv.prototype.drawFrame=function(t){var e=this,n=t;this.paused||(this.frameElapsedMS=n-this.lastTS,this.gpt_render.update(this.frameElapsedMS)),this.lastTS=n,this.gpt_render.renderFrame(),this.currentFrameNumber++,n-this.lastPeriodTS>this.MAX_PERIOD_MS&&(this.lastPeriodTS=n,console.log("GPT_App: Rendered Frames: "+this.currentFrameNumber+" TS: "+t)),this.done?(window.cancelAnimationFrame(this.requestAF),console.log("GPT_App: uninstalled animation frame callback")):this.requestAF=window.requestAnimationFrame((function(t){e.drawFrame(t)}))},Bv.prototype.run=function(){console.debug("GPT_APP.run"),this.currentFrameNumber=0,this.lastTS=performance.now(),this.frameElapsedMS=0,this.lastPeriodTS=performance.now(),this.drawFrame(performance.now())};const Hv=Bv;if(I.isWebGLAvailable())console.info("This web browser is WebGL compatible. Starting ..."),window.alert("This web browser is WebGL compatible. Starting ...");else{var Nv=I.getWebGLErrorMessage();document.getElementById("container").appendChild(Nv),window.alert("This web browser is NOT WebGL compatible")}console.log("Loading GPT library");var Fv=new Dv,Uv=new Hv(new zv(window.innerWidth,window.innerHeight,Fv));Uv.init(),Uv.run()},922:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(537),r=n.n(i),s=n(645),o=n.n(s)()(r());o.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=o},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(r," */"),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([s]).join("\n")}return[e].join("\n")}},705:(t,e,n)=>{var i=n(639).Symbol;t.exports=i},636:(t,e,n)=>{var i=n(545),r=n(694),s=n(469),o=n(144),a=n(776),l=n(719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),h=!n&&r(t),u=!n&&!h&&o(t),d=!n&&!h&&!u&&l(t),p=n||h||u||d,g=p?i(t.length,String):[],f=g.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||u&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,f))||g.push(m);return g}},932:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},311:(t,e,n)=>{var i=n(877);t.exports=function(t){var e=t.length;return e?t[i(0,e-1)]:void 0}},239:(t,e,n)=>{var i=n(705),r=n(607),s=n(333),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):s(t)}},454:(t,e,n)=>{var i=n(239),r=n(5);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},749:(t,e,n)=>{var i=n(239),r=n(780),s=n(5),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&r(t.length)&&!!o[i(t)]}},280:(t,e,n)=>{var i=n(726),r=n(916),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},877:t=>{var e=Math.floor,n=Math.random;t.exports=function(t,i){return t+e(n()*(i-t+1))}},992:(t,e,n)=>{var i=n(311),r=n(628);t.exports=function(t){return i(r(t))}},545:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},518:t=>{t.exports=function(t){return function(e){return t(e)}}},415:(t,e,n)=>{var i=n(932);t.exports=function(t,e){return i(e,(function(e){return t[e]}))}},957:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},607:(t,e,n)=>{var i=n(705),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[a]=n:delete t[a]),r}},776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},916:(t,e,n)=>{var i=n(443)(Object.keys,Object);t.exports=i},167:(t,e,n)=>{t=n.nmd(t);var i=n(957),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r&&i.process,a=function(){try{var t=s&&s.require&&s.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},443:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},639:(t,e,n)=>{var i=n(957),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();t.exports=s},694:(t,e,n)=>{var i=n(454),r=n(5),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},469:t=>{var e=Array.isArray;t.exports=e},612:(t,e,n)=>{var i=n(560),r=n(780);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},144:(t,e,n)=>{t=n.nmd(t);var i=n(639),r=n(62),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?i.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;t.exports=l},560:(t,e,n)=>{var i=n(239),r=n(218);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},763:(t,e,n)=>{var i=n(239),r=n(5);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==i(t)}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},719:(t,e,n)=>{var i=n(749),r=n(518),s=n(167),o=s&&s.isTypedArray,a=o?r(o):i;t.exports=a},674:(t,e,n)=>{var i=n(636),r=n(280),s=n(612);t.exports=function(t){return s(t)?i(t):r(t)}},534:(t,e,n)=>{var i=n(311),r=n(992),s=n(469);t.exports=function(t){return(s(t)?i:r)(t)}},62:t=>{t.exports=function(){return!1}},628:(t,e,n)=>{var i=n(415),r=n(674);t.exports=function(t){return null==t?[]:i(t,r(t))}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=s[c]||0,u="".concat(c," ").concat(h);s[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var g=r(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=i(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var l=i(t,r),c=0;c<s.length;c++){var h=n(s[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}s=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},825:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var i=n||0,r=e;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}},492:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},596:(t,e,n)=>{var i,r,s=n(492),o=n(825),a=0,l=0;t.exports=function(t,e,n){var c=e&&n||0,h=e||[],u=(t=t||{}).node||i,d=void 0!==t.clockseq?t.clockseq:r;if(null==u||null==d){var p=s();null==u&&(u=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=r=16383&(p[6]<<8|p[7]))}var g=void 0!==t.msecs?t.msecs:(new Date).getTime(),f=void 0!==t.nsecs?t.nsecs:l+1,m=g-a+(f-l)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||g>a)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=g,l=f,r=d;var A=(1e4*(268435455&(g+=122192928e5))+f)%4294967296;h[c++]=A>>>24&255,h[c++]=A>>>16&255,h[c++]=A>>>8&255,h[c++]=255&A;var C=g/4294967296*1e4&268435455;h[c++]=C>>>8&255,h[c++]=255&C,h[c++]=C>>>24&15|16,h[c++]=C>>>16&255,h[c++]=d>>>8|128,h[c++]=255&d;for(var v=0;v<6;++v)h[c+v]=u[v];return e||o(h)}}},t=>{var e;e=160,t(t.s=e)}]);